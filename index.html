<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click It!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #1a1a2e;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        h1 {
            color: white;
            font-size: 3rem;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .click-btn {
            background: #e63946;
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.5rem;
            cursor: pointer;
            border-radius: 10px;
            transition: transform 0.1s, box-shadow 0.1s;
            box-shadow: 0 5px 15px rgba(230, 57, 70, 0.4);
        }

        .click-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(230, 57, 70, 0.6);
        }

        .click-btn:active {
            transform: scale(0.95);
        }

        .counter {
            color: #aaa;
            margin-top: 20px;
            font-size: 1.2rem;
        }

        .high-score {
            position: fixed;
            top: 65px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffd700;
            font-size: 1.5rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            z-index: 50;
        }

        .multiplier-indicator {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            padding: 8px 20px;
            border-radius: 25px;
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            z-index: 100;
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.8);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .multiplier-indicator.active {
            transform: translateX(-50%) scale(1);
            opacity: 1;
            animation: multiplier-pulse 0.5s ease-in-out infinite;
        }
        @keyframes multiplier-pulse {
            0%, 100% { box-shadow: 0 0 30px rgba(255, 107, 107, 0.8); transform: translateX(-50%) scale(1); }
            50% { box-shadow: 0 0 50px rgba(255, 107, 107, 1); transform: translateX(-50%) scale(1.1); }
        }

        .laser {
            position: fixed;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ff0000, #ff4444, #ff0000, transparent);
            box-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000, 0 0 30px #ff0000;
            pointer-events: none;
            animation: laser-move 0.5s linear forwards;
        }

        .laser.horizontal {
            width: 100vw;
            left: 0;
        }

        .laser.vertical {
            width: 100vh;
            transform-origin: left center;
        }

        @keyframes laser-move {
            0% {
                opacity: 1;
                transform: scaleX(0);
            }
            50% {
                opacity: 1;
                transform: scaleX(1);
            }
            100% {
                opacity: 0;
                transform: scaleX(1);
            }
        }

        .celebration-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: #fff;
            text-shadow: 0 0 20px #ff0000, 0 0 40px #ff4444, 0 0 60px #ff0000;
            animation: pulse 0.5s ease-out forwards;
            pointer-events: none;
            z-index: 100;
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0;
            }
        }

        .particle {
            position: fixed;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            pointer-events: none;
            animation: particle-fly 1s ease-out forwards;
        }

        @keyframes particle-fly {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0);
            }
        }

        .achievement-popup {
            position: fixed;
            top: 20px;
            right: -400px;
            background: linear-gradient(135deg, #2a2a4a, #1a1a2e);
            border: 2px solid #ff4444;
            border-radius: 15px;
            padding: 20px 25px;
            color: white;
            box-shadow: 0 0 20px rgba(255, 68, 68, 0.5), inset 0 0 20px rgba(255, 68, 68, 0.1);
            z-index: 200;
            animation: slide-in 0.5s ease-out forwards;
            min-width: 280px;
        }

        .achievement-popup.slide-out {
            animation: slide-out 0.5s ease-in forwards;
        }

        @keyframes slide-in {
            0% {
                right: -400px;
            }
            100% {
                right: 20px;
            }
        }

        @keyframes slide-out {
            0% {
                right: 20px;
            }
            100% {
                right: -400px;
            }
        }

        .achievement-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .achievement-icon {
            font-size: 2rem;
        }

        .achievement-label {
            font-size: 0.8rem;
            color: #ff4444;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .achievement-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
        }

        .achievement-desc {
            font-size: 0.9rem;
            color: #aaa;
            margin-top: 5px;
        }

        .achievements-list {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .achievement-badge {
            background: linear-gradient(135deg, #2a2a4a, #1a1a2e);
            border: 1px solid #444;
            border-radius: 10px;
            padding: 10px 15px;
            color: #666;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .achievement-badge.unlocked {
            border-color: #ff4444;
            color: #fff;
            box-shadow: 0 0 10px rgba(255, 68, 68, 0.3);
        }

        .achievement-badge .badge-icon {
            font-size: 1.5rem;
            opacity: 0.3;
        }

        .achievement-badge.unlocked .badge-icon {
            opacity: 1;
        }

        /* Lucky Drop Styles */
        .lucky-drop-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 3px solid #ffd700;
            border-radius: 20px;
            padding: 30px 40px;
            color: white;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5), 0 0 60px rgba(255, 215, 0, 0.3), inset 0 0 30px rgba(255, 215, 0, 0.1);
            z-index: 300;
            text-align: center;
            animation: drop-appear 0.5s ease-out forwards;
        }

        @keyframes drop-appear {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(-10deg);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1) rotate(5deg);
            }
            100% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .lucky-drop-popup.closing {
            animation: drop-disappear 0.3s ease-in forwards;
        }

        @keyframes drop-disappear {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
        }

        .drop-label {
            font-size: 0.9rem;
            color: #ffd700;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 15px;
        }

        .drop-icon {
            font-size: 4rem;
            margin: 10px 0;
            animation: bounce 0.5s ease infinite alternate;
        }

        .drop-icon-box {
            width: 64px;
            height: 64px;
            margin: 15px auto;
            border-radius: 12px;
            animation: bounce 0.5s ease infinite alternate;
        }

        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-10px); }
        }

        .drop-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            margin: 10px 0;
        }

        .drop-rarity {
            font-size: 0.9rem;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin: 10px 0;
        }

        .drop-rarity.common { background: #888; color: #fff; }
        .drop-rarity.uncommon { background: #2ecc71; color: #fff; }
        .drop-rarity.rare { background: #3498db; color: #fff; }
        .drop-rarity.epic { background: #9b59b6; color: #fff; }
        .drop-rarity.legendary { background: linear-gradient(90deg, #f39c12, #e74c3c, #9b59b6); color: #fff; }

        .drop-desc {
            font-size: 0.9rem;
            color: #aaa;
            margin-top: 10px;
        }

        .drop-claim-btn {
            margin-top: 20px;
            background: linear-gradient(90deg, #ffd700, #ffaa00);
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: bold;
            color: #1a1a2e;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .drop-claim-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }

        /* Cosmetics Panel */
        .cosmetics-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(135deg, #2a2a4a, #1a1a2e);
            border: 1px solid #444;
            border-radius: 15px;
            padding: 15px;
            color: white;
            max-width: 220px;
            max-height: 70vh;
            display: flex;
            flex-direction: column;
        }

        #cosmeticsList {
            overflow-y: auto;
            flex: 1;
            padding-right: 5px;
        }

        #cosmeticsList::-webkit-scrollbar {
            width: 6px;
        }

        #cosmeticsList::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        #cosmeticsList::-webkit-scrollbar-thumb {
            background: rgba(255, 215, 0, 0.5);
            border-radius: 3px;
        }

        #cosmeticsList::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 215, 0, 0.8);
        }

        .cosmetics-title {
            font-size: 0.9rem;
            color: #ffd700;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .cosmetic-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .cosmetic-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .cosmetic-item.active {
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .cosmetic-item.locked {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .cosmetic-icon {
            font-size: 1.2rem;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .cosmetic-icon.icon-default { background: #e63946; }
        .cosmetic-icon.icon-rainbow { background: linear-gradient(90deg, #ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #8800ff); }
        .cosmetic-icon.icon-neon { background: #0ff; box-shadow: 0 0 8px #0ff; }
        .cosmetic-icon.icon-golden { background: linear-gradient(135deg, #ffd700, #ffaa00); }
        .cosmetic-icon.icon-galaxy { background: linear-gradient(135deg, #0c0c2c, #2d1b69); }
        .cosmetic-icon.icon-fire { background: linear-gradient(135deg, #ff4500, #ff0000); }
        .cosmetic-icon.icon-sparkle { background: linear-gradient(135deg, #fff, #ffd700); }
        .cosmetic-icon.icon-heart { background: linear-gradient(135deg, #ff6b9d, #c44569); }
        .cosmetic-icon.icon-star { background: linear-gradient(135deg, #ffd700, #ff8c00); }
        .cosmetic-icon.icon-explosion { background: linear-gradient(135deg, #ff4500, #ff6600); }
        .cosmetic-icon.icon-confetti { background: linear-gradient(135deg, #ff00ff, #00ffff, #ffff00); }
        .cosmetic-icon.icon-lightning { background: linear-gradient(135deg, #ffff00, #ff8800); }
        .cosmetic-icon.icon-ice { background: linear-gradient(135deg, #a8e6cf, #88d8f5, #74b9ff); }
        .cosmetic-icon.icon-toxic { background: linear-gradient(135deg, #00ff00, #39ff14, #32cd32); box-shadow: 0 0 8px #39ff14; }
        .cosmetic-icon.icon-void { background: linear-gradient(135deg, #1a0033, #330066, #4d0099); }
        .cosmetic-icon.icon-candy { background: linear-gradient(135deg, #ff69b4, #ff1493, #ff69b4); }
        .cosmetic-icon.icon-matrix { background: #000; box-shadow: inset 0 0 10px #00ff00; }
        .cosmetic-icon.icon-blood { background: linear-gradient(135deg, #8b0000, #dc143c, #8b0000); }
        .cosmetic-icon.icon-diamond { background: linear-gradient(135deg, #b9f2ff, #e0ffff, #87ceeb); }
        /* Fun themed skin icons */
        .cosmetic-icon.icon-cookie { background: radial-gradient(circle at 30% 30%, #d2691e, #8b4513); }
        .cosmetic-icon.icon-capybara { background: linear-gradient(135deg, #8b7355, #c4a484); }
        .cosmetic-icon.icon-fish { background: linear-gradient(135deg, #4169e1, #87ceeb); }
        .cosmetic-icon.icon-christmas { background: linear-gradient(135deg, #228b22, #006400); border: 1px solid #ffd700; }
        .cosmetic-icon.icon-pizza { background: linear-gradient(135deg, #ffa500, #ff6347); }
        .cosmetic-icon.icon-cat { background: linear-gradient(135deg, #ffb6c1, #ff69b4); }
        .cosmetic-icon.icon-dog { background: linear-gradient(135deg, #deb887, #c4a67c); }
        .cosmetic-icon.icon-unicorn { background: linear-gradient(135deg, #ff69b4, #da70d6, #87ceeb); }
        .cosmetic-icon.icon-penguin { background: linear-gradient(135deg, #2f2f2f, #fff, #2f2f2f); }
        .cosmetic-icon.icon-rocket { background: linear-gradient(180deg, #c0c0c0, #ff4500); }
        .cosmetic-icon.icon-snowman { background: linear-gradient(135deg, #fff, #c0c0c0); }
        .cosmetic-icon.icon-dragon { background: linear-gradient(135deg, #8b0000, #ffd700); }
        .cosmetic-icon.icon-alien { background: linear-gradient(135deg, #32cd32, #7fff00); }
        .cosmetic-icon.icon-ghost { background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(200,200,200,0.7)); }
        .cosmetic-icon.icon-pumpkin { background: linear-gradient(135deg, #ff8c00, #ff4500); }
        .cosmetic-icon.icon-bee { background: repeating-linear-gradient(135deg, #ffd700 0px, #ffd700 3px, #2f2f2f 3px, #2f2f2f 6px); }
        .cosmetic-icon.icon-bubble { background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), #87ceeb); }
        .cosmetic-icon.icon-smoke { background: linear-gradient(135deg, #2c3e50, #34495e, #95a5a6); }
        .cosmetic-icon.icon-plasma { background: linear-gradient(135deg, #8e44ad, #e74c3c, #f39c12); }
        .cosmetic-icon.icon-ripple { background: radial-gradient(circle, #3498db 0%, #2980b9 50%, #1a5276 100%); }
        .cosmetic-icon.icon-flame-frame { background: linear-gradient(135deg, #ff4500, #ff8c00); animation: icon-flicker 0.3s infinite alternate; }
        .cosmetic-icon.icon-electric-frame { background: linear-gradient(135deg, #00ffff, #0080ff); animation: icon-electric 0.5s infinite; }
        .cosmetic-icon.icon-rainbow-frame { background: linear-gradient(90deg, #ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #8800ff); animation: icon-rainbow-shift 1s linear infinite; background-size: 200% 100%; }
        .cosmetic-icon.icon-void-frame { background: radial-gradient(circle, #4d0099, #1a0033); animation: icon-void-pulse 1s ease-in-out infinite; }
        .cosmetic-icon.icon-gold-frame { background: linear-gradient(135deg, #ffd700, #b8860b, #ffd700); animation: icon-shine 2s ease-in-out infinite; }
        .cosmetic-icon.icon-frost-frame { background: linear-gradient(135deg, #87ceeb, #e0ffff, #b0e0e6); animation: icon-frost 1.5s ease-in-out infinite alternate; }
        .cosmetic-icon.icon-neon-frame { background: #000; box-shadow: inset 0 0 8px #ff00ff, inset 0 0 4px #00ffff; animation: icon-neon-cycle 2s linear infinite; }
        .cosmetic-icon.icon-pulse-frame { background: radial-gradient(circle, #e74c3c, #c0392b); animation: icon-pulse-beat 0.8s ease-in-out infinite; }

        @keyframes icon-flicker {
            from { filter: brightness(1); }
            to { filter: brightness(1.3); }
        }
        @keyframes icon-electric {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.5) hue-rotate(20deg); }
        }
        @keyframes icon-rainbow-shift {
            from { background-position: 0% 50%; }
            to { background-position: 200% 50%; }
        }
        @keyframes icon-void-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.9); }
        }
        @keyframes icon-shine {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.4); }
        }
        @keyframes icon-frost {
            from { filter: brightness(1) hue-rotate(0deg); }
            to { filter: brightness(1.2) hue-rotate(10deg); }
        }
        @keyframes icon-neon-cycle {
            0% { box-shadow: inset 0 0 8px #ff00ff, inset 0 0 4px #00ffff; }
            33% { box-shadow: inset 0 0 8px #00ffff, inset 0 0 4px #00ff00; }
            66% { box-shadow: inset 0 0 8px #00ff00, inset 0 0 4px #ff00ff; }
            100% { box-shadow: inset 0 0 8px #ff00ff, inset 0 0 4px #00ffff; }
        }
        @keyframes icon-pulse-beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Dimension-exclusive cosmetic icons */
        .cosmetic-icon.icon-ember { background: linear-gradient(135deg, #ff4500, #ff8c00, #ff4500); animation: icon-flicker 0.3s infinite alternate; }
        .cosmetic-icon.icon-magma { background: linear-gradient(135deg, #8b0000, #ff4500, #ffa500); animation: icon-flicker 0.2s infinite alternate; }
        .cosmetic-icon.icon-tidal { background: linear-gradient(135deg, #006994, #00bfff, #1e90ff); animation: icon-wave 2s ease-in-out infinite; }
        .cosmetic-icon.icon-abyss { background: linear-gradient(135deg, #000033, #000066, #0000aa); }
        .cosmetic-icon.icon-forest { background: linear-gradient(135deg, #228b22, #32cd32, #90ee90); }
        .cosmetic-icon.icon-bloom { background: linear-gradient(135deg, #ff69b4, #98fb98, #ffd700); animation: icon-bloom 2s ease-in-out infinite; }
        .cosmetic-icon.icon-shadow { background: linear-gradient(135deg, #1a0033, #330066, #000); }
        .cosmetic-icon.icon-rift { background: conic-gradient(#4b0082, #8a2be2, #9400d3, #4b0082); animation: icon-spin 3s linear infinite; }
        .cosmetic-icon.icon-solar { background: radial-gradient(circle, #ffd700, #ff8c00, #ff4500); box-shadow: 0 0 8px #ffd700; }
        .cosmetic-icon.icon-lunar { background: radial-gradient(circle at 30% 30%, #e0e0e0, #c0c0c0, #808080); }
        .cosmetic-icon.icon-glitch { background: linear-gradient(90deg, #ff0000, #00ff00, #0000ff); animation: icon-glitch 0.5s steps(3) infinite; }
        .cosmetic-icon.icon-corrupt { background: linear-gradient(135deg, #ff00ff, #000, #00ffff); animation: icon-corrupt 1s ease-in-out infinite; }
        .cosmetic-icon.icon-prism { background: conic-gradient(#ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #8800ff, #ff0000); animation: icon-spin 2s linear infinite; }
        .cosmetic-icon.icon-frozen { background: linear-gradient(135deg, #e0ffff, #87ceeb, #4169e1); animation: icon-frost 1.5s ease-in-out infinite alternate; }

        @keyframes icon-wave { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }
        @keyframes icon-bloom { 0%, 100% { filter: brightness(1) saturate(1); } 50% { filter: brightness(1.3) saturate(1.5); } }
        @keyframes icon-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes icon-glitch { 0% { filter: hue-rotate(0deg); } 33% { filter: hue-rotate(120deg); } 66% { filter: hue-rotate(240deg); } 100% { filter: hue-rotate(360deg); } }
        @keyframes icon-corrupt { 0%, 100% { filter: hue-rotate(0deg) brightness(1); } 50% { filter: hue-rotate(180deg) brightness(1.5); } }

        .cosmetic-name {
            font-size: 0.8rem;
            flex: 1;
        }

        .equip-btn {
            background: linear-gradient(90deg, #4CAF50, #45a049);
            border: none;
            padding: 4px 10px;
            font-size: 0.7rem;
            color: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            font-weight: bold;
        }

        .equip-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.5);
        }

        .equip-btn.equipped {
            background: linear-gradient(90deg, #ffd700, #ffaa00);
            color: #1a1a2e;
        }

        .equip-btn.unequip {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }

        .cosmetic-item.locked .equip-btn {
            display: none;
        }

        /* Button cosmetic effects */
        .click-btn.rainbow {
            animation: rainbow-bg 2s linear infinite;
        }

        @keyframes rainbow-bg {
            0% { background: #e63946; }
            16% { background: #f39c12; }
            33% { background: #2ecc71; }
            50% { background: #3498db; }
            66% { background: #9b59b6; }
            83% { background: #e74c3c; }
            100% { background: #e63946; }
        }

        .click-btn.neon {
            background: #0ff;
            color: #000;
            box-shadow: 0 0 20px #0ff, 0 0 40px #0ff, 0 0 60px #0ff;
            animation: neon-pulse 1s ease-in-out infinite alternate;
        }

        @keyframes neon-pulse {
            from { box-shadow: 0 0 20px #0ff, 0 0 40px #0ff; }
            to { box-shadow: 0 0 30px #0ff, 0 0 60px #0ff, 0 0 80px #0ff; }
        }

        .click-btn.golden {
            background: linear-gradient(135deg, #ffd700, #ffaa00, #ffd700);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }

        .click-btn.galaxy {
            background: linear-gradient(135deg, #0c0c2c, #1a1a4e, #2d1b69);
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
            position: relative;
            overflow: hidden;
        }

        .click-btn.galaxy::before {
            content: '';
            position: absolute;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: translate(0, 0); }
            50% { opacity: 1; transform: translate(10px, -10px); }
        }

        .click-btn.fire {
            background: linear-gradient(135deg, #ff4500, #ff6600, #ff0000);
            animation: fire-flicker 0.3s infinite alternate;
        }

        @keyframes fire-flicker {
            from { box-shadow: 0 0 20px #ff4500, 0 0 40px #ff0000; }
            to { box-shadow: 0 0 30px #ff6600, 0 0 50px #ff4500; }
        }

        .click-btn.ice {
            background: linear-gradient(135deg, #a8e6cf, #88d8f5, #74b9ff);
            box-shadow: 0 0 20px rgba(116, 185, 255, 0.5);
            color: #1a1a2e;
        }

        .click-btn.toxic {
            background: linear-gradient(135deg, #00ff00, #39ff14);
            box-shadow: 0 0 20px #39ff14, 0 0 40px #00ff00;
            color: #000;
            animation: toxic-pulse 0.5s ease-in-out infinite alternate;
        }

        @keyframes toxic-pulse {
            from { box-shadow: 0 0 20px #39ff14, 0 0 30px #00ff00; }
            to { box-shadow: 0 0 30px #39ff14, 0 0 50px #00ff00, 0 0 70px #32cd32; }
        }

        .click-btn.void {
            background: linear-gradient(135deg, #1a0033, #330066, #4d0099);
            box-shadow: 0 0 30px rgba(75, 0, 130, 0.8), inset 0 0 20px rgba(138, 43, 226, 0.3);
            animation: void-swirl 3s linear infinite;
        }

        @keyframes void-swirl {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .click-btn.candy {
            background: linear-gradient(45deg, #ff69b4, #ff1493, #ff69b4, #ff1493);
            background-size: 200% 200%;
            animation: candy-shift 1s ease infinite;
            box-shadow: 0 5px 20px rgba(255, 105, 180, 0.5);
        }

        @keyframes candy-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .click-btn.matrix {
            background: #000;
            color: #00ff00;
            border: 2px solid #00ff00;
            box-shadow: 0 0 20px #00ff00, inset 0 0 20px rgba(0, 255, 0, 0.2);
            text-shadow: 0 0 10px #00ff00;
        }

        .click-btn.blood {
            background: linear-gradient(135deg, #8b0000, #dc143c);
            box-shadow: 0 5px 20px rgba(139, 0, 0, 0.6);
            animation: blood-drip 2s ease-in-out infinite;
        }

        @keyframes blood-drip {
            0%, 100% { box-shadow: 0 5px 20px rgba(139, 0, 0, 0.6); }
            50% { box-shadow: 0 8px 30px rgba(220, 20, 60, 0.8); }
        }

        .click-btn.diamond {
            background: linear-gradient(135deg, #b9f2ff, #e0ffff, #87ceeb, #e0ffff);
            box-shadow: 0 0 30px rgba(135, 206, 235, 0.8);
            color: #1a1a2e;
            animation: diamond-shine 2s ease-in-out infinite;
        }

        @keyframes diamond-shine {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }

        /* Dimension-exclusive button skins */
        .click-btn.ember-btn {
            background: linear-gradient(135deg, #ff4500, #ff8c00, #ff4500);
            box-shadow: 0 0 30px rgba(255, 69, 0, 0.6), 0 0 60px rgba(255, 140, 0, 0.4);
            animation: ember-btn-pulse 0.5s ease-in-out infinite alternate;
        }
        @keyframes ember-btn-pulse {
            from { box-shadow: 0 0 30px rgba(255, 69, 0, 0.6); }
            to { box-shadow: 0 0 50px rgba(255, 69, 0, 0.9), 0 0 80px rgba(255, 140, 0, 0.6); }
        }

        .click-btn.magma-btn {
            background: linear-gradient(135deg, #8b0000, #ff4500, #ffa500);
            box-shadow: 0 0 20px #ff4500, inset 0 0 20px rgba(255, 69, 0, 0.5);
            animation: magma-flow 2s ease-in-out infinite;
            background-size: 200% 200%;
        }
        @keyframes magma-flow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .click-btn.tidal-btn {
            background: linear-gradient(135deg, #006994, #00bfff, #1e90ff);
            box-shadow: 0 0 25px rgba(0, 191, 255, 0.6);
            animation: tidal-wave 3s ease-in-out infinite;
            background-size: 200% 200%;
        }
        @keyframes tidal-wave {
            0%, 100% { background-position: 0% 50%; box-shadow: 0 0 25px rgba(0, 191, 255, 0.6); }
            50% { background-position: 100% 50%; box-shadow: 0 0 40px rgba(0, 191, 255, 0.9); }
        }

        .click-btn.abyss-btn {
            background: linear-gradient(135deg, #000033, #000066, #0000aa);
            box-shadow: 0 0 30px rgba(0, 0, 100, 0.8), inset 0 0 30px rgba(0, 0, 170, 0.3);
            border: 1px solid #0000aa;
        }

        .click-btn.forest-btn {
            background: linear-gradient(135deg, #228b22, #32cd32, #90ee90);
            box-shadow: 0 0 20px rgba(50, 205, 50, 0.5);
            color: #000;
        }

        .click-btn.bloom-btn {
            background: linear-gradient(45deg, #ff69b4, #98fb98, #ffd700, #ff69b4);
            background-size: 300% 300%;
            animation: bloom-shift 4s ease infinite;
            box-shadow: 0 0 25px rgba(255, 105, 180, 0.5);
            color: #000;
        }
        @keyframes bloom-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .click-btn.shadow-btn {
            background: linear-gradient(135deg, #1a0033, #330066, #000);
            box-shadow: 0 0 40px rgba(51, 0, 102, 0.8), inset 0 0 20px rgba(0, 0, 0, 0.5);
            border: 1px solid #4b0082;
        }

        .click-btn.rift-btn {
            background: conic-gradient(from 0deg, #4b0082, #8a2be2, #9400d3, #4b0082);
            animation: rift-spin 4s linear infinite;
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.6);
        }
        @keyframes rift-spin {
            from { filter: hue-rotate(0deg); }
            to { filter: hue-rotate(360deg); }
        }

        .click-btn.solar-btn {
            background: radial-gradient(circle at 30% 30%, #ffd700, #ff8c00, #ff4500);
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.7), 0 0 80px rgba(255, 140, 0, 0.4);
            animation: solar-flare 2s ease-in-out infinite;
        }
        @keyframes solar-flare {
            0%, 100% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.7); }
            50% { box-shadow: 0 0 60px rgba(255, 215, 0, 1), 0 0 100px rgba(255, 140, 0, 0.6); }
        }

        .click-btn.lunar-btn {
            background: radial-gradient(circle at 30% 30%, #e0e0e0, #c0c0c0, #808080);
            box-shadow: 0 0 30px rgba(200, 200, 200, 0.5);
            color: #333;
        }

        .click-btn.glitch-btn {
            background: linear-gradient(90deg, #ff0000, #00ff00, #0000ff);
            animation: glitch-effect 0.3s steps(3) infinite;
            box-shadow: 0 0 20px #ff00ff;
        }
        @keyframes glitch-effect {
            0% { transform: translate(0); filter: hue-rotate(0deg); }
            25% { transform: translate(-2px, 2px); filter: hue-rotate(90deg); }
            50% { transform: translate(2px, -2px); filter: hue-rotate(180deg); }
            75% { transform: translate(-2px, -2px); filter: hue-rotate(270deg); }
            100% { transform: translate(0); filter: hue-rotate(360deg); }
        }

        .click-btn.corrupt-btn {
            background: linear-gradient(135deg, #ff00ff, #000, #00ffff);
            background-size: 200% 200%;
            animation: corrupt-shift 2s ease-in-out infinite;
            box-shadow: 0 0 25px rgba(255, 0, 255, 0.5), 0 0 25px rgba(0, 255, 255, 0.5);
        }
        @keyframes corrupt-shift {
            0%, 100% { background-position: 0% 50%; filter: brightness(1); }
            50% { background-position: 100% 50%; filter: brightness(1.3); }
        }

        .click-btn.prism-btn {
            background: conic-gradient(from 0deg, #ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #8800ff, #ff0000);
            animation: prism-rotate 3s linear infinite;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            color: #000;
            text-shadow: 0 0 5px #fff;
        }
        @keyframes prism-rotate {
            from { filter: hue-rotate(0deg); }
            to { filter: hue-rotate(360deg); }
        }

        .click-btn.frozen-btn {
            background: linear-gradient(135deg, #e0ffff, #87ceeb, #4169e1);
            box-shadow: 0 0 30px rgba(135, 206, 235, 0.6), inset 0 0 15px rgba(255, 255, 255, 0.3);
            color: #000;
            animation: frozen-shimmer 2s ease-in-out infinite alternate;
        }
        @keyframes frozen-shimmer {
            from { filter: brightness(1); }
            to { filter: brightness(1.2) hue-rotate(10deg); }
        }

        /* New dimension button skins */
        .click-btn.thunder-btn { background: linear-gradient(135deg, #4169e1, #1e90ff); box-shadow: 0 0 30px #4169e1; animation: thunder-flash 0.3s ease-in-out infinite; }
        .click-btn.lightning-btn { background: linear-gradient(135deg, #ffff00, #ffd700); box-shadow: 0 0 40px #ffff00, 0 0 60px #ffd700; color: #000; animation: lightning-strike 0.1s steps(2) infinite; }
        .click-btn.sand-btn { background: linear-gradient(135deg, #daa520, #cd853f, #d2691e); box-shadow: 0 0 20px rgba(218, 165, 32, 0.5); }
        .click-btn.oasis-btn { background: linear-gradient(135deg, #00ced1, #20b2aa, #daa520); box-shadow: 0 0 25px rgba(0, 206, 209, 0.6); }
        .click-btn.demon-btn { background: linear-gradient(135deg, #8b0000, #dc143c); box-shadow: 0 0 30px #8b0000, inset 0 0 20px rgba(220, 20, 60, 0.5); }
        .click-btn.hellfire-btn { background: linear-gradient(135deg, #ff4500, #ff0000, #8b0000); box-shadow: 0 0 40px #ff4500, 0 0 60px #ff0000; animation: hellfire-burn 0.2s ease-in-out infinite alternate; }
        .click-btn.glacier-btn { background: linear-gradient(135deg, #e0ffff, #b0e0e6, #87ceeb); box-shadow: 0 0 25px rgba(176, 224, 230, 0.6); color: #000; }
        .click-btn.aurora-btn { background: linear-gradient(45deg, #00ff00, #00ffff, #ff00ff, #00ff00); background-size: 300% 300%; animation: aurora-shift 3s ease infinite; box-shadow: 0 0 30px rgba(0, 255, 255, 0.5); }
        .click-btn.cyber-btn { background: #000; border: 2px solid #00ff00; color: #00ff00; box-shadow: 0 0 20px #00ff00, inset 0 0 10px rgba(0, 255, 0, 0.3); animation: cyber-scan 2s linear infinite; }
        .click-btn.hologram-btn { background: linear-gradient(135deg, rgba(0,255,255,0.3), rgba(255,0,255,0.3)); border: 2px solid #0ff; box-shadow: 0 0 30px #0ff; animation: hologram-flicker 0.5s steps(3) infinite; }
        .click-btn.dream-btn { background: linear-gradient(135deg, #dda0dd, #da70d6, #ee82ee); box-shadow: 0 0 25px rgba(221, 160, 221, 0.6); }
        .click-btn.nightmare-btn { background: linear-gradient(135deg, #2f0040, #4a0066, #1a0033); box-shadow: 0 0 30px rgba(75, 0, 130, 0.8); animation: nightmare-pulse 1s ease-in-out infinite; }
        .click-btn.relic-btn { background: linear-gradient(135deg, #d2691e, #b8860b, #8b4513); box-shadow: 0 0 20px rgba(210, 105, 30, 0.5); }
        .click-btn.pharaoh-btn { background: linear-gradient(135deg, #ffd700, #daa520, #b8860b); box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), inset 0 0 15px rgba(255, 215, 0, 0.3); }
        .click-btn.mutant-btn { background: linear-gradient(135deg, #7fff00, #32cd32, #228b22); box-shadow: 0 0 25px #7fff00; animation: mutant-throb 0.5s ease-in-out infinite alternate; }
        .click-btn.radioactive-btn { background: radial-gradient(circle, #7fff00, #32cd32, #000); box-shadow: 0 0 40px #7fff00, 0 0 60px #32cd32; animation: radioactive-glow 1s ease-in-out infinite; color: #000; }
        .click-btn.sweet-btn { background: linear-gradient(135deg, #ff69b4, #ff1493, #ff69b4); box-shadow: 0 0 20px rgba(255, 105, 180, 0.5); }
        .click-btn.chocolate-btn { background: linear-gradient(135deg, #8b4513, #d2691e, #a0522d); box-shadow: 0 0 20px rgba(139, 69, 19, 0.5); }
        .click-btn.shade-btn { background: linear-gradient(135deg, #1a1a1a, #2f2f2f, #1a1a1a); box-shadow: 0 0 30px rgba(0, 0, 0, 0.8); border: 1px solid #444; }
        .click-btn.umbra-btn { background: radial-gradient(circle, #2f2f2f, #000); box-shadow: 0 0 50px #000, inset 0 0 30px rgba(50, 50, 50, 0.5); animation: umbra-consume 2s ease-in-out infinite; }
        .click-btn.quantum-btn { background: linear-gradient(135deg, #00ced1, #20b2aa, #00ced1); box-shadow: 0 0 25px #00ced1; animation: quantum-phase 0.3s steps(2) infinite; }
        .click-btn.particle-btn { background: conic-gradient(from 0deg, #00ced1, #ff00ff, #ffff00, #00ced1); animation: particle-spin 2s linear infinite; box-shadow: 0 0 30px rgba(0, 206, 209, 0.6); }
        .click-btn.omega-btn { background: linear-gradient(135deg, #ffd700, #ff4500, #8a2be2, #ffd700); background-size: 300% 300%; animation: omega-flow 3s ease infinite; box-shadow: 0 0 40px rgba(255, 215, 0, 0.7); }
        .click-btn.transcendent-btn { background: conic-gradient(from 0deg, #ffd700, #fff, #ffd700, #ff4500, #ffd700); animation: transcend-spin 4s linear infinite; box-shadow: 0 0 50px #ffd700, 0 0 80px #fff; color: #000; }

        @keyframes thunder-flash { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        @keyframes lightning-strike { 0%, 100% { filter: brightness(1); } 50% { filter: brightness(2); } }
        @keyframes hellfire-burn { from { box-shadow: 0 0 40px #ff4500; } to { box-shadow: 0 0 60px #ff0000, 0 0 80px #ff4500; } }
        @keyframes aurora-shift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes cyber-scan { 0% { box-shadow: 0 0 20px #00ff00, inset 0 -50px 30px -30px rgba(0, 255, 0, 0.3); } 50% { box-shadow: 0 0 20px #00ff00, inset 0 50px 30px -30px rgba(0, 255, 0, 0.3); } 100% { box-shadow: 0 0 20px #00ff00, inset 0 -50px 30px -30px rgba(0, 255, 0, 0.3); } }
        @keyframes hologram-flicker { 0%, 100% { opacity: 1; } 33% { opacity: 0.8; } 66% { opacity: 0.9; } }
        @keyframes nightmare-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); filter: brightness(0.8); } }
        @keyframes mutant-throb { from { box-shadow: 0 0 25px #7fff00; } to { box-shadow: 0 0 40px #7fff00, 0 0 60px #32cd32; } }
        @keyframes radioactive-glow { 0%, 100% { box-shadow: 0 0 40px #7fff00; } 50% { box-shadow: 0 0 60px #7fff00, 0 0 80px #32cd32; } }
        @keyframes umbra-consume { 0%, 100% { box-shadow: 0 0 50px #000; } 50% { box-shadow: 0 0 80px #000, 0 0 100px rgba(0,0,0,0.5); } }
        @keyframes quantum-phase { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        @keyframes particle-spin { from { filter: hue-rotate(0deg); } to { filter: hue-rotate(360deg); } }
        @keyframes omega-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes transcend-spin { from { filter: hue-rotate(0deg); } to { filter: hue-rotate(360deg); } }

        /* Fun themed button skins - Full character buttons */
        .click-btn.cookie-btn,
        .click-btn.capybara-btn,
        .click-btn.fish-btn,
        .click-btn.christmas-btn,
        .click-btn.pizza-btn,
        .click-btn.cat-btn,
        .click-btn.dog-btn,
        .click-btn.unicorn-btn,
        .click-btn.penguin-btn,
        .click-btn.rocket-btn,
        .click-btn.snowman-btn,
        .click-btn.dragon-btn,
        .click-btn.alien-btn,
        .click-btn.ghost-btn,
        .click-btn.pumpkin-btn,
        .click-btn.bee-btn {
            transform-style: preserve-3d;
            perspective: 500px;
        }
        .click-btn.cookie-btn::before,
        .click-btn.capybara-btn::before,
        .click-btn.fish-btn::before,
        .click-btn.christmas-btn::before,
        .click-btn.pizza-btn::before,
        .click-btn.cat-btn::before,
        .click-btn.dog-btn::before,
        .click-btn.unicorn-btn::before,
        .click-btn.penguin-btn::before,
        .click-btn.rocket-btn::before,
        .click-btn.snowman-btn::before,
        .click-btn.dragon-btn::before,
        .click-btn.alien-btn::before,
        .click-btn.ghost-btn::before,
        .click-btn.pumpkin-btn::before,
        .click-btn.bee-btn::before {
            display: inline-block;
            animation: themed-3d-float 3s ease-in-out infinite;
            text-shadow:
                0 1px 0 rgba(0,0,0,0.2),
                0 2px 0 rgba(0,0,0,0.19),
                0 3px 0 rgba(0,0,0,0.18),
                0 4px 0 rgba(0,0,0,0.17),
                0 5px 0 rgba(0,0,0,0.16),
                0 6px 1px rgba(0,0,0,0.15),
                0 10px 10px rgba(0,0,0,0.3);
        }
        @keyframes themed-3d-float {
            0%, 100% {
                transform: rotateX(10deg) rotateY(-10deg) translateZ(20px);
            }
            25% {
                transform: rotateX(-5deg) rotateY(5deg) translateZ(30px);
            }
            50% {
                transform: rotateX(10deg) rotateY(10deg) translateZ(20px);
            }
            75% {
                transform: rotateX(-5deg) rotateY(-5deg) translateZ(30px);
            }
        }
        /* Roar animation - for fierce creatures */
        @keyframes themed-3d-roar {
            0%, 100% {
                transform: rotateX(0deg) rotateY(0deg) translateZ(20px) scale(1);
            }
            10% {
                transform: rotateX(-15deg) rotateY(0deg) translateZ(40px) scale(1.3);
            }
            20% {
                transform: rotateX(-10deg) rotateY(-5deg) translateZ(35px) scale(1.25);
            }
            30% {
                transform: rotateX(-15deg) rotateY(5deg) translateZ(40px) scale(1.3);
            }
            40% {
                transform: rotateX(5deg) rotateY(0deg) translateZ(25px) scale(1.1);
            }
        }
        /* Dance animation - for playful creatures */
        @keyframes themed-3d-dance {
            0%, 100% {
                transform: rotateX(0deg) rotateY(-15deg) rotateZ(0deg) translateZ(20px);
            }
            25% {
                transform: rotateX(10deg) rotateY(15deg) rotateZ(10deg) translateZ(30px) translateY(-10px);
            }
            50% {
                transform: rotateX(-5deg) rotateY(-15deg) rotateZ(-10deg) translateZ(25px);
            }
            75% {
                transform: rotateX(10deg) rotateY(15deg) rotateZ(10deg) translateZ(30px) translateY(-10px);
            }
        }
        /* Sleep animation - for calm creatures */
        @keyframes themed-3d-sleep {
            0%, 100% {
                transform: rotateX(5deg) rotateY(-3deg) translateZ(15px) translateY(0px);
            }
            50% {
                transform: rotateX(8deg) rotateY(3deg) translateZ(18px) translateY(5px);
            }
        }
        /* Override animations per button type */
        .click-btn.dragon-btn::before,
        .click-btn.rocket-btn::before,
        .click-btn.pumpkin-btn::before {
            animation: themed-3d-roar 2s ease-in-out infinite;
        }
        .click-btn.cat-btn::before,
        .click-btn.dog-btn::before,
        .click-btn.unicorn-btn::before,
        .click-btn.bee-btn::before,
        .click-btn.penguin-btn::before,
        .click-btn.alien-btn::before {
            animation: themed-3d-dance 1.5s ease-in-out infinite;
        }
        .click-btn.capybara-btn::before,
        .click-btn.fish-btn::before,
        .click-btn.snowman-btn::before,
        .click-btn.ghost-btn::before,
        .click-btn.cookie-btn::before {
            animation: themed-3d-sleep 4s ease-in-out infinite;
        }

        .click-btn.cookie-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: cookie-wobble 0.6s ease-in-out infinite;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(210, 105, 30, 0.6));
        }
        .click-btn.cookie-btn::before { content: 'üç™'; font-size: 5rem; text-shadow: 0 8px 25px rgba(139, 69, 19, 0.8); }
        .click-btn.cookie-btn::after { content: 'ü•õ'; position: absolute; font-size: 1.5rem; bottom: -20px; left: 50%; transform: translateX(-50%); animation: cookie-dunk 2s ease-in-out infinite; }
        @keyframes cookie-wobble { 0%, 100% { transform: rotate(-8deg) scale(1); } 50% { transform: rotate(8deg) scale(1.15); } }
        @keyframes cookie-dunk { 0%, 100% { transform: translateX(-50%) translateY(0); opacity: 1; } 50% { transform: translateX(-50%) translateY(10px); opacity: 0.6; } }

        .click-btn.capybara-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: capybara-chill 2s ease-in-out infinite;
            position: relative;
            filter: drop-shadow(0 0 15px rgba(139, 115, 85, 0.5));
        }
        .click-btn.capybara-btn::before { content: 'ü¶´'; font-size: 5rem; text-shadow: 0 8px 20px rgba(139, 115, 85, 0.7); }
        .click-btn.capybara-btn::after { content: 'üçä'; position: absolute; font-size: 2rem; top: -10px; left: 50%; transform: translateX(-50%); animation: orange-balance 2s ease-in-out infinite; }
        @keyframes capybara-chill { 0%, 100% { transform: translateY(0) scale(1); } 25% { transform: translateY(-8px) scale(1.02); } 75% { transform: translateY(-3px) scale(1.01); } }
        @keyframes orange-balance { 0%, 100% { transform: translateX(-50%) rotate(-10deg) translateY(0); } 25% { transform: translateX(-40%) rotate(5deg) translateY(-5px); } 75% { transform: translateX(-60%) rotate(-5deg) translateY(-3px); } }

        .click-btn.fish-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: fish-swim 1.5s ease-in-out infinite;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(65, 105, 225, 0.6));
        }
        .click-btn.fish-btn::before { content: 'üêü'; font-size: 5rem; text-shadow: 0 8px 25px rgba(65, 105, 225, 0.8); }
        .click-btn.fish-btn::after { content: 'üíß'; position: absolute; font-size: 1.5rem; bottom: -5px; left: 20%; animation: bubbles-float 1.5s ease-out infinite; }
        @keyframes fish-swim { 0%, 100% { transform: translateX(-10px) rotate(-15deg) scaleX(1); } 50% { transform: translateX(10px) rotate(15deg) scaleX(-1); } }
        @keyframes bubbles-float { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-40px) scale(0.5); opacity: 0; } }

        .click-btn.christmas-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: tree-dance 1s ease-in-out infinite;
            border: none;
            position: relative;
            filter: drop-shadow(0 0 25px rgba(34, 139, 34, 0.7));
        }
        .click-btn.christmas-btn::before { content: 'üéÑ'; font-size: 5rem; text-shadow: 0 0 40px rgba(34, 139, 34, 1); }
        .click-btn.christmas-btn::after { content: '‚≠ê'; position: absolute; font-size: 2rem; top: -20px; left: 50%; transform: translateX(-50%); animation: star-burst 0.8s ease-in-out infinite; }
        @keyframes tree-dance { 0%, 100% { transform: scale(1) rotate(-3deg); filter: brightness(1); } 50% { transform: scale(1.1) rotate(3deg); filter: brightness(1.3) hue-rotate(10deg); } }
        @keyframes star-burst { 0%, 100% { transform: translateX(-50%) scale(1) rotate(0deg); filter: brightness(1); } 50% { transform: translateX(-50%) scale(1.4) rotate(180deg); filter: brightness(2) drop-shadow(0 0 20px gold); } }

        .click-btn.pizza-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: pizza-spin 2s linear infinite;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(255, 140, 0, 0.6));
        }
        .click-btn.pizza-btn::before { content: 'üçï'; font-size: 5rem; text-shadow: 0 8px 25px rgba(255, 140, 0, 0.8); }
        .click-btn.pizza-btn::after { content: 'üßÄ'; position: absolute; font-size: 1rem; top: -15px; left: 50%; transform: translateX(-50%); animation: toppings-fly 2s linear infinite; }
        @keyframes pizza-spin { from { transform: rotate(0deg) scale(1); } 50% { transform: rotate(180deg) scale(1.1); } to { transform: rotate(360deg) scale(1); } }
        @keyframes toppings-fly { 0% { transform: translateX(-50%) translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateX(-50%) translateY(-30px) rotate(360deg); opacity: 0; } }

        .click-btn.cat-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: cat-playful 0.6s ease-in-out infinite;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.5));
        }
        .click-btn.cat-btn::before { content: 'üê±'; font-size: 5rem; text-shadow: 0 8px 25px rgba(255, 105, 180, 0.7); }
        .click-btn.cat-btn::after { content: 'üíï'; position: absolute; font-size: 1.2rem; top: -15px; left: 50%; transform: translateX(-50%); animation: hearts-burst 1s ease-in-out infinite; }
        @keyframes cat-playful { 0%, 100% { transform: translateY(0) rotate(-8deg) scale(1); } 25% { transform: translateY(-15px) rotate(0deg) scale(1.1); } 75% { transform: translateY(-5px) rotate(8deg) scale(1.05); } }
        @keyframes hearts-burst { 0%, 100% { transform: translateX(-50%) scale(0.8); opacity: 0.5; } 50% { transform: translateX(-50%) scale(1.3); opacity: 1; } }

        .click-btn.dog-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: dog-excited 0.2s ease-in-out infinite;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(222, 184, 135, 0.6));
        }
        .click-btn.dog-btn::before { content: 'üê∂'; font-size: 5rem; text-shadow: 0 8px 25px rgba(222, 184, 135, 0.8); }
        .click-btn.dog-btn::after { content: 'ü¶¥'; position: absolute; font-size: 1.8rem; top: -25px; left: 50%; animation: bone-bounce 0.5s ease-in-out infinite; }
        @keyframes dog-excited { 0%, 100% { transform: rotate(-10deg) translateY(0); } 50% { transform: rotate(10deg) translateY(-5px); } }
        @keyframes bone-bounce { 0%, 100% { transform: translateX(-50%) translateY(0) rotate(0deg); } 50% { transform: translateX(-50%) translateY(-15px) rotate(360deg); } }

        .click-btn.unicorn-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: unicorn-magical 1.2s ease-in-out infinite;
            filter: drop-shadow(0 0 25px #ff69b4);
            position: relative;
        }
        .click-btn.unicorn-btn::before { content: 'ü¶Ñ'; font-size: 5rem; text-shadow: 0 8px 30px rgba(218, 112, 214, 0.9); animation: unicorn-rainbow 2s linear infinite; }
        .click-btn.unicorn-btn::after { content: '‚ú®'; position: absolute; font-size: 1.2rem; bottom: -20px; left: 50%; transform: translateX(-50%); animation: rainbow-trail 1.5s ease-in-out infinite; }
        @keyframes unicorn-magical { 0%, 100% { transform: translateY(0) rotate(-5deg) scale(1); } 50% { transform: translateY(-20px) rotate(5deg) scale(1.1); } }
        @keyframes unicorn-rainbow { 0%, 100% { filter: hue-rotate(0deg) brightness(1); } 50% { filter: hue-rotate(60deg) brightness(1.2); } }
        @keyframes rainbow-trail { 0%, 100% { opacity: 0.6; transform: translateX(-50%) scaleX(1); filter: hue-rotate(0deg); } 50% { opacity: 1; transform: translateX(-50%) scaleX(1.3); filter: hue-rotate(180deg); } }

        .click-btn.penguin-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: penguin-waddle 0.4s ease-in-out infinite;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(135, 206, 235, 0.6));
        }
        .click-btn.penguin-btn::before { content: 'üêß'; font-size: 5rem; text-shadow: 0 8px 25px rgba(47, 47, 47, 0.7); }
        .click-btn.penguin-btn::after { content: '‚ùÑÔ∏è'; position: absolute; font-size: 1.5rem; top: -20px; left: 50%; animation: snowflakes-fall 1.5s linear infinite; }
        @keyframes penguin-waddle { 0%, 100% { transform: rotate(-20deg) translateX(-8px); } 50% { transform: rotate(20deg) translateX(8px); } }
        @keyframes snowflakes-fall { 0% { transform: translateX(-50%) translateY(-10px) rotate(0deg); opacity: 1; } 100% { transform: translateX(-50%) translateY(40px) rotate(360deg); opacity: 0; } }

        .click-btn.rocket-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: rocket-launch 0.3s ease-in-out infinite;
            position: relative;
            filter: drop-shadow(0 0 25px rgba(255, 69, 0, 0.7));
        }
        .click-btn.rocket-btn::before { content: 'üöÄ'; font-size: 5rem; text-shadow: 0 8px 30px rgba(255, 69, 0, 0.9); }
        .click-btn.rocket-btn::after { content: 'üî•'; position: absolute; font-size: 1.8rem; bottom: -25px; left: 50%; transform: translateX(-50%); animation: rocket-exhaust 0.15s ease-in-out infinite alternate; }
        @keyframes rocket-launch { 0%, 100% { transform: translateY(0) rotate(-5deg); } 50% { transform: translateY(-12px) rotate(5deg); } }
        @keyframes rocket-exhaust { from { transform: translateX(-50%) scaleY(1) scaleX(1); filter: brightness(1); } to { transform: translateX(-50%) scaleY(1.4) scaleX(1.2); filter: brightness(1.5); } }

        .click-btn.snowman-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: snowman-dance 1s ease-in-out infinite;
            filter: drop-shadow(0 0 25px rgba(255, 255, 255, 0.8));
            position: relative;
        }
        .click-btn.snowman-btn::before { content: '‚õÑ'; font-size: 5rem; text-shadow: 0 8px 30px rgba(255, 255, 255, 1); }
        .click-btn.snowman-btn::after { content: '‚ùÑÔ∏è'; position: absolute; font-size: 1.2rem; top: -20px; left: 50%; transform: translateX(-50%); animation: blizzard 1.5s linear infinite; }
        @keyframes snowman-dance { 0%, 100% { transform: rotate(-8deg) scale(1); } 50% { transform: rotate(8deg) scale(1.08); } }
        @keyframes blizzard { 0% { transform: translateX(-50%) translateY(-10px); opacity: 1; } 100% { transform: translateX(-30%) translateY(30px); opacity: 0; } }

        .click-btn.dragon-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: dragon-soar 1.5s ease-in-out infinite;
            filter: drop-shadow(0 0 30px #ff4500);
            position: relative;
        }
        .click-btn.dragon-btn::before { content: 'üêâ'; font-size: 5rem; text-shadow: 0 8px 35px rgba(255, 69, 0, 1); animation: dragon-glow 0.5s ease-in-out infinite alternate; }
        .click-btn.dragon-btn::after { content: 'üî•'; position: absolute; font-size: 1.5rem; right: -40px; top: 50%; transform: translateY(-50%); animation: fire-roar 0.2s ease-in-out infinite alternate; }
        @keyframes dragon-soar { 0%, 100% { transform: translateY(0) rotate(-8deg) scale(1); } 50% { transform: translateY(-25px) rotate(8deg) scale(1.15); } }
        @keyframes dragon-glow { from { filter: brightness(1) hue-rotate(0deg); } to { filter: brightness(1.4) hue-rotate(15deg); } }
        @keyframes fire-roar { from { transform: translateY(-50%) scaleX(1); opacity: 1; } to { transform: translateY(-50%) scaleX(1.5); opacity: 0.8; } }

        .click-btn.alien-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: alien-abduct 1.5s ease-in-out infinite;
            filter: drop-shadow(0 0 25px #00ff00);
            position: relative;
        }
        .click-btn.alien-btn::before { content: 'üëΩ'; font-size: 5rem; text-shadow: 0 8px 30px rgba(50, 205, 50, 0.9); animation: alien-pulse 0.8s ease-in-out infinite; }
        .click-btn.alien-btn::after { content: 'üõ∏'; position: absolute; font-size: 2.5rem; top: -40px; left: 50%; transform: translateX(-50%); animation: ufo-hover 1s ease-in-out infinite; }
        @keyframes alien-abduct { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-15px) scale(1.1); } }
        @keyframes alien-pulse { 0%, 100% { filter: hue-rotate(0deg) brightness(1); } 50% { filter: hue-rotate(60deg) brightness(1.3); } }
        @keyframes ufo-hover { 0%, 100% { transform: translateX(-50%) translateY(0) rotate(-5deg); } 50% { transform: translateX(-50%) translateY(-15px) rotate(5deg); } }

        .click-btn.ghost-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: ghost-spooky 1.5s ease-in-out infinite;
            position: relative;
        }
        .click-btn.ghost-btn::before { content: 'üëª'; font-size: 5rem; text-shadow: 0 8px 30px rgba(255, 255, 255, 0.7); animation: ghost-fade 2s ease-in-out infinite; }
        .click-btn.ghost-btn::after { content: 'üëÄ'; position: absolute; font-size: 1.5rem; top: 50%; left: 50%; transform: translate(-50%, -50%); animation: eyes-peek 3s ease-in-out infinite; }
        @keyframes ghost-spooky { 0%, 100% { transform: translateY(0) scale(1) rotate(-5deg); } 50% { transform: translateY(-20px) scale(1.15) rotate(5deg); } }
        @keyframes ghost-fade { 0%, 100% { opacity: 0.7; filter: blur(0px); } 50% { opacity: 1; filter: blur(1px); } }
        @keyframes eyes-peek { 0%, 40%, 100% { opacity: 0; } 50%, 90% { opacity: 1; } }

        .click-btn.pumpkin-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: pumpkin-scary 0.8s ease-in-out infinite;
            filter: drop-shadow(0 0 30px orange);
            position: relative;
        }
        .click-btn.pumpkin-btn::before { content: 'üéÉ'; font-size: 5rem; text-shadow: 0 8px 35px rgba(255, 140, 0, 0.9); animation: pumpkin-flicker 0.3s ease-in-out infinite; }
        .click-btn.pumpkin-btn::after { content: 'üïØÔ∏è'; position: absolute; font-size: 1.2rem; top: -15px; left: 50%; transform: translateX(-50%); animation: candles-dance 0.5s ease-in-out infinite alternate; }
        @keyframes pumpkin-scary { 0%, 100% { transform: scale(1) rotate(-3deg); } 50% { transform: scale(1.12) rotate(3deg); } }
        @keyframes pumpkin-flicker { 0%, 100% { filter: brightness(1); } 50% { filter: brightness(1.5) drop-shadow(0 0 40px orange); } }
        @keyframes candles-dance { from { transform: translateX(-50%) scaleY(1); } to { transform: translateX(-50%) scaleY(1.2); } }

        .click-btn.bee-btn {
            background: transparent;
            box-shadow: none;
            font-size: 0;
            padding: 10px 30px;
            line-height: 1;
            animation: bee-fly 0.08s ease-in-out infinite;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.6));
        }
        .click-btn.bee-btn::before { content: 'üêù'; font-size: 5rem; text-shadow: 0 8px 25px rgba(255, 215, 0, 0.8); }
        .click-btn.bee-btn::after { content: 'üçØ'; position: absolute; font-size: 1.3rem; bottom: -20px; left: 50%; transform: translateX(-50%); animation: flowers-sway 2s ease-in-out infinite; }
        @keyframes bee-fly { 0%, 100% { transform: translate(0, 0) rotate(-8deg); } 25% { transform: translate(4px, -4px) rotate(0deg); } 50% { transform: translate(0, -6px) rotate(8deg); } 75% { transform: translate(-4px, -4px) rotate(0deg); } }
        @keyframes flowers-sway { 0%, 100% { transform: translateX(-50%) rotate(-5deg); } 50% { transform: translateX(-50%) rotate(5deg); } }

        /* Button frame container */
        .button-frame-container {
            position: relative;
            display: inline-block;
        }

        .button-frame {
            position: absolute;
            top: -15px;
            left: -15px;
            right: -15px;
            bottom: -15px;
            pointer-events: none;
            border-radius: 20px;
            z-index: -1;
        }

        /* Flame Frame */
        .button-frame.flame-frame {
            border: 4px solid transparent;
            background: linear-gradient(#1a1a2e, #1a1a2e) padding-box,
                        linear-gradient(90deg, #ff4500, #ff8c00, #ff4500) border-box;
            animation: flame-frame-anim 0.5s ease-in-out infinite alternate;
            box-shadow: 0 0 20px rgba(255, 69, 0, 0.6), 0 0 40px rgba(255, 140, 0, 0.4);
        }
        .button-frame.flame-frame::before {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 25px;
            background: conic-gradient(from 0deg, transparent, #ff4500, #ff8c00, #ff4500, transparent);
            animation: flame-rotate 2s linear infinite;
            opacity: 0.6;
            z-index: -1;
        }
        @keyframes flame-frame-anim {
            from { box-shadow: 0 0 20px rgba(255, 69, 0, 0.6), 0 0 40px rgba(255, 140, 0, 0.4); }
            to { box-shadow: 0 0 30px rgba(255, 69, 0, 0.8), 0 0 60px rgba(255, 140, 0, 0.6); }
        }
        @keyframes flame-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Electric Frame */
        .button-frame.electric-frame {
            border: 3px solid #00ffff;
            box-shadow: 0 0 15px #00ffff, 0 0 30px #0080ff, inset 0 0 15px rgba(0, 255, 255, 0.2);
            animation: electric-frame-anim 0.1s infinite;
        }
        .button-frame.electric-frame::before,
        .button-frame.electric-frame::after {
            content: '';
            position: absolute;
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #00ffff, #0080ff, transparent);
            animation: electric-spark 0.3s infinite;
        }
        .button-frame.electric-frame::before { top: -25px; left: 30%; transform: rotate(-15deg); }
        .button-frame.electric-frame::after { bottom: -25px; right: 30%; transform: rotate(15deg); }
        @keyframes electric-frame-anim {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        @keyframes electric-spark {
            0%, 100% { opacity: 1; height: 20px; }
            50% { opacity: 0.5; height: 15px; }
        }

        /* Rainbow Frame */
        .button-frame.rainbow-frame {
            border: 4px solid transparent;
            background: linear-gradient(#1a1a2e, #1a1a2e) padding-box,
                        linear-gradient(90deg, #ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #8800ff, #ff0000) border-box;
            background-size: 100% 100%, 300% 100%;
            animation: rainbow-frame-shift 2s linear infinite;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3), 0 0 20px rgba(0, 255, 0, 0.3), 0 0 20px rgba(0, 0, 255, 0.3);
        }
        @keyframes rainbow-frame-shift {
            from { background-position: 0 0, 0% 50%; }
            to { background-position: 0 0, 300% 50%; }
        }

        /* Void Frame */
        .button-frame.void-frame {
            border: 4px solid #4d0099;
            background: radial-gradient(ellipse at center, rgba(75, 0, 130, 0.3), transparent);
            box-shadow: 0 0 30px rgba(75, 0, 130, 0.8), inset 0 0 30px rgba(138, 43, 226, 0.4);
            animation: void-frame-pulse 2s ease-in-out infinite;
        }
        .button-frame.void-frame::before {
            content: '';
            position: absolute;
            inset: -5px;
            border-radius: 25px;
            background: conic-gradient(from 0deg, transparent 0%, #4d0099 25%, transparent 50%, #8a2be2 75%, transparent 100%);
            animation: void-rotate 4s linear infinite reverse;
            opacity: 0.5;
            z-index: -1;
        }
        @keyframes void-frame-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        @keyframes void-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Gold Frame */
        .button-frame.gold-frame {
            border: 4px solid #ffd700;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), transparent, rgba(255, 215, 0, 0.1));
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), inset 0 0 10px rgba(255, 215, 0, 0.3);
            animation: gold-frame-shine 3s ease-in-out infinite;
        }
        .button-frame.gold-frame::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: gold-gleam 3s ease-in-out infinite;
        }
        @keyframes gold-frame-shine {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), inset 0 0 10px rgba(255, 215, 0, 0.3); }
            50% { box-shadow: 0 0 35px rgba(255, 215, 0, 0.9), inset 0 0 20px rgba(255, 215, 0, 0.5); }
        }
        @keyframes gold-gleam {
            0% { left: -100%; }
            50%, 100% { left: 200%; }
        }

        /* Frost Frame */
        .button-frame.frost-frame {
            border: 3px solid #87ceeb;
            background: linear-gradient(135deg, rgba(135, 206, 235, 0.2), rgba(224, 255, 255, 0.1), rgba(176, 224, 230, 0.2));
            box-shadow: 0 0 20px rgba(135, 206, 235, 0.5), 0 0 40px rgba(224, 255, 255, 0.3);
            animation: frost-frame-shimmer 2s ease-in-out infinite alternate;
        }
        .button-frame.frost-frame::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 18px;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255, 255, 255, 0.1) 10px,
                rgba(255, 255, 255, 0.1) 20px
            );
            animation: frost-crystals 4s linear infinite;
        }
        @keyframes frost-frame-shimmer {
            from { filter: brightness(1) hue-rotate(0deg); }
            to { filter: brightness(1.2) hue-rotate(15deg); }
        }
        @keyframes frost-crystals {
            from { background-position: 0 0; }
            to { background-position: 40px 40px; }
        }

        /* Neon Frame */
        .button-frame.neon-frame {
            border: 3px solid #ff00ff;
            box-shadow: 0 0 10px #ff00ff, 0 0 20px #00ffff, 0 0 30px #ff00ff, inset 0 0 10px rgba(255, 0, 255, 0.3);
            animation: neon-frame-cycle 3s linear infinite;
        }
        @keyframes neon-frame-cycle {
            0%, 100% {
                border-color: #ff00ff;
                box-shadow: 0 0 10px #ff00ff, 0 0 20px #00ffff, 0 0 30px #ff00ff;
            }
            33% {
                border-color: #00ffff;
                box-shadow: 0 0 10px #00ffff, 0 0 20px #00ff00, 0 0 30px #00ffff;
            }
            66% {
                border-color: #00ff00;
                box-shadow: 0 0 10px #00ff00, 0 0 20px #ff00ff, 0 0 30px #00ff00;
            }
        }

        /* Pulse Frame */
        .button-frame.pulse-frame {
            border: 4px solid #e74c3c;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.6);
            animation: pulse-frame-beat 0.8s ease-in-out infinite;
        }
        .button-frame.pulse-frame::before {
            content: '';
            position: absolute;
            inset: -10px;
            border: 2px solid rgba(231, 76, 60, 0.4);
            border-radius: 28px;
            animation: pulse-ring 0.8s ease-out infinite;
        }
        .button-frame.pulse-frame::after {
            content: '';
            position: absolute;
            inset: -20px;
            border: 1px solid rgba(231, 76, 60, 0.2);
            border-radius: 35px;
            animation: pulse-ring 0.8s ease-out infinite 0.2s;
        }
        @keyframes pulse-frame-beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }
        @keyframes pulse-ring {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.2); opacity: 0; }
        }

        /* Cursor trails */
        .cursor-trail {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            animation: trail-fade 0.5s ease-out forwards;
        }

        @keyframes trail-fade {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0); }
        }

        /* Trail shapes */
        .trail-sparkle {
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #fff 0%, #ffd700 50%, transparent 70%);
            border-radius: 50%;
            box-shadow: 0 0 6px #ffd700;
        }

        .trail-heart {
            width: 12px;
            height: 12px;
            background: #ff6b9d;
            transform: rotate(-45deg);
            box-shadow: 0 0 6px #ff6b9d;
        }
        .trail-heart::before,
        .trail-heart::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background: #ff6b9d;
            border-radius: 50%;
        }
        .trail-heart::before { top: -6px; left: 0; }
        .trail-heart::after { top: 0; left: 6px; }

        .trail-star {
            width: 10px;
            height: 10px;
            background: #ffd700;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            box-shadow: 0 0 6px #ffd700;
        }

        /* Click effects */
        .click-effect {
            position: fixed;
            pointer-events: none;
            z-index: 100;
            animation: click-burst 0.4s ease-out forwards;
        }

        @keyframes click-burst {
            from { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            to { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }

        /* Explosion effect */
        .explosion-particle {
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #ff6600 0%, #ff0000 50%, #ff4500 100%);
            border-radius: 50%;
            box-shadow: 0 0 10px #ff4500, 0 0 20px #ff0000;
        }

        /* Lightning effect */
        .lightning-bolt {
            width: 20px;
            height: 40px;
            background: linear-gradient(180deg, #ffff00, #ff8800);
            clip-path: polygon(50% 0%, 100% 40%, 60% 40%, 80% 100%, 20% 55%, 50% 55%, 30% 30%);
            box-shadow: 0 0 15px #ffff00, 0 0 30px #ff8800;
        }

        /* Draggable cosmetic styles */
        .cosmetic-item.dragging {
            opacity: 0.5;
        }

        .cosmetic-drag-preview {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
            padding: 8px 12px;
            background: linear-gradient(135deg, #2a2a4a, #1a1a2e);
            border: 2px solid #ffd700;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
            font-size: 0.8rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .drop-zone {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            border: 3px dashed rgba(255, 215, 0, 0.5);
            border-radius: 20px;
            display: none;
            align-items: center;
            justify-content: center;
            color: rgba(255, 215, 0, 0.7);
            font-size: 1rem;
            text-align: center;
            background: rgba(26, 26, 46, 0.8);
            z-index: 50;
        }

        .drop-zone.active {
            display: flex;
            animation: pulse-border 1s ease-in-out infinite alternate;
        }

        @keyframes pulse-border {
            from { border-color: rgba(255, 215, 0, 0.3); }
            to { border-color: rgba(255, 215, 0, 0.8); }
        }

        /* Settings Button & Panel */
        .settings-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #2a2a4a, #1a1a2e);
            border: 1px solid #444;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 400;
        }

        .settings-btn:hover {
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            transform: rotate(45deg);
        }

        .settings-btn svg {
            width: 24px;
            height: 24px;
            fill: #aaa;
            transition: fill 0.3s;
        }

        .settings-btn:hover svg {
            fill: #ffd700;
        }

        /* Help Button */
        .help-btn {
            position: fixed;
            top: 20px;
            right: 75px;
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #2a2a4a, #1a1a2e);
            border: 1px solid #444;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 400;
            font-size: 1.5rem;
            color: #aaa;
            font-weight: bold;
        }

        .help-btn:hover {
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            color: #ffd700;
        }

        /* Help Modal */
        .help-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 600;
            display: none;
        }

        .help-overlay.active {
            display: block;
        }

        .help-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #2a2a4a, #1a1a2e);
            border: 2px solid #ffd700;
            border-radius: 20px;
            padding: 30px;
            color: white;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 601;
            display: none;
            animation: help-appear 0.3s ease-out;
        }

        .help-modal.active {
            display: block;
        }

        @keyframes help-appear {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .help-modal h2 {
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5rem;
        }

        .help-section {
            margin-bottom: 20px;
        }

        .help-section h3 {
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .help-section p {
            color: #ccc;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .help-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #aaa;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s;
        }

        .help-close:hover {
            color: #ffd700;
        }

        .settings-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, #2a2a4a, #1a1a2e);
            border: 1px solid #444;
            border-radius: 15px;
            padding: 20px;
            color: white;
            width: 250px;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
            z-index: 400;
            display: none;
            animation: settings-appear 0.3s ease-out;
        }

        .settings-panel::-webkit-scrollbar {
            width: 8px;
        }

        .settings-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .settings-panel::-webkit-scrollbar-thumb {
            background: rgba(255, 215, 0, 0.5);
            border-radius: 4px;
        }

        .settings-panel::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 215, 0, 0.7);
        }

        .settings-panel.open {
            display: block;
        }

        @keyframes settings-appear {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .settings-title {
            font-size: 1rem;
            color: #ffd700;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
        }

        .settings-section {
            margin-bottom: 20px;
        }

        .settings-label {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 10px;
            display: block;
        }

        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .color-option {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.active {
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .music-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .music-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid transparent;
            transition: all 0.2s;
        }

        .music-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .music-option.active {
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .music-option .music-name {
            flex: 1;
            font-size: 0.85rem;
        }

        .music-option .music-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .volume-control label {
            font-size: 0.75rem;
            color: #888;
        }

        .volume-slider {
            flex: 1;
            -webkit-appearance: none;
            height: 4px;
            border-radius: 2px;
            background: #444;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #ffd700;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .volume-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        /* Dimension System */
        .dimension-indicator {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(42, 42, 74, 0.9), rgba(26, 26, 46, 0.9));
            border: 2px solid #ffd700;
            border-radius: 25px;
            padding: 8px 20px;
            color: white;
            font-size: 0.9rem;
            z-index: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            transition: all 0.5s ease;
        }

        .dimension-icon {
            font-size: 1.2rem;
        }

        .dimension-name {
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .dimension-progress {
            width: 100px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .dimension-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffaa00);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        /* Dimension transition overlay */
        .dimension-transition {
            position: fixed;
            inset: 0;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
        }

        .dimension-transition.active {
            animation: dimension-shift 2s ease-in-out forwards;
        }

        @keyframes dimension-shift {
            0% { opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }

        .dimension-transition-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            color: white;
            text-shadow: 0 0 30px currentColor;
            animation: dimension-text-appear 2s ease-in-out;
        }

        @keyframes dimension-text-appear {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            30% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            70% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
        }

        /* Dimension-specific body themes */
        body.dimension-origin { background: #1a1a2e; }
        body.dimension-ember { background: linear-gradient(135deg, #1a0a0a, #2d1414, #1a0a0a); }
        body.dimension-ocean { background: linear-gradient(135deg, #0a1a2a, #0d2840, #0a1a2a); }
        body.dimension-nature { background: linear-gradient(135deg, #0a1a0a, #143d14, #0a1a0a); }
        body.dimension-void { background: linear-gradient(135deg, #0d0015, #1a0033, #0d0015); }
        body.dimension-celestial { background: linear-gradient(135deg, #0f0f2e, #1a1a4e, #2d1b69); }
        body.dimension-chaos { background: linear-gradient(135deg, #1a0a1a, #2d142d, #1a0a1a); }
        body.dimension-crystal { background: linear-gradient(135deg, #1a2a3a, #2a4a5a, #1a2a3a); }
        body.dimension-storm { background: linear-gradient(135deg, #1a1a3a, #2a2a5a, #1a1a3a); }
        body.dimension-desert { background: linear-gradient(135deg, #3a2a1a, #5a4a2a, #3a2a1a); }
        body.dimension-nether { background: linear-gradient(135deg, #2a0a0a, #4a1a1a, #2a0a0a); }
        body.dimension-arctic { background: linear-gradient(135deg, #1a2a3a, #2a4a5a, #3a5a6a); }
        body.dimension-cyber { background: linear-gradient(135deg, #0a1a0a, #0a2a0a, #0a1a0a); }
        body.dimension-dream { background: linear-gradient(135deg, #2a1a3a, #3a2a4a, #2a1a3a); }
        body.dimension-ancient { background: linear-gradient(135deg, #2a1a0a, #4a3a1a, #2a1a0a); }
        body.dimension-toxic { background: linear-gradient(135deg, #1a2a0a, #2a4a1a, #1a2a0a); }
        body.dimension-candy { background: linear-gradient(135deg, #3a1a2a, #4a2a3a, #3a1a2a); }
        body.dimension-shadow { background: linear-gradient(135deg, #0a0a0a, #1a1a1a, #0a0a0a); }
        body.dimension-quantum { background: linear-gradient(135deg, #0a2a3a, #1a3a4a, #0a2a3a); }
        body.dimension-omega { background: radial-gradient(circle, #2a1a3a, #1a0a2a, #0a0a1a); }

        /* Dimension ambient particles */
        .dimension-particle {
            position: fixed;
            pointer-events: none;
            border-radius: 50%;
            opacity: 0.6;
            z-index: 1;
        }

        /* Ember dimension particles */
        body.dimension-ember .dimension-particle {
            background: radial-gradient(circle, #ff4500, #ff8c00);
            box-shadow: 0 0 10px #ff4500;
            animation: ember-float 3s ease-in-out infinite;
        }

        @keyframes ember-float {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.6; }
            50% { transform: translateY(-30px) scale(0.8); opacity: 0.3; }
        }

        /* Ocean dimension particles */
        body.dimension-ocean .dimension-particle {
            background: radial-gradient(circle, #00bfff, #1e90ff);
            box-shadow: 0 0 10px #00bfff;
            animation: bubble-rise 4s ease-in-out infinite;
        }

        @keyframes bubble-rise {
            0% { transform: translateY(100vh) scale(1); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-20px) scale(0.5); opacity: 0; }
        }

        /* Nature dimension particles */
        body.dimension-nature .dimension-particle {
            background: radial-gradient(circle, #32cd32, #228b22);
            box-shadow: 0 0 8px #32cd32;
            animation: leaf-fall 5s ease-in-out infinite;
        }

        @keyframes leaf-fall {
            0% { transform: translateY(-20px) translateX(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(100vh) translateX(50px) rotate(360deg); opacity: 0; }
        }

        /* Void dimension particles */
        body.dimension-void .dimension-particle {
            background: radial-gradient(circle, #8a2be2, #4b0082);
            box-shadow: 0 0 15px #8a2be2;
            animation: void-drift 4s ease-in-out infinite;
        }

        @keyframes void-drift {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.4; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 0.7; }
        }

        /* Celestial dimension particles */
        body.dimension-celestial .dimension-particle {
            background: radial-gradient(circle, #fff, #ffd700);
            box-shadow: 0 0 10px #ffd700;
            animation: star-twinkle 2s ease-in-out infinite;
        }

        @keyframes star-twinkle {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.5); opacity: 1; }
        }

        /* Chaos dimension particles */
        body.dimension-chaos .dimension-particle {
            background: radial-gradient(circle, #ff00ff, #ff4444, #ffff00);
            box-shadow: 0 0 12px #ff00ff;
            animation: chaos-dance 1.5s ease-in-out infinite;
        }

        @keyframes chaos-dance {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(10px, -10px) rotate(90deg); }
            50% { transform: translate(-5px, 5px) rotate(180deg); }
            75% { transform: translate(-10px, -5px) rotate(270deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }

        /* Crystal dimension particles */
        body.dimension-crystal .dimension-particle {
            background: linear-gradient(45deg, #e0ffff, #87ceeb, #b0e0e6);
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            box-shadow: 0 0 10px #87ceeb;
            animation: crystal-spin 3s linear infinite;
        }
        body.dimension-storm .dimension-particle {
            background: radial-gradient(circle, #4169e1, #1e90ff);
            box-shadow: 0 0 15px #4169e1;
            animation: storm-flash 0.5s ease-in-out infinite;
        }
        body.dimension-desert .dimension-particle {
            background: radial-gradient(circle, #daa520, #cd853f);
            box-shadow: 0 0 5px #daa520;
            animation: sand-drift 4s ease-in-out infinite;
        }
        body.dimension-nether .dimension-particle {
            background: radial-gradient(circle, #ff4500, #8b0000);
            box-shadow: 0 0 12px #ff4500;
            animation: nether-float 2s ease-in-out infinite;
        }
        body.dimension-arctic .dimension-particle {
            background: radial-gradient(circle, #fff, #e0ffff);
            box-shadow: 0 0 8px #e0ffff;
            animation: snow-fall 5s linear infinite;
        }
        body.dimension-cyber .dimension-particle {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            animation: data-stream 1s steps(5) infinite;
        }
        body.dimension-dream .dimension-particle {
            background: radial-gradient(circle, #dda0dd, #da70d6);
            box-shadow: 0 0 15px #dda0dd;
            animation: dream-float 4s ease-in-out infinite;
        }
        body.dimension-ancient .dimension-particle {
            background: linear-gradient(45deg, #d2691e, #b8860b);
            box-shadow: 0 0 8px #d2691e;
            animation: relic-glow 3s ease-in-out infinite;
        }
        body.dimension-toxic .dimension-particle {
            background: radial-gradient(circle, #7fff00, #32cd32);
            box-shadow: 0 0 12px #7fff00;
            animation: toxic-bubble 2s ease-in-out infinite;
        }
        body.dimension-candy .dimension-particle {
            background: radial-gradient(circle, #ff69b4, #ff1493);
            box-shadow: 0 0 10px #ff69b4;
            animation: candy-bounce 1.5s ease-in-out infinite;
        }
        body.dimension-shadow .dimension-particle {
            background: radial-gradient(circle, #2f2f2f, #000);
            box-shadow: 0 0 20px #000;
            animation: shadow-pulse 2s ease-in-out infinite;
        }
        body.dimension-quantum .dimension-particle {
            background: radial-gradient(circle, #00ced1, #20b2aa);
            box-shadow: 0 0 12px #00ced1;
            animation: quantum-blink 0.3s steps(2) infinite;
        }
        body.dimension-omega .dimension-particle {
            background: conic-gradient(#ffd700, #ff4500, #8a2be2, #ffd700);
            box-shadow: 0 0 20px #ffd700;
            animation: omega-spin 2s linear infinite;
        }

        @keyframes storm-flash { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }
        @keyframes sand-drift { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(30px); } }
        @keyframes nether-float { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-20px) scale(1.2); } }
        @keyframes snow-fall { 0% { transform: translateY(-20px); opacity: 0; } 10% { opacity: 0.8; } 100% { transform: translateY(100vh); opacity: 0; } }
        @keyframes data-stream { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        @keyframes dream-float { 0%, 100% { transform: translateY(0) scale(1); opacity: 0.5; } 50% { transform: translateY(-15px) scale(1.1); opacity: 0.8; } }
        @keyframes relic-glow { 0%, 100% { filter: brightness(1); } 50% { filter: brightness(1.5); } }
        @keyframes toxic-bubble { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }
        @keyframes candy-bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes shadow-pulse { 0%, 100% { transform: scale(1); opacity: 0.3; } 50% { transform: scale(1.5); opacity: 0.6; } }
        @keyframes quantum-blink { 0% { opacity: 1; transform: scale(1); } 50% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }
        @keyframes omega-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        @keyframes crystal-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Dimension unlock popup */
        .dimension-unlock-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 3px solid;
            border-radius: 20px;
            padding: 40px 50px;
            color: white;
            z-index: 1001;
            text-align: center;
            animation: dimension-popup-appear 0.5s ease-out forwards;
        }

        @keyframes dimension-popup-appear {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-10deg); }
            50% { transform: translate(-50%, -50%) scale(1.1) rotate(5deg); }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
        }

        .dimension-unlock-popup.closing {
            animation: dimension-popup-close 0.3s ease-in forwards;
        }

        @keyframes dimension-popup-close {
            to { transform: translate(-50%, -50%) scale(0); opacity: 0; }
        }

        .dimension-unlock-label {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 15px;
        }

        .dimension-unlock-icon {
            font-size: 4rem;
            margin: 15px 0;
            animation: bounce 0.5s ease infinite alternate;
        }

        .dimension-unlock-title {
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 0 0 20px currentColor;
            margin-bottom: 10px;
        }

        .dimension-unlock-desc {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 20px;
        }

        .dimension-rewards {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }

        .dimension-reward-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .dimension-enter-btn {
            margin-top: 20px;
            background: linear-gradient(90deg, #ffd700, #ffaa00);
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            color: #1a1a2e;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .dimension-enter-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 25px rgba(255, 215, 0, 0.5);
        }

        /* Dimension-exclusive cosmetic badge */
        .cosmetic-item .dimension-badge {
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 8px;
            margin-left: 5px;
            text-transform: uppercase;
            font-weight: bold;
        }

        /* Token Display */
        .token-display {
            position: fixed;
            top: 20px;
            right: 135px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            color: #ffd700;
            border: 2px solid #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            z-index: 1000;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .token-display:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.5);
        }
        .token-icon { font-size: 1.5rem; animation: token-spin 3s linear infinite; }
        @keyframes token-spin { from { transform: rotateY(0deg); } to { transform: rotateY(360deg); } }

        /* Lucky Chest Popup */
        .chest-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #1a1a2e, #2a2a4e);
            border: 3px solid #ffd700;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            z-index: 10000;
            animation: chest-appear 0.5s ease forwards;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
            min-width: 300px;
        }
        @keyframes chest-appear { from { transform: translate(-50%, -50%) scale(0) rotate(-10deg); } to { transform: translate(-50%, -50%) scale(1) rotate(0deg); } }
        .chest-icon { font-size: 5rem; margin-bottom: 15px; animation: chest-shake 0.5s ease-in-out; }
        @keyframes chest-shake { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(-10deg); } 75% { transform: rotate(10deg); } }
        .chest-title { font-size: 1.8rem; color: #ffd700; margin-bottom: 10px; text-shadow: 0 0 10px #ffd700; }
        .chest-reward { font-size: 2.5rem; color: #fff; margin: 20px 0; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .chest-reward .token-icon { font-size: 2rem; }
        .chest-claim-btn {
            background: linear-gradient(90deg, #ffd700, #ffaa00);
            border: none;
            padding: 12px 35px;
            font-size: 1.1rem;
            font-weight: bold;
            color: #1a1a2e;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .chest-claim-btn:hover { transform: scale(1.1); box-shadow: 0 5px 25px rgba(255, 215, 0, 0.6); }

        /* Gacha Machine */
        .egg-machine-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            border: 3px solid #ffd700;
            border-radius: 15px;
            padding: 10px 20px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 400;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 15px rgba(255, 107, 157, 0.4);
        }
        .egg-machine-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(255, 107, 157, 0.6);
        }
        .egg-machine-btn .egg-icon {
            font-size: 1.5rem;
            animation: egg-wobble 1s ease-in-out infinite;
        }
        @keyframes egg-wobble {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        .egg-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); z-index: 9999; display: none; }
        .egg-overlay.active { display: block; }

        .egg-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #2a1a3e, #1a1a2e);
            border: 3px solid #ff6b9d;
            border-radius: 25px;
            padding: 30px;
            z-index: 10000;
            max-width: 400px;
            width: 90%;
            text-align: center;
            display: none;
        }
        .egg-modal.active { display: block; animation: egg-modal-open 0.4s ease forwards; }
        @keyframes egg-modal-open { from { transform: translate(-50%, -50%) scale(0) rotate(-10deg); } to { transform: translate(-50%, -50%) scale(1) rotate(0deg); } }

        .egg-modal-title {
            font-size: 1.8rem;
            color: #ff6b9d;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 107, 157, 0.5);
        }
        .egg-modal-subtitle {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        .egg-display {
            font-size: 6rem;
            margin: 20px 0;
            animation: egg-float 2s ease-in-out infinite;
        }
        @keyframes egg-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .egg-display.cracking {
            animation: egg-crack 0.5s ease-in-out;
        }
        @keyframes egg-crack {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-10deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            75% { transform: scale(1.1) rotate(-5deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        .egg-cost {
            color: #ffd700;
            font-size: 1.2rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .egg-roll-btn {
            background: linear-gradient(135deg, #ffd700, #ffaa00);
            color: #1a1a2e;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }
        .egg-roll-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.6);
        }
        .egg-roll-btn:disabled {
            background: #666;
            cursor: not-allowed;
            box-shadow: none;
        }
        .egg-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #aaa;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        .egg-close:hover { color: #ff6b9d; }

        .egg-result {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 2px solid;
        }
        .egg-result.active { display: block; animation: result-pop 0.5s ease; }
        @keyframes result-pop { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .egg-result.common { border-color: #888; }
        .egg-result.uncommon { border-color: #4ade80; }
        .egg-result.rare { border-color: #60a5fa; }
        .egg-result.epic { border-color: #c084fc; }
        .egg-result.legendary { border-color: #ffd700; box-shadow: 0 0 20px rgba(255, 215, 0, 0.4); }
        .egg-result-title {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 5px;
        }
        .egg-result-name {
            font-size: 1.4rem;
            color: white;
            font-weight: bold;
        }
        .egg-result-rarity {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 5px;
        }
        .egg-result-rarity.common { color: #888; }
        .egg-result-rarity.uncommon { color: #4ade80; }
        .egg-result-rarity.rare { color: #60a5fa; }
        .egg-result-rarity.epic { color: #c084fc; }
        .egg-result-rarity.legendary { color: #ffd700; }
        .egg-result-duplicate {
            color: #ffd700;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* Token Shop */
        .shop-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); z-index: 9999; display: none; }
        .shop-overlay.active { display: block; }
        .shop-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #1a1a2e, #2a2a4e);
            border: 3px solid #ffd700;
            border-radius: 20px;
            padding: 25px;
            z-index: 10000;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            display: none;
        }
        .shop-panel.active { display: block; animation: shop-open 0.3s ease forwards; }
        @keyframes shop-open { from { transform: translate(-50%, -50%) scale(0); } to { transform: translate(-50%, -50%) scale(1); } }
        .shop-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid rgba(255, 215, 0, 0.3); }
        .shop-title { font-size: 1.8rem; color: #ffd700; display: flex; align-items: center; gap: 10px; }
        .shop-close { background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; padding: 5px 10px; border-radius: 5px; transition: background 0.2s; }
        .shop-close:hover { background: rgba(255, 255, 255, 0.1); }
        .shop-balance { color: #ffd700; font-size: 1.2rem; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }
        .shop-items { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .shop-item {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            transition: transform 0.2s, border-color 0.2s;
            cursor: pointer;
        }
        .shop-item:hover { transform: translateY(-3px); border-color: rgba(255, 215, 0, 0.5); }
        .shop-item.owned { opacity: 0.5; cursor: not-allowed; }
        .shop-item.owned::after { content: 'OWNED'; display: block; color: #4caf50; font-size: 0.8rem; margin-top: 5px; }
        .shop-item-icon { width: 50px; height: 50px; border-radius: 10px; margin: 0 auto 10px; }
        .shop-item-name { color: #fff; font-size: 0.9rem; margin-bottom: 5px; }
        .shop-item-rarity { font-size: 0.7rem; padding: 2px 8px; border-radius: 10px; margin-bottom: 8px; display: inline-block; }
        .shop-item-rarity.uncommon { background: #4caf50; color: #fff; }
        .shop-item-rarity.rare { background: #2196f3; color: #fff; }
        .shop-item-rarity.epic { background: #9c27b0; color: #fff; }
        .shop-item-rarity.legendary { background: linear-gradient(90deg, #ff9800, #f44336); color: #fff; }
        .shop-item-price { color: #ffd700; font-size: 1rem; display: flex; align-items: center; justify-content: center; gap: 5px; }
        .shop-item-price .coin { font-size: 0.9rem; }

        /* Screen Frame */
        .screen-frame {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 9998;
            border: 8px solid transparent;
            box-sizing: border-box;
        }
        .screen-frame.flame-frame {
            border-color: #ff4500;
            box-shadow: inset 0 0 30px rgba(255, 69, 0, 0.5), inset 0 0 60px rgba(255, 140, 0, 0.3);
            animation: screen-flame 0.5s ease-in-out infinite alternate;
        }
        .screen-frame.flame-frame::before {
            content: '';
            position: absolute;
            inset: -8px;
            background: conic-gradient(from 0deg, transparent, #ff4500, #ff8c00, #ff4500, transparent);
            animation: screen-flame-rotate 3s linear infinite;
            opacity: 0.4;
            z-index: -1;
        }
        @keyframes screen-flame { from { box-shadow: inset 0 0 30px rgba(255, 69, 0, 0.5); } to { box-shadow: inset 0 0 50px rgba(255, 69, 0, 0.7); } }
        @keyframes screen-flame-rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .screen-frame.electric-frame {
            border-color: #00ffff;
            box-shadow: inset 0 0 30px rgba(0, 255, 255, 0.5), inset 0 0 60px rgba(0, 128, 255, 0.3);
            animation: screen-electric 0.1s infinite;
        }
        @keyframes screen-electric { 0%, 100% { opacity: 1; border-color: #00ffff; } 50% { opacity: 0.8; border-color: #0080ff; } }
        .screen-frame.rainbow-frame {
            border-image: linear-gradient(90deg, #ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #8800ff, #ff0000) 1;
            box-shadow: inset 0 0 40px rgba(255, 0, 0, 0.2), inset 0 0 40px rgba(0, 255, 0, 0.2), inset 0 0 40px rgba(0, 0, 255, 0.2);
            animation: screen-rainbow 3s linear infinite;
        }
        @keyframes screen-rainbow { from { filter: hue-rotate(0deg); } to { filter: hue-rotate(360deg); } }
        .screen-frame.void-frame {
            border-color: #4d0099;
            box-shadow: inset 0 0 50px rgba(75, 0, 130, 0.6), inset 0 0 100px rgba(138, 43, 226, 0.3);
            animation: screen-void 2s ease-in-out infinite;
        }
        @keyframes screen-void { 0%, 100% { box-shadow: inset 0 0 50px rgba(75, 0, 130, 0.6); } 50% { box-shadow: inset 0 0 80px rgba(75, 0, 130, 0.8); } }
        .screen-frame.gold-frame {
            border-color: #ffd700;
            box-shadow: inset 0 0 40px rgba(255, 215, 0, 0.4), inset 0 0 80px rgba(255, 170, 0, 0.2);
            animation: screen-gold 3s ease-in-out infinite;
        }
        @keyframes screen-gold { 0%, 100% { box-shadow: inset 0 0 40px rgba(255, 215, 0, 0.4); } 50% { box-shadow: inset 0 0 60px rgba(255, 215, 0, 0.6); } }
        .screen-frame.frost-frame {
            border-color: #87ceeb;
            box-shadow: inset 0 0 40px rgba(135, 206, 235, 0.4), inset 0 0 80px rgba(224, 255, 255, 0.2);
            animation: screen-frost 2s ease-in-out infinite alternate;
        }
        @keyframes screen-frost { from { filter: brightness(1); } to { filter: brightness(1.1) hue-rotate(15deg); } }
        .screen-frame.neon-frame {
            border-color: #ff00ff;
            box-shadow: inset 0 0 30px #ff00ff, inset 0 0 60px #00ffff;
            animation: screen-neon 3s linear infinite;
        }
        @keyframes screen-neon { 0%, 100% { border-color: #ff00ff; } 33% { border-color: #00ffff; } 66% { border-color: #00ff00; } }
        .screen-frame.pulse-frame {
            border-color: #e74c3c;
            box-shadow: inset 0 0 40px rgba(231, 76, 60, 0.5);
            animation: screen-pulse 0.8s ease-in-out infinite;
        }
        @keyframes screen-pulse { 0%, 100% { box-shadow: inset 0 0 40px rgba(231, 76, 60, 0.5); } 50% { box-shadow: inset 0 0 70px rgba(231, 76, 60, 0.8); } }
    </style>
</head>
<body class="dimension-origin">
    <!-- Screen Frame -->
    <div class="screen-frame" id="screenFrame"></div>

    <!-- Token Display -->
    <div class="token-display" id="tokenDisplay" title="Click to open shop">
        <span class="token-icon">ü™ô</span>
        <span id="tokenCount">0</span>
    </div>

    <!-- Gacha Machine Button -->
    <button class="egg-machine-btn" id="eggMachineBtn" title="Gacha Machine">
        <span class="egg-icon">üîÆ</span>
        <span>Gacha</span>
    </button>

    <!-- Gacha Machine Modal -->
    <div class="egg-overlay" id="eggOverlay"></div>
    <div class="egg-modal" id="eggModal">
        <button class="egg-close" id="eggClose">&times;</button>
        <div class="egg-modal-title">üé∞ Gacha Machine</div>
        <div class="egg-modal-subtitle">Pop a capsule for a random cosmetic!</div>
        <div class="egg-display" id="eggDisplay">üîÆ</div>
        <div class="egg-cost">
            <span class="token-icon">ü™ô</span>
            <span>100 Tokens per roll</span>
        </div>
        <button class="egg-roll-btn" id="eggRollBtn">Roll!</button>
        <div class="egg-result" id="eggResult">
            <div class="egg-result-title">You got:</div>
            <div class="egg-result-name" id="eggResultName"></div>
            <div class="egg-result-rarity" id="eggResultRarity"></div>
            <div class="egg-result-duplicate" id="eggResultDuplicate"></div>
        </div>
    </div>

    <!-- Shop Overlay -->
    <div class="shop-overlay" id="shopOverlay"></div>

    <!-- Token Shop Panel -->
    <div class="shop-panel" id="shopPanel">
        <div class="shop-header">
            <div class="shop-title">üè™ Token Shop</div>
            <button class="shop-close" id="shopClose">‚úï</button>
        </div>
        <div class="shop-balance">
            <span class="token-icon">ü™ô</span>
            <span id="shopTokenCount">0</span> Tokens
        </div>
        <div class="shop-items" id="shopItems"></div>
    </div>

    <!-- Dimension Indicator -->
    <div class="dimension-indicator" id="dimensionIndicator">
        <span class="dimension-icon" id="dimensionIcon">üåç</span>
        <span class="dimension-name" id="dimensionName">Origin</span>
        <div class="dimension-progress">
            <div class="dimension-progress-bar" id="dimensionProgress" style="width: 0%"></div>
        </div>
    </div>

    <!-- Dimension Transition Overlay -->
    <div class="dimension-transition" id="dimensionTransition"></div>

    <div class="cosmetics-panel" id="cosmeticsPanel">
        <div class="cosmetics-title">Cosmetics</div>
        <div id="cosmeticsList"></div>
    </div>

    <div class="drop-zone" id="dropZone">Drop cosmetic here to equip</div>

    <!-- Help Button -->
    <button class="help-btn" id="helpBtn" title="Help">?</button>

    <!-- Help Modal -->
    <div class="help-overlay" id="helpOverlay"></div>
    <div class="help-modal" id="helpModal">
        <button class="help-close" id="helpClose">&times;</button>
        <h2>How to Play</h2>

        <div class="help-section">
            <h3>üéÆ The Basics</h3>
            <p>Click the button to increase your click count! Every click matters and helps you unlock achievements and discover new dimensions.</p>
        </div>

        <div class="help-section">
            <h3>ü™ô Tokens</h3>
            <p>Tokens are the in-game currency. You earn tokens by opening lucky chests that randomly appear as you click, and by unlocking achievements. Use tokens to purchase cosmetics in the shop!</p>
        </div>

        <div class="help-section">
            <h3>üõí The Shop</h3>
            <p>Click on your token count (top-left) to open the shop. Here you can spend tokens on button skins, frames, click effects, and trails. Prices vary by rarity: Common (10), Uncommon (25), Rare (50), Epic (100), Legendary (200).</p>
        </div>

        <div class="help-section">
            <h3>üéÅ Lucky Chests</h3>
            <p>As you click, lucky chests may randomly appear! Open them to receive tokens or even rare cosmetics. Keep clicking to increase your chances!</p>
        </div>

        <div class="help-section">
            <h3>üåå Dimensions</h3>
            <p>Unlock new dimensions by reaching click milestones. Each dimension has a unique theme and exclusive cosmetics that can drop while you're exploring it!</p>
        </div>

        <div class="help-section">
            <h3>üèÜ Achievements</h3>
            <p>Complete achievements by reaching click milestones, clicking fast, or discovering special numbers. Achievements grant tokens and show off your dedication!</p>
        </div>
    </div>

    <!-- Settings Button -->
    <button class="settings-btn" id="settingsBtn" title="Settings">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
        </svg>
    </button>

    <!-- Settings Panel -->
    <div class="settings-panel" id="settingsPanel">
        <div class="settings-title">Settings</div>

        <div class="settings-section">
            <span class="settings-label">Background Color</span>
            <div class="color-options" id="colorOptions"></div>
        </div>

        <div class="settings-section">
            <span class="settings-label">Music</span>
            <div class="music-controls" id="musicControls"></div>
            <div class="volume-control">
                <label>Vol</label>
                <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
            </div>
        </div>
    </div>

    <div class="high-score">High Score: <span id="highScore">0</span></div>
    <div class="multiplier-indicator" id="multiplierIndicator">üî• 2x MULTIPLIER! üî•</div>
    <h1>Click Itüëå</h1>
    <div class="button-frame-container" id="frameContainer">
        <div class="button-frame" id="buttonFrame"></div>
        <button class="click-btn" id="clickBtn">Click here</button>
    </div>
    <div class="counter">Clicks: <span id="count">0</span></div>

    <div class="achievements-list" id="achievementsList"></div>

    <script>
        let clickCount = 0;
        let tokens = 0;
        let highScore = parseInt(localStorage.getItem('clickItHighScore')) || 0;
        const btn = document.getElementById('clickBtn');
        const countDisplay = document.getElementById('count');
        const highScoreDisplay = document.getElementById('highScore');
        const achievementsList = document.getElementById('achievementsList');
        const cosmeticsList = document.getElementById('cosmeticsList');
        const tokenCountDisplay = document.getElementById('tokenCount');
        const shopTokenCount = document.getElementById('shopTokenCount');
        const screenFrame = document.getElementById('screenFrame');

        // Initialize high score display
        highScoreDisplay.textContent = highScore;

        // Lucky chest click thresholds (random intervals) - more common now
        let chestNumbers = new Set();
        function generateChestNumbers() {
            chestNumbers.clear();
            for (let i = 0; i < 100; i++) {
                chestNumbers.add(Math.floor(Math.random() * 10000) + 20);
            }
        }
        generateChestNumbers();

        // Dimension frame drop numbers (frames can drop while in dimensions)
        let dimensionFrameNumbers = new Set();
        function generateDimensionFrameNumbers() {
            dimensionFrameNumbers.clear();
            for (let i = 0; i < 40; i++) {
                dimensionFrameNumbers.add(Math.floor(Math.random() * 5000) + 50);
            }
        }
        generateDimensionFrameNumbers();

        // Shop prices by rarity
        const shopPrices = { common: 10, uncommon: 25, rare: 50, epic: 100, legendary: 200 };

        // Multiplier system
        let multiplierActive = false;
        let multiplierTimeout = null;
        const multiplierIndicator = document.getElementById('multiplierIndicator');

        function checkMultiplier() {
            const now = Date.now();
            const recentClicks = clickTimes.filter(t => now - t < 2000);

            if (recentClicks.length >= 10 && !multiplierActive) {
                activateMultiplier();
            }
        }

        function activateMultiplier() {
            multiplierActive = true;
            multiplierIndicator.classList.add('active');

            // Clear existing timeout
            if (multiplierTimeout) {
                clearTimeout(multiplierTimeout);
            }

            // Multiplier lasts for 3 seconds after activation
            multiplierTimeout = setTimeout(() => {
                deactivateMultiplier();
            }, 3000);
        }

        function deactivateMultiplier() {
            multiplierActive = false;
            multiplierIndicator.classList.remove('active');
        }

        function updateTokenDisplay() {
            tokenCountDisplay.textContent = tokens;
            shopTokenCount.textContent = tokens;
        }

        function triggerLuckyChest() {
            // Random token amount based on luck
            const baseAmount = Math.floor(Math.random() * 20) + 5;
            const bonusChance = Math.random();
            let amount = baseAmount;
            let chestType = 'Common';
            let chestIcon = 'üì¶';

            if (bonusChance > 0.95) {
                amount = baseAmount * 5;
                chestType = 'Legendary';
                chestIcon = 'üëë';
            } else if (bonusChance > 0.85) {
                amount = baseAmount * 3;
                chestType = 'Epic';
                chestIcon = 'üíé';
            } else if (bonusChance > 0.7) {
                amount = baseAmount * 2;
                chestType = 'Rare';
                chestIcon = 'üéÅ';
            }

            showChestPopup(amount, chestType, chestIcon);
        }

        function showChestPopup(amount, type, icon) {
            const popup = document.createElement('div');
            popup.className = 'chest-popup';
            popup.innerHTML = `
                <div class="chest-icon">${icon}</div>
                <div class="chest-title">${type} Chest!</div>
                <div class="chest-reward">
                    <span class="token-icon">ü™ô</span>
                    <span>+${amount}</span>
                </div>
                <button class="chest-claim-btn">Claim!</button>
            `;
            document.body.appendChild(popup);

            popup.querySelector('.chest-claim-btn').addEventListener('click', () => {
                tokens += amount;
                updateTokenDisplay();
                popup.style.animation = 'chest-appear 0.3s ease reverse forwards';
                setTimeout(() => popup.remove(), 300);
            });
        }

        // Shop functionality
        function openShop() {
            document.getElementById('shopOverlay').classList.add('active');
            document.getElementById('shopPanel').classList.add('active');
            renderShopItems();
        }

        function closeShop() {
            document.getElementById('shopOverlay').classList.remove('active');
            document.getElementById('shopPanel').classList.remove('active');
        }

        function renderShopItems() {
            const shopItems = document.getElementById('shopItems');
            shopItems.innerHTML = '';

            // Filter purchasable cosmetics (not dimension-exclusive)
            const purchasable = Object.entries(cosmetics).filter(([key, c]) => !c.dimension && key !== 'default');

            purchasable.forEach(([key, cosmetic]) => {
                const price = shopPrices[cosmetic.rarity] || 50;
                const owned = cosmetic.unlocked;

                const item = document.createElement('div');
                item.className = `shop-item${owned ? ' owned' : ''}`;
                item.innerHTML = `
                    <div class="shop-item-icon cosmetic-icon ${cosmetic.iconClass}"></div>
                    <div class="shop-item-name">${cosmetic.name}</div>
                    <div class="shop-item-rarity ${cosmetic.rarity}">${cosmetic.rarity}</div>
                    ${!owned ? `<div class="shop-item-price"><span class="coin">ü™ô</span>${price}</div>` : ''}
                `;

                if (!owned) {
                    item.addEventListener('click', () => purchaseCosmetic(key, price));
                }
                shopItems.appendChild(item);
            });
        }

        function purchaseCosmetic(key, price) {
            if (tokens >= price && !cosmetics[key].unlocked) {
                tokens -= price;
                cosmetics[key].unlocked = true;
                updateTokenDisplay();
                renderShopItems();
                renderCosmetics();

                // Show purchase success
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#4caf50;color:#fff;padding:20px 40px;border-radius:10px;font-size:1.2rem;z-index:10001;animation:chest-appear 0.3s ease;';
                notification.textContent = `Purchased ${cosmetics[key].name}!`;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 1500);
            } else if (tokens < price) {
                const notification = document.createElement('div');
                notification.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#f44336;color:#fff;padding:20px 40px;border-radius:10px;font-size:1.2rem;z-index:10001;animation:chest-appear 0.3s ease;';
                notification.textContent = 'Not enough tokens!';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 1500);
            }
        }

        // Screen frame management
        function applyScreenFrame(frameClass) {
            screenFrame.className = 'screen-frame';
            if (frameClass) {
                screenFrame.classList.add(frameClass);
            }
        }

        // Shop event listeners
        document.getElementById('tokenDisplay').addEventListener('click', openShop);
        document.getElementById('shopClose').addEventListener('click', closeShop);
        document.getElementById('shopOverlay').addEventListener('click', closeShop);

        // Egg Machine functionality
        const eggMachineBtn = document.getElementById('eggMachineBtn');
        const eggModal = document.getElementById('eggModal');
        const eggOverlay = document.getElementById('eggOverlay');
        const eggClose = document.getElementById('eggClose');
        const eggRollBtn = document.getElementById('eggRollBtn');
        const eggDisplay = document.getElementById('eggDisplay');
        const eggResult = document.getElementById('eggResult');
        const eggResultName = document.getElementById('eggResultName');
        const eggResultRarity = document.getElementById('eggResultRarity');
        const eggResultDuplicate = document.getElementById('eggResultDuplicate');
        const EGG_COST = 100;

        function openEggMachine() {
            eggModal.classList.add('active');
            eggOverlay.classList.add('active');
            eggResult.classList.remove('active');
            eggDisplay.textContent = 'üîÆ';
            eggDisplay.classList.remove('cracking');
            updateEggRollButton();
        }

        function closeEggMachine() {
            eggModal.classList.remove('active');
            eggOverlay.classList.remove('active');
        }

        function updateEggRollButton() {
            eggRollBtn.disabled = tokens < EGG_COST;
            eggRollBtn.textContent = tokens >= EGG_COST ? 'Roll!' : 'Not enough tokens';
        }

        function getRandomCosmetic() {
            // Get all cosmetics that can be obtained (excluding dimension-exclusive and default)
            const availableCosmetics = Object.entries(cosmetics).filter(([key, cosmetic]) => {
                return key !== 'default' && !cosmetic.dimension;
            });

            // Weighted random based on rarity (rarer items are less likely)
            const weights = {
                common: 30,
                uncommon: 25,
                rare: 20,
                epic: 15,
                legendary: 10
            };

            // Create weighted list
            const weightedList = [];
            availableCosmetics.forEach(([key, cosmetic]) => {
                const weight = weights[cosmetic.rarity] || 10;
                for (let i = 0; i < weight; i++) {
                    weightedList.push({ key, cosmetic });
                }
            });

            // Pick random item
            const randomIndex = Math.floor(Math.random() * weightedList.length);
            return weightedList[randomIndex];
        }

        function rollEgg() {
            if (tokens < EGG_COST) return;

            // Deduct tokens
            tokens -= EGG_COST;
            updateTokenDisplay();
            updateEggRollButton();

            // Hide previous result
            eggResult.classList.remove('active');

            // Crack animation
            eggDisplay.classList.add('cracking');

            // Roll after animation
            setTimeout(() => {
                const { key, cosmetic } = getRandomCosmetic();
                const wasAlreadyUnlocked = cosmetic.unlocked;

                // Show result
                eggDisplay.textContent = '‚ú®';

                // Remove rarity classes
                eggResult.classList.remove('common', 'uncommon', 'rare', 'epic', 'legendary');
                eggResultRarity.classList.remove('common', 'uncommon', 'rare', 'epic', 'legendary');

                // Add rarity class
                eggResult.classList.add(cosmetic.rarity);
                eggResultRarity.classList.add(cosmetic.rarity);

                // Set result text
                eggResultName.textContent = cosmetic.name;
                eggResultRarity.textContent = cosmetic.rarity;

                // Handle duplicate
                if (wasAlreadyUnlocked) {
                    // Give tokens back as compensation
                    const refund = shopPrices[cosmetic.rarity] || 25;
                    tokens += refund;
                    updateTokenDisplay();
                    eggResultDuplicate.textContent = `Already owned! +${refund} tokens refunded`;
                    eggResultDuplicate.style.display = 'block';
                } else {
                    // Unlock the cosmetic
                    cosmetic.unlocked = true;
                    eggResultDuplicate.style.display = 'none';
                    // Refresh the cosmetics panel
                    initCosmeticsPanel();
                }

                // Show result with animation
                setTimeout(() => {
                    eggResult.classList.add('active');
                    eggDisplay.classList.remove('cracking');
                    updateEggRollButton();
                }, 100);

            }, 500);
        }

        eggMachineBtn.addEventListener('click', openEggMachine);
        eggClose.addEventListener('click', closeEggMachine);
        eggOverlay.addEventListener('click', closeEggMachine);
        eggRollBtn.addEventListener('click', rollEgg);

        const romanNumerals = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X',
                               'XI', 'XII', 'XIII', 'XIV', 'XV', 'XVI', 'XVII', 'XVIII', 'XIX', 'XX',
                               'XXI', 'XXII', 'XXIII', 'XXIV', 'XXV', 'XXVI', 'XXVII', 'XXVIII', 'XXIX', 'XXX',
                               'XXXI', 'XXXII', 'XXXIII', 'XXXIV', 'XXXV', 'XXXVI', 'XXXVII', 'XXXVIII', 'XXXIX', 'XL',
                               'XLI', 'XLII', 'XLIII', 'XLIV', 'XLV', 'XLVI', 'XLVII', 'XLVIII', 'XLIX', 'L'];

        const achievements = {};
        const specialAchievements = {};
        const unlockedAchievements = new Set();

        // Dimension System
        let currentDimension = 0;
        const unlockedDimensions = new Set([0]);
        let dimensionParticles = [];

        const dimensions = [
            { id: 'origin', name: 'Origin', icon: 'üåç', color: '#ffd700', bgClass: 'dimension-origin', unlockAt: 0, desc: 'Where your journey begins...', cosmetics: [] },
            { id: 'ember', name: 'Ember Realm', icon: 'üî•', color: '#ff4500', bgClass: 'dimension-ember', unlockAt: 500, desc: 'A world consumed by eternal flames', cosmetics: ['ember_skin', 'magma_skin', 'ember_trail', 'flame_frame'] },
            { id: 'ocean', name: 'Ocean Depths', icon: 'üåä', color: '#00bfff', bgClass: 'dimension-ocean', unlockAt: 1000, desc: 'Mysteries lurk in the deep blue', cosmetics: ['tidal_skin', 'abyss_skin', 'bubble_deep_trail'] },
            { id: 'nature', name: 'Verdant Grove', icon: 'üåø', color: '#32cd32', bgClass: 'dimension-nature', unlockAt: 1500, desc: 'Life flourishes in harmony', cosmetics: ['forest_skin', 'bloom_skin', 'leaf_trail'] },
            { id: 'void', name: 'The Void', icon: 'üï≥Ô∏è', color: '#8a2be2', bgClass: 'dimension-void', unlockAt: 2000, desc: 'Embrace the darkness within', cosmetics: ['shadow_skin', 'rift_skin', 'void_trail', 'void_frame'] },
            { id: 'celestial', name: 'Celestial Plane', icon: '‚≠ê', color: '#ffd700', bgClass: 'dimension-celestial', unlockAt: 2500, desc: 'Walk among the stars', cosmetics: ['solar_skin', 'lunar_skin', 'stardust_trail', 'gold_frame'] },
            { id: 'chaos', name: 'Chaos Dimension', icon: 'üåÄ', color: '#ff00ff', bgClass: 'dimension-chaos', unlockAt: 3000, desc: 'Reality bends and breaks here', cosmetics: ['glitch_skin', 'corrupt_skin', 'chaos_trail', 'rainbow_frame'] },
            { id: 'crystal', name: 'Crystal Sanctuary', icon: 'üíé', color: '#87ceeb', bgClass: 'dimension-crystal', unlockAt: 3500, desc: 'A realm of pure crystalline beauty', cosmetics: ['prism_skin', 'frozen_skin', 'crystal_trail', 'frost_frame'] },
            { id: 'storm', name: 'Storm Nexus', icon: '‚õàÔ∏è', color: '#4169e1', bgClass: 'dimension-storm', unlockAt: 4000, desc: 'Thunder echoes eternally', cosmetics: ['thunder_skin', 'lightning_skin', 'storm_trail', 'electric_frame'] },
            { id: 'desert', name: 'Scorched Sands', icon: 'üèúÔ∏è', color: '#daa520', bgClass: 'dimension-desert', unlockAt: 4500, desc: 'Ancient secrets beneath the dunes', cosmetics: ['sand_skin', 'oasis_skin', 'dust_trail'] },
            { id: 'nether', name: 'Nether Depths', icon: 'üëπ', color: '#8b0000', bgClass: 'dimension-nether', unlockAt: 5000, desc: 'Where demons dwell', cosmetics: ['demon_skin', 'hellfire_skin', 'brimstone_trail', 'pulse_frame'] },
            { id: 'arctic', name: 'Frozen Wastes', icon: '‚ùÑÔ∏è', color: '#e0ffff', bgClass: 'dimension-arctic', unlockAt: 5500, desc: 'Eternal winter reigns', cosmetics: ['glacier_skin', 'aurora_skin', 'snowflake_trail'] },
            { id: 'cyber', name: 'Cyberspace', icon: 'ü§ñ', color: '#00ff00', bgClass: 'dimension-cyber', unlockAt: 6000, desc: 'Enter the digital realm', cosmetics: ['cyber_skin', 'hologram_skin', 'data_trail', 'neon_frame'] },
            { id: 'dream', name: 'Dreamscape', icon: 'üí≠', color: '#dda0dd', bgClass: 'dimension-dream', unlockAt: 6500, desc: 'Where imagination becomes reality', cosmetics: ['dream_skin', 'nightmare_skin', 'cloud_trail'] },
            { id: 'ancient', name: 'Ancient Ruins', icon: 'üèõÔ∏è', color: '#d2691e', bgClass: 'dimension-ancient', unlockAt: 7000, desc: 'Echoes of forgotten civilizations', cosmetics: ['relic_skin', 'pharaoh_skin', 'hieroglyph_trail'] },
            { id: 'toxic', name: 'Toxic Wasteland', icon: '‚ò¢Ô∏è', color: '#7fff00', bgClass: 'dimension-toxic', unlockAt: 7500, desc: 'Radiation mutates all', cosmetics: ['mutant_skin', 'radioactive_skin', 'acid_trail'] },
            { id: 'candy', name: 'Candy Kingdom', icon: 'üç≠', color: '#ff69b4', bgClass: 'dimension-candy', unlockAt: 8000, desc: 'A sugary sweet paradise', cosmetics: ['candy_dim_skin', 'chocolate_skin', 'sprinkle_trail'] },
            { id: 'shadow', name: 'Shadow Realm', icon: 'üåë', color: '#2f2f2f', bgClass: 'dimension-shadow', unlockAt: 8500, desc: 'Where light fears to tread', cosmetics: ['shade_skin', 'umbra_skin', 'darkness_trail'] },
            { id: 'quantum', name: 'Quantum Field', icon: '‚öõÔ∏è', color: '#00ced1', bgClass: 'dimension-quantum', unlockAt: 9000, desc: 'Exist in all states at once', cosmetics: ['quantum_skin', 'particle_skin', 'wave_trail'] },
            { id: 'omega', name: 'Omega Dimension', icon: 'üî±', color: '#ffd700', bgClass: 'dimension-omega', unlockAt: 10000, desc: 'The ultimate realm awaits', cosmetics: ['omega_skin', 'transcendent_skin', 'infinity_trail'] }
        ];

        // Cosmetics system
        const cosmetics = {
            // Button skins
            default: { name: 'Default', iconClass: 'icon-default', rarity: 'common', type: 'button', class: '', unlocked: true },
            rainbow: { name: 'Rainbow', iconClass: 'icon-rainbow', rarity: 'rare', type: 'button', class: 'rainbow', unlocked: false },
            neon: { name: 'Neon Glow', iconClass: 'icon-neon', rarity: 'epic', type: 'button', class: 'neon', unlocked: false },
            golden: { name: 'Golden', iconClass: 'icon-golden', rarity: 'legendary', type: 'button', class: 'golden', unlocked: false },
            galaxy: { name: 'Galaxy', iconClass: 'icon-galaxy', rarity: 'legendary', type: 'button', class: 'galaxy', unlocked: false },
            fire: { name: 'Inferno', iconClass: 'icon-fire', rarity: 'epic', type: 'button', class: 'fire', unlocked: false },
            ice: { name: 'Frost', iconClass: 'icon-ice', rarity: 'rare', type: 'button', class: 'ice', unlocked: false },
            toxic: { name: 'Toxic', iconClass: 'icon-toxic', rarity: 'epic', type: 'button', class: 'toxic', unlocked: false },
            void: { name: 'Void', iconClass: 'icon-void', rarity: 'legendary', type: 'button', class: 'void', unlocked: false },
            candy: { name: 'Candy', iconClass: 'icon-candy', rarity: 'uncommon', type: 'button', class: 'candy', unlocked: false },
            matrix: { name: 'Matrix', iconClass: 'icon-matrix', rarity: 'epic', type: 'button', class: 'matrix', unlocked: false },
            blood: { name: 'Bloodmoon', iconClass: 'icon-blood', rarity: 'rare', type: 'button', class: 'blood', unlocked: false },
            diamond: { name: 'Diamond', iconClass: 'icon-diamond', rarity: 'legendary', type: 'button', class: 'diamond', unlocked: false },
            // Fun themed skins
            cookie: { name: 'Cookie', iconClass: 'icon-cookie', rarity: 'uncommon', type: 'button', class: 'cookie-btn', unlocked: false },
            capybara: { name: 'Capybara', iconClass: 'icon-capybara', rarity: 'rare', type: 'button', class: 'capybara-btn', unlocked: false },
            fish: { name: 'Fish', iconClass: 'icon-fish', rarity: 'uncommon', type: 'button', class: 'fish-btn', unlocked: false },
            christmas: { name: 'Christmas Tree', iconClass: 'icon-christmas', rarity: 'epic', type: 'button', class: 'christmas-btn', unlocked: false },
            pizza: { name: 'Pizza', iconClass: 'icon-pizza', rarity: 'uncommon', type: 'button', class: 'pizza-btn', unlocked: false },
            cat: { name: 'Cat', iconClass: 'icon-cat', rarity: 'rare', type: 'button', class: 'cat-btn', unlocked: false },
            dog: { name: 'Dog', iconClass: 'icon-dog', rarity: 'rare', type: 'button', class: 'dog-btn', unlocked: false },
            unicorn: { name: 'Unicorn', iconClass: 'icon-unicorn', rarity: 'legendary', type: 'button', class: 'unicorn-btn', unlocked: false },
            penguin: { name: 'Penguin', iconClass: 'icon-penguin', rarity: 'rare', type: 'button', class: 'penguin-btn', unlocked: false },
            rocket: { name: 'Rocket', iconClass: 'icon-rocket', rarity: 'epic', type: 'button', class: 'rocket-btn', unlocked: false },
            snowman: { name: 'Snowman', iconClass: 'icon-snowman', rarity: 'rare', type: 'button', class: 'snowman-btn', unlocked: false },
            dragon: { name: 'Dragon', iconClass: 'icon-dragon', rarity: 'legendary', type: 'button', class: 'dragon-btn', unlocked: false },
            alien: { name: 'Alien', iconClass: 'icon-alien', rarity: 'epic', type: 'button', class: 'alien-btn', unlocked: false },
            ghost: { name: 'Ghost', iconClass: 'icon-ghost', rarity: 'rare', type: 'button', class: 'ghost-btn', unlocked: false },
            pumpkin: { name: 'Pumpkin', iconClass: 'icon-pumpkin', rarity: 'epic', type: 'button', class: 'pumpkin-btn', unlocked: false },
            bee: { name: 'Bee', iconClass: 'icon-bee', rarity: 'uncommon', type: 'button', class: 'bee-btn', unlocked: false },
            // Trails
            sparkle_trail: { name: 'Sparkle Trail', iconClass: 'icon-sparkle', rarity: 'uncommon', type: 'trail', effect: 'sparkle', unlocked: false },
            heart_trail: { name: 'Heart Trail', iconClass: 'icon-heart', rarity: 'rare', type: 'trail', effect: 'heart', unlocked: false },
            star_trail: { name: 'Star Trail', iconClass: 'icon-star', rarity: 'epic', type: 'trail', effect: 'star', unlocked: false },
            bubble_trail: { name: 'Bubble Trail', iconClass: 'icon-bubble', rarity: 'uncommon', type: 'trail', effect: 'bubble', unlocked: false },
            smoke_trail: { name: 'Smoke Trail', iconClass: 'icon-smoke', rarity: 'rare', type: 'trail', effect: 'smoke', unlocked: false },
            plasma_trail: { name: 'Plasma Trail', iconClass: 'icon-plasma', rarity: 'legendary', type: 'trail', effect: 'plasma', unlocked: false },
            // Click effects
            explosion_click: { name: 'Explosion Click', iconClass: 'icon-explosion', rarity: 'uncommon', type: 'click', effect: 'explosion', unlocked: false },
            confetti_click: { name: 'Confetti Click', iconClass: 'icon-confetti', rarity: 'rare', type: 'click', effect: 'confetti', unlocked: false },
            lightning_click: { name: 'Lightning Click', iconClass: 'icon-lightning', rarity: 'legendary', type: 'click', effect: 'lightning', unlocked: false },
            ripple_click: { name: 'Ripple Click', iconClass: 'icon-ripple', rarity: 'uncommon', type: 'click', effect: 'ripple', unlocked: false },
            shatter_click: { name: 'Shatter Click', iconClass: 'icon-diamond', rarity: 'epic', type: 'click', effect: 'shatter', unlocked: false },
            vortex_click: { name: 'Vortex Click', iconClass: 'icon-void', rarity: 'legendary', type: 'click', effect: 'vortex', unlocked: false },
            // Animated Frames
            flame_frame: { name: 'Flame Frame', iconClass: 'icon-flame-frame', rarity: 'rare', type: 'frame', frameClass: 'flame-frame', unlocked: false },
            electric_frame: { name: 'Electric Frame', iconClass: 'icon-electric-frame', rarity: 'epic', type: 'frame', frameClass: 'electric-frame', unlocked: false },
            rainbow_frame: { name: 'Rainbow Frame', iconClass: 'icon-rainbow-frame', rarity: 'epic', type: 'frame', frameClass: 'rainbow-frame', unlocked: false },
            void_frame: { name: 'Void Frame', iconClass: 'icon-void-frame', rarity: 'legendary', type: 'frame', frameClass: 'void-frame', unlocked: false },
            gold_frame: { name: 'Gold Frame', iconClass: 'icon-gold-frame', rarity: 'legendary', type: 'frame', frameClass: 'gold-frame', unlocked: false },
            frost_frame: { name: 'Frost Frame', iconClass: 'icon-frost-frame', rarity: 'rare', type: 'frame', frameClass: 'frost-frame', unlocked: false },
            neon_frame: { name: 'Neon Frame', iconClass: 'icon-neon-frame', rarity: 'epic', type: 'frame', frameClass: 'neon-frame', unlocked: false },
            pulse_frame: { name: 'Pulse Frame', iconClass: 'icon-pulse-frame', rarity: 'uncommon', type: 'frame', frameClass: 'pulse-frame', unlocked: false },
            // Dimension-exclusive cosmetics
            // Ember Realm (500 clicks)
            ember_skin: { name: 'Ember', iconClass: 'icon-ember', rarity: 'rare', type: 'button', class: 'ember-btn', unlocked: false, dimension: 'ember' },
            magma_skin: { name: 'Magma Core', iconClass: 'icon-magma', rarity: 'epic', type: 'button', class: 'magma-btn', unlocked: false, dimension: 'ember' },
            ember_trail: { name: 'Ember Trail', iconClass: 'icon-ember', rarity: 'rare', type: 'trail', effect: 'ember', unlocked: false, dimension: 'ember' },
            // Ocean Depths (1000 clicks)
            tidal_skin: { name: 'Tidal Wave', iconClass: 'icon-tidal', rarity: 'rare', type: 'button', class: 'tidal-btn', unlocked: false, dimension: 'ocean' },
            abyss_skin: { name: 'Abyssal', iconClass: 'icon-abyss', rarity: 'epic', type: 'button', class: 'abyss-btn', unlocked: false, dimension: 'ocean' },
            bubble_deep_trail: { name: 'Deep Bubble Trail', iconClass: 'icon-tidal', rarity: 'rare', type: 'trail', effect: 'deep_bubble', unlocked: false, dimension: 'ocean' },
            // Verdant Grove (1500 clicks)
            forest_skin: { name: 'Forest', iconClass: 'icon-forest', rarity: 'rare', type: 'button', class: 'forest-btn', unlocked: false, dimension: 'nature' },
            bloom_skin: { name: 'Bloom', iconClass: 'icon-bloom', rarity: 'epic', type: 'button', class: 'bloom-btn', unlocked: false, dimension: 'nature' },
            leaf_trail: { name: 'Leaf Trail', iconClass: 'icon-forest', rarity: 'rare', type: 'trail', effect: 'leaf', unlocked: false, dimension: 'nature' },
            // The Void (2000 clicks)
            shadow_skin: { name: 'Shadow', iconClass: 'icon-shadow', rarity: 'epic', type: 'button', class: 'shadow-btn', unlocked: false, dimension: 'void' },
            rift_skin: { name: 'Void Rift', iconClass: 'icon-rift', rarity: 'legendary', type: 'button', class: 'rift-btn', unlocked: false, dimension: 'void' },
            void_trail: { name: 'Void Trail', iconClass: 'icon-shadow', rarity: 'epic', type: 'trail', effect: 'void_particle', unlocked: false, dimension: 'void' },
            // Celestial Plane (2500 clicks)
            solar_skin: { name: 'Solar Flare', iconClass: 'icon-solar', rarity: 'epic', type: 'button', class: 'solar-btn', unlocked: false, dimension: 'celestial' },
            lunar_skin: { name: 'Lunar', iconClass: 'icon-lunar', rarity: 'rare', type: 'button', class: 'lunar-btn', unlocked: false, dimension: 'celestial' },
            stardust_trail: { name: 'Stardust Trail', iconClass: 'icon-solar', rarity: 'legendary', type: 'trail', effect: 'stardust', unlocked: false, dimension: 'celestial' },
            // Chaos Dimension (3000 clicks)
            glitch_skin: { name: 'Glitch', iconClass: 'icon-glitch', rarity: 'epic', type: 'button', class: 'glitch-btn', unlocked: false, dimension: 'chaos' },
            corrupt_skin: { name: 'Corrupted', iconClass: 'icon-corrupt', rarity: 'legendary', type: 'button', class: 'corrupt-btn', unlocked: false, dimension: 'chaos' },
            chaos_trail: { name: 'Chaos Trail', iconClass: 'icon-glitch', rarity: 'epic', type: 'trail', effect: 'chaos_particle', unlocked: false, dimension: 'chaos' },
            // Crystal Sanctuary (3500 clicks)
            prism_skin: { name: 'Prism', iconClass: 'icon-prism', rarity: 'legendary', type: 'button', class: 'prism-btn', unlocked: false, dimension: 'crystal' },
            frozen_skin: { name: 'Frozen Crystal', iconClass: 'icon-frozen', rarity: 'epic', type: 'button', class: 'frozen-btn', unlocked: false, dimension: 'crystal' },
            crystal_trail: { name: 'Crystal Trail', iconClass: 'icon-prism', rarity: 'legendary', type: 'trail', effect: 'crystal_particle', unlocked: false, dimension: 'crystal' },
            // Storm Nexus (4000 clicks)
            thunder_skin: { name: 'Thunder', iconClass: 'icon-electric-frame', rarity: 'epic', type: 'button', class: 'thunder-btn', unlocked: false, dimension: 'storm' },
            lightning_skin: { name: 'Lightning Strike', iconClass: 'icon-electric-frame', rarity: 'legendary', type: 'button', class: 'lightning-btn', unlocked: false, dimension: 'storm' },
            storm_trail: { name: 'Storm Trail', iconClass: 'icon-electric-frame', rarity: 'epic', type: 'trail', effect: 'storm_particle', unlocked: false, dimension: 'storm' },
            // Scorched Sands (4500 clicks)
            sand_skin: { name: 'Sandstorm', iconClass: 'icon-gold-frame', rarity: 'rare', type: 'button', class: 'sand-btn', unlocked: false, dimension: 'desert' },
            oasis_skin: { name: 'Oasis', iconClass: 'icon-tidal', rarity: 'epic', type: 'button', class: 'oasis-btn', unlocked: false, dimension: 'desert' },
            dust_trail: { name: 'Dust Trail', iconClass: 'icon-gold-frame', rarity: 'rare', type: 'trail', effect: 'dust_particle', unlocked: false, dimension: 'desert' },
            // Nether Depths (5000 clicks)
            demon_skin: { name: 'Demon', iconClass: 'icon-blood', rarity: 'epic', type: 'button', class: 'demon-btn', unlocked: false, dimension: 'nether' },
            hellfire_skin: { name: 'Hellfire', iconClass: 'icon-fire', rarity: 'legendary', type: 'button', class: 'hellfire-btn', unlocked: false, dimension: 'nether' },
            brimstone_trail: { name: 'Brimstone Trail', iconClass: 'icon-fire', rarity: 'epic', type: 'trail', effect: 'brimstone_particle', unlocked: false, dimension: 'nether' },
            // Frozen Wastes (5500 clicks)
            glacier_skin: { name: 'Glacier', iconClass: 'icon-frost-frame', rarity: 'rare', type: 'button', class: 'glacier-btn', unlocked: false, dimension: 'arctic' },
            aurora_skin: { name: 'Aurora', iconClass: 'icon-rainbow-frame', rarity: 'legendary', type: 'button', class: 'aurora-btn', unlocked: false, dimension: 'arctic' },
            snowflake_trail: { name: 'Snowflake Trail', iconClass: 'icon-frost-frame', rarity: 'rare', type: 'trail', effect: 'snowflake_particle', unlocked: false, dimension: 'arctic' },
            // Cyberspace (6000 clicks)
            cyber_skin: { name: 'Cyber', iconClass: 'icon-matrix', rarity: 'epic', type: 'button', class: 'cyber-btn', unlocked: false, dimension: 'cyber' },
            hologram_skin: { name: 'Hologram', iconClass: 'icon-neon-frame', rarity: 'legendary', type: 'button', class: 'hologram-btn', unlocked: false, dimension: 'cyber' },
            data_trail: { name: 'Data Trail', iconClass: 'icon-matrix', rarity: 'epic', type: 'trail', effect: 'data_particle', unlocked: false, dimension: 'cyber' },
            // Dreamscape (6500 clicks)
            dream_skin: { name: 'Dream', iconClass: 'icon-candy', rarity: 'rare', type: 'button', class: 'dream-btn', unlocked: false, dimension: 'dream' },
            nightmare_skin: { name: 'Nightmare', iconClass: 'icon-void', rarity: 'epic', type: 'button', class: 'nightmare-btn', unlocked: false, dimension: 'dream' },
            cloud_trail: { name: 'Cloud Trail', iconClass: 'icon-candy', rarity: 'rare', type: 'trail', effect: 'cloud_particle', unlocked: false, dimension: 'dream' },
            // Ancient Ruins (7000 clicks)
            relic_skin: { name: 'Relic', iconClass: 'icon-gold-frame', rarity: 'epic', type: 'button', class: 'relic-btn', unlocked: false, dimension: 'ancient' },
            pharaoh_skin: { name: 'Pharaoh', iconClass: 'icon-golden', rarity: 'legendary', type: 'button', class: 'pharaoh-btn', unlocked: false, dimension: 'ancient' },
            hieroglyph_trail: { name: 'Hieroglyph Trail', iconClass: 'icon-gold-frame', rarity: 'epic', type: 'trail', effect: 'hieroglyph_particle', unlocked: false, dimension: 'ancient' },
            // Toxic Wasteland (7500 clicks)
            mutant_skin: { name: 'Mutant', iconClass: 'icon-toxic', rarity: 'epic', type: 'button', class: 'mutant-btn', unlocked: false, dimension: 'toxic' },
            radioactive_skin: { name: 'Radioactive', iconClass: 'icon-toxic', rarity: 'legendary', type: 'button', class: 'radioactive-btn', unlocked: false, dimension: 'toxic' },
            acid_trail: { name: 'Acid Trail', iconClass: 'icon-toxic', rarity: 'epic', type: 'trail', effect: 'acid_particle', unlocked: false, dimension: 'toxic' },
            // Candy Kingdom (8000 clicks)
            candy_dim_skin: { name: 'Sweet', iconClass: 'icon-candy', rarity: 'rare', type: 'button', class: 'sweet-btn', unlocked: false, dimension: 'candy' },
            chocolate_skin: { name: 'Chocolate', iconClass: 'icon-blood', rarity: 'epic', type: 'button', class: 'chocolate-btn', unlocked: false, dimension: 'candy' },
            sprinkle_trail: { name: 'Sprinkle Trail', iconClass: 'icon-candy', rarity: 'rare', type: 'trail', effect: 'sprinkle_particle', unlocked: false, dimension: 'candy' },
            // Shadow Realm (8500 clicks)
            shade_skin: { name: 'Shade', iconClass: 'icon-shadow', rarity: 'epic', type: 'button', class: 'shade-btn', unlocked: false, dimension: 'shadow' },
            umbra_skin: { name: 'Umbra', iconClass: 'icon-void', rarity: 'legendary', type: 'button', class: 'umbra-btn', unlocked: false, dimension: 'shadow' },
            darkness_trail: { name: 'Darkness Trail', iconClass: 'icon-shadow', rarity: 'epic', type: 'trail', effect: 'darkness_particle', unlocked: false, dimension: 'shadow' },
            // Quantum Field (9000 clicks)
            quantum_skin: { name: 'Quantum', iconClass: 'icon-neon-frame', rarity: 'epic', type: 'button', class: 'quantum-btn', unlocked: false, dimension: 'quantum' },
            particle_skin: { name: 'Particle', iconClass: 'icon-electric-frame', rarity: 'legendary', type: 'button', class: 'particle-btn', unlocked: false, dimension: 'quantum' },
            wave_trail: { name: 'Wave Trail', iconClass: 'icon-neon-frame', rarity: 'epic', type: 'trail', effect: 'wave_particle', unlocked: false, dimension: 'quantum' },
            // Omega Dimension (10000 clicks)
            omega_skin: { name: 'Omega', iconClass: 'icon-gold-frame', rarity: 'legendary', type: 'button', class: 'omega-btn', unlocked: false, dimension: 'omega' },
            transcendent_skin: { name: 'Transcendent', iconClass: 'icon-rainbow-frame', rarity: 'legendary', type: 'button', class: 'transcendent-btn', unlocked: false, dimension: 'omega' },
            infinity_trail: { name: 'Infinity Trail', iconClass: 'icon-gold-frame', rarity: 'legendary', type: 'trail', effect: 'infinity_particle', unlocked: false, dimension: 'omega' },
        };

        let activeCosmetics = {
            button: 'default',
            trail: null,
            click: null,
            frame: null
        };

        // Lucky drop numbers for cosmetics (random between 1-10000)
        let luckyNumbers = new Set();
        function generateLuckyNumbers() {
            while (luckyNumbers.size < 30) {
                luckyNumbers.add(Math.floor(Math.random() * 10000) + 1);
            }
        }
        generateLuckyNumbers();

        // Generate Tryhard achievements for every 100 clicks
        for (let i = 1; i <= 50; i++) {
            const clicks = i * 100;
            achievements[clicks] = {
                title: `Tryhard ${romanNumerals[i - 1]}`,
                desc: `Reached ${clicks} clicks!`,
                icon: 'üèÜ'
            };
        }

        // Special achievements
        specialAchievements['first_click'] = {
            title: 'Baby Steps',
            desc: 'Made your first click!',
            icon: 'üë∂',
            condition: () => clickCount === 1
        };
        specialAchievements['speed_demon'] = {
            title: 'Speed Demon',
            desc: '10 clicks in 2 seconds!',
            icon: '‚ö°',
            condition: null // checked separately
        };
        specialAchievements['fifty'] = {
            title: 'Halfway There',
            desc: 'Reached 50 clicks!',
            icon: 'üåì',
            condition: () => clickCount === 50
        };
        specialAchievements['lucky_seven'] = {
            title: 'Lucky Seven',
            desc: 'Hit exactly 777 clicks!',
            icon: 'üçÄ',
            condition: () => clickCount === 777
        };
        specialAchievements['nice'] = {
            title: 'Nice',
            desc: 'Hit 69 clicks... nice.',
            icon: 'üòè',
            condition: () => clickCount === 69
        };
        specialAchievements['answer'] = {
            title: 'The Answer',
            desc: '42 clicks - the answer to everything!',
            icon: 'üåå',
            condition: () => clickCount === 42
        };
        specialAchievements['dedication'] = {
            title: 'Dedicated',
            desc: 'Reached 500 clicks!',
            icon: 'üí™',
            condition: () => clickCount === 500
        };
        specialAchievements['thousand'] = {
            title: 'Millennial',
            desc: 'Reached 1000 clicks!',
            icon: 'üéØ',
            condition: () => clickCount === 1000
        };
        specialAchievements['unstoppable'] = {
            title: 'Unstoppable',
            desc: 'Reached 1500 clicks!',
            icon: 'üî•',
            condition: () => clickCount === 1500
        };
        specialAchievements['legend'] = {
            title: 'Legend',
            desc: 'Reached 2000 clicks!',
            icon: 'üëë',
            condition: () => clickCount === 2000
        };
        specialAchievements['marathon'] = {
            title: 'Marathon Runner',
            desc: 'Clicked for 5 minutes straight!',
            icon: 'üèÉ',
            condition: null // checked separately
        };
        specialAchievements['night_owl'] = {
            title: 'Night Owl',
            desc: 'Clicking between midnight and 5am!',
            icon: 'ü¶â',
            condition: () => {
                const hour = new Date().getHours();
                return hour >= 0 && hour < 5 && clickCount >= 10;
            }
        };
        specialAchievements['perfectionist'] = {
            title: 'Perfectionist',
            desc: 'Reached exactly 111 clicks!',
            icon: '‚ú®',
            condition: () => clickCount === 111
        };
        specialAchievements['triple_threat'] = {
            title: 'Triple Threat',
            desc: 'Reached 333 clicks!',
            icon: 'üé≤',
            condition: () => clickCount === 333
        };
        specialAchievements['high_five'] = {
            title: 'High Five',
            desc: 'Reached 555 clicks!',
            icon: 'üñêÔ∏è',
            condition: () => clickCount === 555
        };
        specialAchievements['devils_number'] = {
            title: "Devil's Number",
            desc: 'Reached 666 clicks... spooky!',
            icon: 'üòà',
            condition: () => clickCount === 666
        };
        specialAchievements['jackpot'] = {
            title: 'Jackpot!',
            desc: 'Hit exactly 888 clicks!',
            icon: 'üé∞',
            condition: () => clickCount === 888
        };
        specialAchievements['millennium'] = {
            title: 'Over 9000!',
            desc: 'Wait no, just 999 clicks!',
            icon: 'üí•',
            condition: () => clickCount === 999
        };
        specialAchievements['binary'] = {
            title: 'Binary Master',
            desc: 'Reached 1024 clicks!',
            icon: 'ü§ñ',
            condition: () => clickCount === 1024
        };
        specialAchievements['elite'] = {
            title: 'Elite',
            desc: 'Reached 1337 clicks!',
            icon: 'üî•',
            condition: () => clickCount === 1337
        };
        specialAchievements['quick_starter'] = {
            title: 'Quick Starter',
            desc: '5 clicks in 1 second!',
            icon: '‚ö°',
            condition: null // checked separately
        };
        specialAchievements['double_click'] = {
            title: 'Double Trouble',
            desc: 'Clicked twice very fast!',
            icon: 'üëÜ',
            condition: null // checked separately
        };
        specialAchievements['early_bird'] = {
            title: 'Early Bird',
            desc: 'Clicking between 5am and 7am!',
            icon: 'üê¶',
            condition: () => {
                const hour = new Date().getHours();
                return hour >= 5 && hour < 7 && clickCount >= 10;
            }
        };
        specialAchievements['lunch_break'] = {
            title: 'Lunch Break Clicker',
            desc: 'Clicking at noon!',
            icon: 'üçΩÔ∏è',
            condition: () => {
                const hour = new Date().getHours();
                return hour === 12 && clickCount >= 10;
            }
        };
        specialAchievements['centurion'] = {
            title: 'Centurion',
            desc: 'Reached 100 clicks in under 30 seconds!',
            icon: 'üèõÔ∏è',
            condition: null // checked separately
        };
        specialAchievements['collector'] = {
            title: 'Collector',
            desc: 'Unlocked 5 cosmetics!',
            icon: 'üé®',
            condition: null // checked separately
        };
        specialAchievements['fashionista'] = {
            title: 'Fashionista',
            desc: 'Unlocked 10 cosmetics!',
            icon: 'üëó',
            condition: null // checked separately
        };
        specialAchievements['completionist'] = {
            title: 'Completionist',
            desc: 'Unlocked all cosmetics!',
            icon: 'üèÜ',
            condition: null // checked separately
        };
        specialAchievements['framed'] = {
            title: 'Framed!',
            desc: 'Equipped your first animated frame!',
            icon: 'üñºÔ∏è',
            condition: null // checked when equipping frame
        };

        // Speed demon tracking
        let clickTimes = [];
        let sessionStart = null;
        let hasClickedInSession = false;

        // Initialize achievement badges
        function initAchievementBadges() {
            // Add special achievements first
            Object.entries(specialAchievements).forEach(([key, achievement]) => {
                const badge = document.createElement('div');
                badge.className = 'achievement-badge';
                badge.id = `badge-${key}`;
                badge.innerHTML = `
                    <span class="badge-icon">${achievement.icon}</span>
                    <span>${achievement.title}</span>
                `;
                achievementsList.appendChild(badge);
            });

            // Add tryhard achievements
            Object.entries(achievements).forEach(([clicks, achievement]) => {
                const badge = document.createElement('div');
                badge.className = 'achievement-badge';
                badge.id = `badge-${clicks}`;
                badge.innerHTML = `
                    <span class="badge-icon">${achievement.icon}</span>
                    <span>${achievement.title}</span>
                `;
                achievementsList.appendChild(badge);
            });
        }

        initAchievementBadges();
        initCosmeticsPanel();
        initDimensionSystem();

        btn.addEventListener('click', (e) => {
            // Apply multiplier if active
            const clickValue = multiplierActive ? 2 : 1;
            clickCount += clickValue;
            countDisplay.textContent = clickCount;

            // Update high score if current count exceeds it
            if (clickCount > highScore) {
                highScore = clickCount;
                highScoreDisplay.textContent = highScore;
                localStorage.setItem('clickItHighScore', highScore);
            }

            // Apply click effect if active
            if (activeCosmetics.click) {
                createClickEffect(e.clientX, e.clientY);
            }

            // Track session time
            if (!sessionStart) {
                sessionStart = Date.now();
            }
            hasClickedInSession = true;

            // Track click speed
            const now = Date.now();
            clickTimes.push(now);
            clickTimes = clickTimes.filter(t => now - t < 2000);

            // Check for multiplier activation
            checkMultiplier();

            // Check speed demon achievement
            if (clickTimes.length >= 10 && !unlockedAchievements.has('speed_demon')) {
                unlockSpecialAchievement('speed_demon');
            }

            // Check quick starter (5 clicks in 1 second)
            const recentClicks = clickTimes.filter(t => now - t < 1000);
            if (recentClicks.length >= 5 && !unlockedAchievements.has('quick_starter')) {
                unlockSpecialAchievement('quick_starter');
            }

            // Check double click (2 clicks in 100ms)
            const veryRecentClicks = clickTimes.filter(t => now - t < 100);
            if (veryRecentClicks.length >= 2 && !unlockedAchievements.has('double_click')) {
                unlockSpecialAchievement('double_click');
            }

            // Check centurion (100 clicks in 30 seconds)
            if (clickCount >= 100 && sessionStart && (now - sessionStart < 30000) && !unlockedAchievements.has('centurion')) {
                unlockSpecialAchievement('centurion');
            }

            // Check marathon achievement (5 minutes = 300000ms)
            if (sessionStart && (now - sessionStart >= 300000) && !unlockedAchievements.has('marathon')) {
                unlockSpecialAchievement('marathon');
            }

            // Check cosmetic collection achievements
            const unlockedCount = Object.values(cosmetics).filter(c => c.unlocked).length;
            if (unlockedCount >= 5 && !unlockedAchievements.has('collector')) {
                unlockSpecialAchievement('collector');
            }
            if (unlockedCount >= 10 && !unlockedAchievements.has('fashionista')) {
                unlockSpecialAchievement('fashionista');
            }
            if (unlockedCount === Object.keys(cosmetics).length && !unlockedAchievements.has('completionist')) {
                unlockSpecialAchievement('completionist');
            }

            // Check special achievements
            Object.entries(specialAchievements).forEach(([key, achievement]) => {
                if (achievement.condition && achievement.condition() && !unlockedAchievements.has(key)) {
                    unlockSpecialAchievement(key);
                }
            });

            // Check tryhard achievements
            if (clickCount % 100 === 0 && clickCount <= 5000) {
                laserCelebration(clickCount);
                unlockAchievement(clickCount);
            }

            // Check for lucky drops
            if (luckyNumbers.has(clickCount)) {
                luckyNumbers.delete(clickCount);
                triggerLuckyDrop();
            }

            // Check for lucky chests
            if (chestNumbers.has(clickCount)) {
                chestNumbers.delete(clickCount);
                triggerLuckyChest();
            }

            // Check for dimension frame drops (only when in a dimension)
            if (currentDimension > 0 && dimensionFrameNumbers.has(clickCount)) {
                dimensionFrameNumbers.delete(clickCount);
                triggerDimensionFrameDrop();
            }

            // Check for dimension unlocks
            checkDimensionUnlock();
            updateDimensionProgress();
        });

        // Cursor trail effect
        document.addEventListener('mousemove', (e) => {
            if (activeCosmetics.trail) {
                createTrailParticle(e.clientX, e.clientY);
            }
        });

        function createTrailParticle(x, y) {
            const cosmetic = cosmetics[activeCosmetics.trail];
            if (!cosmetic) return;

            const trail = document.createElement('div');
            trail.className = 'cursor-trail';
            trail.style.left = x + 'px';
            trail.style.top = y + 'px';

            // Use CSS shapes instead of emojis
            if (cosmetic.effect === 'sparkle') {
                trail.classList.add('trail-sparkle');
            } else if (cosmetic.effect === 'heart') {
                trail.classList.add('trail-heart');
            } else if (cosmetic.effect === 'star') {
                trail.classList.add('trail-star');
            } else if (cosmetic.effect === 'bubble') {
                trail.style.width = (6 + Math.random() * 8) + 'px';
                trail.style.height = trail.style.width;
                trail.style.background = 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(135,206,235,0.6))';
                trail.style.borderRadius = '50%';
                trail.style.border = '1px solid rgba(255,255,255,0.5)';
            } else if (cosmetic.effect === 'smoke') {
                trail.style.width = (10 + Math.random() * 10) + 'px';
                trail.style.height = trail.style.width;
                trail.style.background = `rgba(${100 + Math.random() * 50}, ${100 + Math.random() * 50}, ${100 + Math.random() * 50}, 0.5)`;
                trail.style.borderRadius = '50%';
                trail.style.filter = 'blur(3px)';
            } else if (cosmetic.effect === 'plasma') {
                trail.style.width = '10px';
                trail.style.height = '10px';
                const hue = (Date.now() / 10) % 360;
                trail.style.background = `hsl(${hue}, 100%, 60%)`;
                trail.style.borderRadius = '50%';
                trail.style.boxShadow = `0 0 10px hsl(${hue}, 100%, 50%), 0 0 20px hsl(${hue}, 100%, 50%)`;
            }
            // Dimension-exclusive trails
            else if (cosmetic.effect === 'ember') {
                trail.style.width = (6 + Math.random() * 8) + 'px';
                trail.style.height = trail.style.width;
                trail.style.background = `radial-gradient(circle, #ff8c00, #ff4500)`;
                trail.style.borderRadius = '50%';
                trail.style.boxShadow = '0 0 8px #ff4500';
            } else if (cosmetic.effect === 'deep_bubble') {
                trail.style.width = (8 + Math.random() * 12) + 'px';
                trail.style.height = trail.style.width;
                trail.style.background = 'radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(0,191,255,0.4))';
                trail.style.borderRadius = '50%';
                trail.style.border = '1px solid rgba(0,191,255,0.6)';
                trail.style.boxShadow = '0 0 10px rgba(0,191,255,0.5)';
            } else if (cosmetic.effect === 'leaf') {
                trail.style.width = '12px';
                trail.style.height = '8px';
                trail.style.background = `linear-gradient(45deg, #228b22, #32cd32)`;
                trail.style.borderRadius = '0 50% 50% 50%';
                trail.style.transform = `rotate(${Math.random() * 360}deg)`;
            } else if (cosmetic.effect === 'void_particle') {
                trail.style.width = (6 + Math.random() * 6) + 'px';
                trail.style.height = trail.style.width;
                trail.style.background = `radial-gradient(circle, #8a2be2, #4b0082)`;
                trail.style.borderRadius = '50%';
                trail.style.boxShadow = '0 0 15px #8a2be2';
            } else if (cosmetic.effect === 'stardust') {
                trail.style.width = (4 + Math.random() * 6) + 'px';
                trail.style.height = trail.style.width;
                trail.style.background = `radial-gradient(circle, #fff, #ffd700)`;
                trail.style.borderRadius = '50%';
                trail.style.boxShadow = '0 0 8px #ffd700';
            } else if (cosmetic.effect === 'chaos_particle') {
                trail.style.width = (5 + Math.random() * 8) + 'px';
                trail.style.height = trail.style.width;
                const hue = Math.random() * 360;
                trail.style.background = `hsl(${hue}, 100%, 50%)`;
                trail.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                trail.style.boxShadow = `0 0 10px hsl(${hue}, 100%, 50%)`;
            } else if (cosmetic.effect === 'crystal_particle') {
                trail.style.width = '10px';
                trail.style.height = '10px';
                trail.style.background = `linear-gradient(45deg, #e0ffff, #87ceeb, #b0e0e6)`;
                trail.style.clipPath = 'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)';
                trail.style.boxShadow = '0 0 8px #87ceeb';
            }

            document.body.appendChild(trail);
            setTimeout(() => trail.remove(), 500);
        }

        function createClickEffect(x, y) {
            const cosmetic = cosmetics[activeCosmetics.click];
            if (!cosmetic) return;

            if (cosmetic.effect === 'explosion') {
                // Create explosion ring
                const ring = document.createElement('div');
                ring.style.position = 'fixed';
                ring.style.left = x + 'px';
                ring.style.top = y + 'px';
                ring.style.width = '20px';
                ring.style.height = '20px';
                ring.style.border = '3px solid #ff4500';
                ring.style.borderRadius = '50%';
                ring.style.pointerEvents = 'none';
                ring.style.zIndex = '100';
                ring.style.transform = 'translate(-50%, -50%)';
                ring.style.boxShadow = '0 0 10px #ff4500, 0 0 20px #ff0000';
                ring.animate([
                    { width: '20px', height: '20px', opacity: 1, borderWidth: '3px' },
                    { width: '80px', height: '80px', opacity: 0, borderWidth: '1px' }
                ], { duration: 400, easing: 'ease-out' });
                document.body.appendChild(ring);
                setTimeout(() => ring.remove(), 400);

                // Create explosion particles
                for (let i = 0; i < 8; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'explosion-particle';
                    particle.style.position = 'fixed';
                    particle.style.left = x + 'px';
                    particle.style.top = y + 'px';
                    particle.style.pointerEvents = 'none';
                    particle.style.zIndex = '100';

                    const angle = (Math.PI * 2 * i) / 8;
                    const distance = 40 + Math.random() * 30;
                    particle.animate([
                        { left: x + 'px', top: y + 'px', opacity: 1, transform: 'scale(1)' },
                        { left: (x + Math.cos(angle) * distance) + 'px', top: (y + Math.sin(angle) * distance) + 'px', opacity: 0, transform: 'scale(0.3)' }
                    ], { duration: 400, easing: 'ease-out' });

                    document.body.appendChild(particle);
                    setTimeout(() => particle.remove(), 400);
                }
            } else if (cosmetic.effect === 'confetti') {
                for (let i = 0; i < 12; i++) {
                    const particle = document.createElement('div');
                    particle.style.position = 'fixed';
                    particle.style.left = x + 'px';
                    particle.style.top = y + 'px';
                    particle.style.pointerEvents = 'none';
                    particle.style.zIndex = '100';
                    particle.style.background = ['#ff0', '#f0f', '#0ff', '#f00', '#0f0', '#ff8800'][Math.floor(Math.random() * 6)];
                    particle.style.width = (4 + Math.random() * 6) + 'px';
                    particle.style.height = (4 + Math.random() * 6) + 'px';
                    particle.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
                    particle.style.boxShadow = '0 0 4px currentColor';

                    const angle = (Math.PI * 2 * i) / 12;
                    const distance = 50 + Math.random() * 50;
                    const rotation = Math.random() * 720;
                    particle.animate([
                        { left: x + 'px', top: y + 'px', opacity: 1, transform: 'rotate(0deg)' },
                        { left: (x + Math.cos(angle) * distance) + 'px', top: (y + Math.sin(angle) * distance) + 'px', opacity: 0, transform: `rotate(${rotation}deg)` }
                    ], { duration: 600, easing: 'ease-out' });

                    document.body.appendChild(particle);
                    setTimeout(() => particle.remove(), 600);
                }
            } else if (cosmetic.effect === 'lightning') {
                const bolt = document.createElement('div');
                bolt.className = 'lightning-bolt';
                bolt.style.position = 'fixed';
                bolt.style.left = (x - 10) + 'px';
                bolt.style.top = (y - 20) + 'px';
                bolt.style.pointerEvents = 'none';
                bolt.style.zIndex = '100';
                bolt.animate([
                    { opacity: 1, transform: 'scale(1)' },
                    { opacity: 0, transform: 'scale(1.5)' }
                ], { duration: 300, easing: 'ease-out' });
                document.body.appendChild(bolt);
                setTimeout(() => bolt.remove(), 300);

                // Add flash effect
                const flash = document.createElement('div');
                flash.style.position = 'fixed';
                flash.style.left = x + 'px';
                flash.style.top = y + 'px';
                flash.style.width = '60px';
                flash.style.height = '60px';
                flash.style.background = 'radial-gradient(circle, rgba(255,255,0,0.8) 0%, transparent 70%)';
                flash.style.transform = 'translate(-50%, -50%)';
                flash.style.pointerEvents = 'none';
                flash.style.zIndex = '99';
                flash.animate([
                    { opacity: 1, transform: 'translate(-50%, -50%) scale(1)' },
                    { opacity: 0, transform: 'translate(-50%, -50%) scale(2)' }
                ], { duration: 200, easing: 'ease-out' });
                document.body.appendChild(flash);
                setTimeout(() => flash.remove(), 200);
            } else if (cosmetic.effect === 'ripple') {
                // Multiple expanding rings
                for (let r = 0; r < 3; r++) {
                    setTimeout(() => {
                        const ring = document.createElement('div');
                        ring.style.position = 'fixed';
                        ring.style.left = x + 'px';
                        ring.style.top = y + 'px';
                        ring.style.width = '10px';
                        ring.style.height = '10px';
                        ring.style.border = '2px solid #3498db';
                        ring.style.borderRadius = '50%';
                        ring.style.pointerEvents = 'none';
                        ring.style.zIndex = '100';
                        ring.style.transform = 'translate(-50%, -50%)';
                        ring.animate([
                            { width: '10px', height: '10px', opacity: 1, borderWidth: '3px' },
                            { width: '100px', height: '100px', opacity: 0, borderWidth: '1px' }
                        ], { duration: 600, easing: 'ease-out' });
                        document.body.appendChild(ring);
                        setTimeout(() => ring.remove(), 600);
                    }, r * 100);
                }
            } else if (cosmetic.effect === 'shatter') {
                // Glass shatter effect
                for (let i = 0; i < 10; i++) {
                    const shard = document.createElement('div');
                    shard.style.position = 'fixed';
                    shard.style.left = x + 'px';
                    shard.style.top = y + 'px';
                    shard.style.width = (5 + Math.random() * 10) + 'px';
                    shard.style.height = (8 + Math.random() * 15) + 'px';
                    shard.style.background = 'linear-gradient(135deg, #b9f2ff, #e0ffff, #87ceeb)';
                    shard.style.clipPath = 'polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)';
                    shard.style.pointerEvents = 'none';
                    shard.style.zIndex = '100';
                    shard.style.boxShadow = '0 0 5px rgba(135, 206, 235, 0.8)';

                    const angle = (Math.PI * 2 * i) / 10 + Math.random() * 0.5;
                    const distance = 40 + Math.random() * 60;
                    const rotation = Math.random() * 720 - 360;
                    shard.animate([
                        { left: x + 'px', top: y + 'px', opacity: 1, transform: 'rotate(0deg) scale(1)' },
                        { left: (x + Math.cos(angle) * distance) + 'px', top: (y + Math.sin(angle) * distance) + 'px', opacity: 0, transform: `rotate(${rotation}deg) scale(0.3)` }
                    ], { duration: 500, easing: 'ease-out' });

                    document.body.appendChild(shard);
                    setTimeout(() => shard.remove(), 500);
                }
            } else if (cosmetic.effect === 'vortex') {
                // Spiral vortex effect
                for (let i = 0; i < 12; i++) {
                    const particle = document.createElement('div');
                    particle.style.position = 'fixed';
                    particle.style.width = '8px';
                    particle.style.height = '8px';
                    particle.style.background = `hsl(${270 + i * 10}, 80%, 50%)`;
                    particle.style.borderRadius = '50%';
                    particle.style.pointerEvents = 'none';
                    particle.style.zIndex = '100';
                    particle.style.boxShadow = `0 0 10px hsl(${270 + i * 10}, 80%, 50%)`;

                    const startAngle = (Math.PI * 2 * i) / 12;
                    const startDist = 60;
                    const startX = x + Math.cos(startAngle) * startDist;
                    const startY = y + Math.sin(startAngle) * startDist;

                    particle.animate([
                        { left: startX + 'px', top: startY + 'px', opacity: 1, transform: 'scale(1.5)' },
                        { left: x + 'px', top: y + 'px', opacity: 0, transform: 'scale(0)' }
                    ], { duration: 400, easing: 'ease-in' });

                    document.body.appendChild(particle);
                    setTimeout(() => particle.remove(), 400);
                }
                // Center flash
                const core = document.createElement('div');
                core.style.position = 'fixed';
                core.style.left = x + 'px';
                core.style.top = y + 'px';
                core.style.width = '20px';
                core.style.height = '20px';
                core.style.background = 'radial-gradient(circle, #9b59b6, #4d0099)';
                core.style.borderRadius = '50%';
                core.style.transform = 'translate(-50%, -50%)';
                core.style.pointerEvents = 'none';
                core.style.zIndex = '100';
                core.style.boxShadow = '0 0 20px #9b59b6, 0 0 40px #4d0099';
                core.animate([
                    { transform: 'translate(-50%, -50%) scale(0)', opacity: 0 },
                    { transform: 'translate(-50%, -50%) scale(1.5)', opacity: 1 },
                    { transform: 'translate(-50%, -50%) scale(0)', opacity: 0 }
                ], { duration: 400, easing: 'ease-in-out' });
                document.body.appendChild(core);
                setTimeout(() => core.remove(), 400);
            }
        }

        function triggerLuckyDrop() {
            // Pick a random locked cosmetic
            const lockedCosmetics = Object.entries(cosmetics).filter(([key, c]) => !c.unlocked);
            if (lockedCosmetics.length === 0) return;

            // Weight by rarity (common more likely)
            const weights = { common: 40, uncommon: 30, rare: 20, epic: 8, legendary: 2 };
            let totalWeight = 0;
            const weightedCosmetics = lockedCosmetics.map(([key, c]) => {
                totalWeight += weights[c.rarity];
                return { key, cosmetic: c, weight: totalWeight };
            });

            const roll = Math.random() * totalWeight;
            const selected = weightedCosmetics.find(wc => roll <= wc.weight);

            if (selected) {
                showLuckyDropPopup(selected.key, selected.cosmetic);
            }
        }

        function triggerDimensionFrameDrop() {
            // Only drop frames when in a non-origin dimension
            if (currentDimension === 0) return;

            const currentDim = dimensions[currentDimension];

            // Get all locked frame cosmetics
            const lockedFrames = Object.entries(cosmetics).filter(([key, c]) =>
                c.type === 'frame' && !c.unlocked
            );

            if (lockedFrames.length === 0) return;

            // Prefer frames from current dimension if available
            const dimFrames = lockedFrames.filter(([key]) =>
                currentDim.cosmetics && currentDim.cosmetics.includes(key)
            );

            let selectedFrame;
            if (dimFrames.length > 0 && Math.random() < 0.6) {
                // 60% chance to get dimension-specific frame if available
                selectedFrame = dimFrames[Math.floor(Math.random() * dimFrames.length)];
            } else {
                // Otherwise random locked frame with rarity weighting
                const weights = { common: 30, uncommon: 30, rare: 25, epic: 12, legendary: 3 };
                let totalWeight = 0;
                const weightedFrames = lockedFrames.map(([key, c]) => {
                    totalWeight += weights[c.rarity];
                    return { key, cosmetic: c, weight: totalWeight };
                });
                const roll = Math.random() * totalWeight;
                const selected = weightedFrames.find(wc => roll <= wc.weight);
                if (selected) {
                    selectedFrame = [selected.key, selected.cosmetic];
                }
            }

            if (selectedFrame) {
                showDimensionFrameDropPopup(selectedFrame[0], selectedFrame[1], currentDim);
            }
        }

        function showDimensionFrameDropPopup(key, cosmetic, dimension) {
            const popup = document.createElement('div');
            popup.className = 'lucky-drop-popup';
            popup.innerHTML = `
                <div class="drop-label" style="color: ${dimension.color}">Dimension Drop!</div>
                <div class="drop-icon-box cosmetic-icon ${cosmetic.iconClass}"></div>
                <div class="drop-title">${cosmetic.name}</div>
                <div class="drop-rarity ${cosmetic.rarity}">${cosmetic.rarity.toUpperCase()}</div>
                <div class="drop-desc">A frame from ${dimension.name}!</div>
                <button class="drop-claim-btn" style="background: linear-gradient(135deg, ${dimension.color}, ${dimension.color}88)">Claim!</button>
            `;

            document.body.appendChild(popup);

            popup.querySelector('.drop-claim-btn').addEventListener('click', () => {
                cosmetics[key].unlocked = true;
                updateCosmeticsPanel();
                popup.classList.add('closing');
                setTimeout(() => popup.remove(), 300);
            });
        }

        function showLuckyDropPopup(key, cosmetic) {
            const popup = document.createElement('div');
            popup.className = 'lucky-drop-popup';
            popup.innerHTML = `
                <div class="drop-label">Lucky Drop!</div>
                <div class="drop-icon-box cosmetic-icon ${cosmetic.iconClass}"></div>
                <div class="drop-title">${cosmetic.name}</div>
                <div class="drop-rarity ${cosmetic.rarity}">${cosmetic.rarity.toUpperCase()}</div>
                <div class="drop-desc">A new ${cosmetic.type} cosmetic!</div>
                <button class="drop-claim-btn">Claim!</button>
            `;

            document.body.appendChild(popup);

            popup.querySelector('.drop-claim-btn').addEventListener('click', () => {
                cosmetics[key].unlocked = true;
                updateCosmeticsPanel();
                popup.classList.add('closing');
                setTimeout(() => popup.remove(), 300);
            });
        }

        function initCosmeticsPanel() {
            updateCosmeticsPanel();
        }

        function updateCosmeticsPanel() {
            cosmeticsList.innerHTML = '';

            // Group by type
            const types = ['button', 'frame', 'trail', 'click'];
            types.forEach(type => {
                const typeCosmetics = Object.entries(cosmetics).filter(([k, c]) => c.type === type);
                if (typeCosmetics.length === 0) return;

                const typeLabel = document.createElement('div');
                typeLabel.style.fontSize = '0.7rem';
                typeLabel.style.color = '#888';
                typeLabel.style.marginTop = '10px';
                typeLabel.style.marginBottom = '5px';
                typeLabel.textContent = type === 'click' ? 'CLICK EFFECTS' : type.toUpperCase() + 'S';
                cosmeticsList.appendChild(typeLabel);

                typeCosmetics.forEach(([key, cosmetic]) => {
                    const item = document.createElement('div');
                    item.className = 'cosmetic-item';
                    if (!cosmetic.unlocked) item.classList.add('locked');

                    const isEquipped = activeCosmetics[type] === key;
                    if (isEquipped) item.classList.add('active');

                    // Determine button text and class
                    let btnText = 'Equip';
                    let btnClass = 'equip-btn';
                    if (isEquipped) {
                        if (type === 'button') {
                            btnText = 'Equipped';
                            btnClass = 'equip-btn equipped';
                        } else {
                            // Frames, trails, and click effects can be toggled off
                            btnText = 'Remove';
                            btnClass = 'equip-btn unequip';
                        }
                    }

                    item.innerHTML = `
                        <span class="cosmetic-icon ${cosmetic.iconClass}"></span>
                        <span class="cosmetic-name">${cosmetic.name}</span>
                        ${cosmetic.unlocked ? `<button class="${btnClass}">${btnText}</button>` : ''}
                    `;

                    if (cosmetic.unlocked) {
                        const equipBtn = item.querySelector('.equip-btn');
                        equipBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            equipCosmetic(key, type, cosmetic);
                        });

                        // Add drag functionality
                        item.draggable = true;
                        item.dataset.cosmeticKey = key;
                        item.dataset.cosmeticType = type;

                        item.addEventListener('dragstart', (e) => {
                            e.dataTransfer.setData('text/plain', JSON.stringify({ key, type }));
                            item.classList.add('dragging');
                            dropZone.classList.add('active');
                        });

                        item.addEventListener('dragend', () => {
                            item.classList.remove('dragging');
                            dropZone.classList.remove('active');
                        });
                    }

                    cosmeticsList.appendChild(item);
                });
            });
        }

        // Drop zone setup
        const dropZone = document.getElementById('dropZone');

        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = '#ffd700';
            dropZone.style.background = 'rgba(255, 215, 0, 0.2)';
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.style.borderColor = '';
            dropZone.style.background = '';
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = '';
            dropZone.style.background = '';
            dropZone.classList.remove('active');

            try {
                const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                const cosmetic = cosmetics[data.key];
                if (cosmetic && cosmetic.unlocked) {
                    equipCosmetic(data.key, data.type, cosmetic);
                }
            } catch (err) {
                console.error('Drop error:', err);
            }
        });

        function equipCosmetic(key, type, cosmetic) {
            const buttonFrame = document.getElementById('buttonFrame');
            if (type === 'button') {
                // Remove old class
                const oldCosmetic = cosmetics[activeCosmetics.button];
                if (oldCosmetic && oldCosmetic.class) {
                    btn.classList.remove(oldCosmetic.class);
                }
                activeCosmetics.button = key;
                if (cosmetic.class) {
                    btn.classList.add(cosmetic.class);
                }
            } else if (type === 'frame') {
                // Toggle frame - applies to both button frame and screen border
                if (activeCosmetics.frame === key) {
                    activeCosmetics.frame = null;
                    applyScreenFrame(null);
                    // Remove from button frame
                    buttonFrame.className = 'button-frame';
                } else {
                    activeCosmetics.frame = key;
                    if (cosmetic.frameClass) {
                        applyScreenFrame(cosmetic.frameClass);
                        // Apply to button frame too
                        buttonFrame.className = 'button-frame ' + cosmetic.frameClass;
                    }
                    // Achievement for first frame equipped
                    unlockSpecialAchievement('framed');
                }
            } else {
                // Toggle trail/click effects
                if (activeCosmetics[type] === key) {
                    activeCosmetics[type] = null;
                } else {
                    activeCosmetics[type] = key;
                }
            }
            updateCosmeticsPanel();
        }

        function unlockSpecialAchievement(key) {
            if (unlockedAchievements.has(key)) return;
            unlockedAchievements.add(key);

            const achievement = specialAchievements[key];
            if (!achievement) return;

            // Update badge
            const badge = document.getElementById(`badge-${key}`);
            if (badge) {
                badge.classList.add('unlocked');
            }

            // Show popup
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <div class="achievement-label">Achievement Unlocked!</div>
                <div class="achievement-header">
                    <span class="achievement-icon">${achievement.icon}</span>
                    <span class="achievement-title">${achievement.title}</span>
                </div>
                <div class="achievement-desc">${achievement.desc}</div>
            `;
            document.body.appendChild(popup);

            setTimeout(() => {
                popup.classList.add('slide-out');
                setTimeout(() => popup.remove(), 500);
            }, 3000);
        }

        function unlockAchievement(clicks) {
            if (unlockedAchievements.has(clicks)) return;
            unlockedAchievements.add(clicks);

            const achievement = achievements[clicks];
            if (!achievement) return;

            // Update badge
            const badge = document.getElementById(`badge-${clicks}`);
            if (badge) {
                badge.classList.add('unlocked');
            }

            // Show popup
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <div class="achievement-label">Achievement Unlocked!</div>
                <div class="achievement-header">
                    <span class="achievement-icon">${achievement.icon}</span>
                    <span class="achievement-title">${achievement.title}</span>
                </div>
                <div class="achievement-desc">${achievement.desc}</div>
            `;
            document.body.appendChild(popup);

            setTimeout(() => {
                popup.classList.add('slide-out');
                setTimeout(() => popup.remove(), 500);
            }, 3000);
        }

        function laserCelebration(milestone) {
            // Show milestone text
            const text = document.createElement('div');
            text.className = 'celebration-text';
            text.textContent = milestone + '!';
            document.body.appendChild(text);
            setTimeout(() => text.remove(), 500);

            // Different celebration styles based on milestone
            const celebrationType = (milestone / 100) % 5;

            if (celebrationType === 1) {
                // Rainbow burst
                const rainbowColors = ['#ff0000', '#ff8800', '#ffff00', '#00ff00', '#0088ff', '#8800ff'];
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        createLaser(rainbowColors[i % rainbowColors.length]);
                    }, i * 40);
                }
                // Spiral particles
                for (let i = 0; i < 60; i++) {
                    setTimeout(() => {
                        createSpiralParticle(i, rainbowColors[i % rainbowColors.length]);
                    }, i * 15);
                }
            } else if (celebrationType === 2) {
                // Cross pattern lasers
                const crossColors = ['#00ffff', '#0088ff', '#00ffff'];
                for (let i = 0; i < 8; i++) {
                    setTimeout(() => {
                        createCrossLaser(crossColors[i % crossColors.length], i);
                    }, i * 80);
                }
                // Starburst
                for (let i = 0; i < 40; i++) {
                    setTimeout(() => {
                        createStarburstParticle(i);
                    }, i * 20);
                }
            } else if (celebrationType === 3) {
                // Golden shower
                const goldColors = ['#ffd700', '#ffaa00', '#ff8800', '#ffcc00'];
                for (let i = 0; i < 25; i++) {
                    setTimeout(() => {
                        createLaser(goldColors[i % goldColors.length]);
                        createGoldenRain();
                    }, i * 30);
                }
            } else if (celebrationType === 4) {
                // Purple void explosion
                const voidColors = ['#9b59b6', '#8e44ad', '#6c3483', '#5b2c6f'];
                for (let i = 0; i < 18; i++) {
                    setTimeout(() => {
                        createLaser(voidColors[i % voidColors.length]);
                    }, i * 45);
                }
                // Imploding particles
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => {
                        createImplodingParticle();
                    }, i * 25);
                }
                // Shockwave
                createShockwave('#9b59b6');
            } else {
                // Classic red lasers (default)
                const colors = ['#ff0000', '#ff4444', '#ff6666', '#cc0000', '#ff2222'];
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => {
                        createLaser(colors[i % colors.length]);
                    }, i * 50);
                }
                // Create particles
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        createParticle();
                    }, i * 20);
                }
            }

            // Always add screen flash for milestones
            createScreenFlash(milestone);
        }

        function createSpiralParticle(index, color) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.background = color;
            particle.style.boxShadow = `0 0 8px ${color}`;
            particle.style.width = '8px';
            particle.style.height = '8px';

            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const angle = (index * 0.3) + (Date.now() / 100);
            const startRadius = 50;
            const endRadius = 200 + Math.random() * 150;

            particle.style.left = (centerX + Math.cos(angle) * startRadius) + 'px';
            particle.style.top = (centerY + Math.sin(angle) * startRadius) + 'px';

            particle.animate([
                { left: (centerX + Math.cos(angle) * startRadius) + 'px', top: (centerY + Math.sin(angle) * startRadius) + 'px', opacity: 1 },
                { left: (centerX + Math.cos(angle + 2) * endRadius) + 'px', top: (centerY + Math.sin(angle + 2) * endRadius) + 'px', opacity: 0 }
            ], { duration: 1200, easing: 'ease-out' });

            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 1200);
        }

        function createCrossLaser(color, index) {
            const laser = document.createElement('div');
            laser.className = 'laser';
            laser.style.background = `linear-gradient(90deg, transparent, ${color}, ${color}, ${color}, transparent)`;
            laser.style.boxShadow = `0 0 15px ${color}, 0 0 30px ${color}`;
            laser.style.height = '4px';

            if (index % 2 === 0) {
                laser.classList.add('horizontal');
                laser.style.top = (window.innerHeight / 2) + 'px';
            } else {
                laser.classList.add('vertical');
                laser.style.left = (window.innerWidth / 2) + 'px';
                laser.style.top = '0';
                laser.style.transform = 'rotate(90deg)';
                laser.style.transformOrigin = 'left top';
            }

            document.body.appendChild(laser);
            setTimeout(() => laser.remove(), 500);
        }

        function createStarburstParticle(index) {
            const particle = document.createElement('div');
            particle.style.position = 'fixed';
            particle.style.width = '4px';
            particle.style.height = '20px';
            particle.style.background = 'linear-gradient(180deg, #00ffff, transparent)';
            particle.style.borderRadius = '2px';
            particle.style.pointerEvents = 'none';

            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const angle = (Math.PI * 2 * index) / 40;

            particle.style.left = centerX + 'px';
            particle.style.top = centerY + 'px';
            particle.style.transformOrigin = 'center bottom';
            particle.style.transform = `rotate(${angle}rad)`;

            particle.animate([
                { height: '0px', opacity: 1 },
                { height: '150px', opacity: 0 }
            ], { duration: 600, easing: 'ease-out' });

            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 600);
        }

        function createGoldenRain() {
            for (let i = 0; i < 3; i++) {
                const drop = document.createElement('div');
                drop.style.position = 'fixed';
                drop.style.width = '4px';
                drop.style.height = '15px';
                drop.style.background = 'linear-gradient(180deg, #ffd700, #ffaa00)';
                drop.style.borderRadius = '2px';
                drop.style.left = (Math.random() * window.innerWidth) + 'px';
                drop.style.top = '-20px';
                drop.style.pointerEvents = 'none';
                drop.style.boxShadow = '0 0 5px #ffd700';

                drop.animate([
                    { top: '-20px', opacity: 1 },
                    { top: (window.innerHeight + 20) + 'px', opacity: 0.5 }
                ], { duration: 1000 + Math.random() * 500, easing: 'linear' });

                document.body.appendChild(drop);
                setTimeout(() => drop.remove(), 1500);
            }
        }

        function createImplodingParticle() {
            const particle = document.createElement('div');
            particle.style.position = 'fixed';
            particle.style.width = '10px';
            particle.style.height = '10px';
            particle.style.background = '#9b59b6';
            particle.style.borderRadius = '50%';
            particle.style.pointerEvents = 'none';
            particle.style.boxShadow = '0 0 10px #9b59b6, 0 0 20px #8e44ad';

            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const angle = Math.random() * Math.PI * 2;
            const startRadius = 200 + Math.random() * 150;

            const startX = centerX + Math.cos(angle) * startRadius;
            const startY = centerY + Math.sin(angle) * startRadius;

            particle.style.left = startX + 'px';
            particle.style.top = startY + 'px';

            particle.animate([
                { left: startX + 'px', top: startY + 'px', opacity: 1, transform: 'scale(1)' },
                { left: centerX + 'px', top: centerY + 'px', opacity: 0, transform: 'scale(0)' }
            ], { duration: 800, easing: 'ease-in' });

            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 800);
        }

        function createShockwave(color) {
            const wave = document.createElement('div');
            wave.style.position = 'fixed';
            wave.style.left = '50%';
            wave.style.top = '50%';
            wave.style.width = '10px';
            wave.style.height = '10px';
            wave.style.border = `3px solid ${color}`;
            wave.style.borderRadius = '50%';
            wave.style.transform = 'translate(-50%, -50%)';
            wave.style.pointerEvents = 'none';
            wave.style.boxShadow = `0 0 20px ${color}`;

            wave.animate([
                { width: '10px', height: '10px', opacity: 1, borderWidth: '3px' },
                { width: '400px', height: '400px', opacity: 0, borderWidth: '1px' }
            ], { duration: 800, easing: 'ease-out' });

            document.body.appendChild(wave);
            setTimeout(() => wave.remove(), 800);
        }

        function createScreenFlash(milestone) {
            const flash = document.createElement('div');
            flash.style.position = 'fixed';
            flash.style.top = '0';
            flash.style.left = '0';
            flash.style.width = '100vw';
            flash.style.height = '100vh';
            flash.style.pointerEvents = 'none';
            flash.style.zIndex = '99';

            // Different flash colors based on milestone
            if (milestone >= 1500) {
                flash.style.background = 'radial-gradient(circle, rgba(255,215,0,0.3), transparent)';
            } else if (milestone >= 1000) {
                flash.style.background = 'radial-gradient(circle, rgba(155,89,182,0.3), transparent)';
            } else {
                flash.style.background = 'radial-gradient(circle, rgba(255,255,255,0.2), transparent)';
            }

            flash.animate([
                { opacity: 1 },
                { opacity: 0 }
            ], { duration: 300, easing: 'ease-out' });

            document.body.appendChild(flash);
            setTimeout(() => flash.remove(), 300);
        }

        function createLaser(color) {
            const laser = document.createElement('div');
            laser.className = 'laser';

            const isHorizontal = Math.random() > 0.5;

            if (isHorizontal) {
                laser.classList.add('horizontal');
                laser.style.top = Math.random() * window.innerHeight + 'px';
            } else {
                laser.classList.add('vertical');
                laser.style.top = Math.random() * window.innerHeight + 'px';
                laser.style.left = Math.random() * window.innerWidth + 'px';
                laser.style.transform = `rotate(${Math.random() * 360}deg)`;
            }

            laser.style.background = `linear-gradient(90deg, transparent, ${color}, ${color}, ${color}, transparent)`;
            laser.style.boxShadow = `0 0 10px ${color}, 0 0 20px ${color}, 0 0 30px ${color}`;

            document.body.appendChild(laser);
            setTimeout(() => laser.remove(), 500);
        }

        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';

            const colors = ['#ff0000', '#ff4444', '#ff6666', '#ffff00', '#ff8800'];
            particle.style.background = colors[Math.floor(Math.random() * colors.length)];
            particle.style.boxShadow = `0 0 6px ${particle.style.background}`;

            const startX = window.innerWidth / 2;
            const startY = window.innerHeight / 2;
            const angle = Math.random() * Math.PI * 2;
            const distance = 100 + Math.random() * 300;
            const endX = startX + Math.cos(angle) * distance;
            const endY = startY + Math.sin(angle) * distance;

            particle.style.left = startX + 'px';
            particle.style.top = startY + 'px';

            particle.animate([
                { left: startX + 'px', top: startY + 'px', opacity: 1 },
                { left: endX + 'px', top: endY + 'px', opacity: 0 }
            ], {
                duration: 1000,
                easing: 'ease-out'
            });

            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 1000);
        }

        // Help button functionality
        const helpBtn = document.getElementById('helpBtn');
        const helpModal = document.getElementById('helpModal');
        const helpOverlay = document.getElementById('helpOverlay');
        const helpClose = document.getElementById('helpClose');

        helpBtn.addEventListener('click', () => {
            helpModal.classList.add('active');
            helpOverlay.classList.add('active');
        });

        helpClose.addEventListener('click', () => {
            helpModal.classList.remove('active');
            helpOverlay.classList.remove('active');
        });

        helpOverlay.addEventListener('click', () => {
            helpModal.classList.remove('active');
            helpOverlay.classList.remove('active');
        });

        // Settings functionality
        const settingsBtn = document.getElementById('settingsBtn');
        const settingsPanel = document.getElementById('settingsPanel');
        const colorOptions = document.getElementById('colorOptions');
        const musicControls = document.getElementById('musicControls');
        const volumeSlider = document.getElementById('volumeSlider');

        // Background color options
        const bgColors = [
            { name: 'Default', color: '#1a1a2e' },
            { name: 'Midnight', color: '#0a0a1a' },
            { name: 'Ocean', color: '#0c2461' },
            { name: 'Forest', color: '#1e3a2f' },
            { name: 'Sunset', color: '#2d1b3d' },
            { name: 'Cherry', color: '#3d1b2d' },
            { name: 'Slate', color: '#2c3e50' },
            { name: 'Charcoal', color: '#1c1c1c' },
        ];

        // Music tracks (using Web Audio API for generated tones)
        const musicTracks = [
            { name: 'None', id: 'none' },
            { name: 'Chill Beats', id: 'chill' },
            { name: 'Arcade', id: 'arcade' },
            { name: 'Ambient', id: 'ambient' },
            { name: 'Synthwave', id: 'synthwave' },
            { name: 'Lo-Fi', id: 'lofi' },
            { name: 'Epic', id: 'epic' },
            { name: 'Jazz', id: 'jazz' },
            { name: 'Tropical', id: 'tropical' },
            { name: 'Dark', id: 'dark' },
            { name: 'Disco', id: 'disco' },
            { name: 'Classical', id: 'classical' },
            { name: 'Chiptune', id: 'chiptune' },
            { name: 'Dreamy', id: 'dreamy' },
            { name: 'Funky', id: 'funky' },
        ];

        let currentBgColor = '#1a1a2e';
        let currentMusic = 'none';
        let audioContext = null;
        let musicSource = null;
        let gainNode = null;

        // Toggle settings panel
        settingsBtn.addEventListener('click', () => {
            settingsPanel.classList.toggle('open');
        });

        // Close settings when clicking outside
        document.addEventListener('click', (e) => {
            if (!settingsPanel.contains(e.target) && !settingsBtn.contains(e.target)) {
                settingsPanel.classList.remove('open');
            }
        });

        // Initialize color options
        bgColors.forEach((bg, index) => {
            const option = document.createElement('div');
            option.className = 'color-option';
            if (bg.color === currentBgColor) option.classList.add('active');
            option.style.background = bg.color;
            option.title = bg.name;
            option.addEventListener('click', () => {
                document.querySelectorAll('.color-option').forEach(o => o.classList.remove('active'));
                option.classList.add('active');
                currentBgColor = bg.color;
                document.body.style.background = bg.color;
            });
            colorOptions.appendChild(option);
        });

        // Initialize music options
        musicTracks.forEach(track => {
            const option = document.createElement('div');
            option.className = 'music-option';
            if (track.id === currentMusic) option.classList.add('active');
            option.innerHTML = `
                <span class="music-icon">${track.id === 'none' ? 'üîá' : 'üéµ'}</span>
                <span class="music-name">${track.name}</span>
            `;
            option.addEventListener('click', () => {
                document.querySelectorAll('.music-option').forEach(o => o.classList.remove('active'));
                option.classList.add('active');
                playMusic(track.id);
            });
            musicControls.appendChild(option);
        });

        // Volume control
        volumeSlider.addEventListener('input', () => {
            if (gainNode) {
                gainNode.gain.value = volumeSlider.value / 100;
            }
        });

        // Music generation using Web Audio API
        function playMusic(trackId) {
            // Stop current music
            if (musicSource) {
                musicSource.stop();
                musicSource = null;
            }

            currentMusic = trackId;
            if (trackId === 'none') return;

            // Initialize audio context if needed
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                gainNode = audioContext.createGain();
                gainNode.connect(audioContext.destination);
                gainNode.gain.value = volumeSlider.value / 100;
            }

            // Resume context if suspended
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }

            // Create procedural music based on track type
            createProceduralMusic(trackId);
        }

        function createProceduralMusic(trackId) {
            const sampleRate = audioContext.sampleRate;
            const duration = 16; // 16 second loop for more variation
            const bufferSize = sampleRate * duration;
            const buffer = audioContext.createBuffer(2, bufferSize, sampleRate);

            const leftChannel = buffer.getChannelData(0);
            const rightChannel = buffer.getChannelData(1);

            // Different music styles
            if (trackId === 'chill') {
                // Chill lo-fi style - soft pads with chord progression and melody
                const baseFreq = 220;
                // Extended chord progression: Am - F - C - G - Am - Dm - E - Am
                const chordProgression = [
                    [1, 1.2, 1.5],      // Am
                    [1.33, 1.6, 2],     // F
                    [1.5, 1.875, 2.25], // C
                    [1.125, 1.5, 1.8],  // G
                    [1, 1.2, 1.5],      // Am
                    [1.167, 1.4, 1.75], // Dm
                    [1.25, 1.56, 1.875],// E
                    [1, 1.2, 1.5],      // Am
                ];
                // Melody notes that vary
                const melodyPattern = [0, 2, 4, 2, 5, 4, 2, 0, 3, 5, 7, 5, 4, 2, 3, 0];
                const melodyFreqs = [330, 370, 415, 440, 494, 554, 587, 659];

                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const chordIndex = Math.floor((t % 16) / 2) % 8;
                    const chord = chordProgression[chordIndex];

                    // Soft pad sound with all chord notes
                    let sample = 0;
                    chord.forEach((ratio, idx) => {
                        const freq = baseFreq * ratio;
                        sample += Math.sin(2 * Math.PI * freq * t) * (0.12 - idx * 0.02);
                        sample += Math.sin(2 * Math.PI * freq * 2 * t) * 0.03;
                    });

                    // Add subtle melody
                    const melodyIdx = Math.floor((t * 2) % 16);
                    const melodyNote = melodyFreqs[melodyPattern[melodyIdx] % melodyFreqs.length];
                    const melodyEnv = Math.max(0, 1 - ((t * 2) % 1) * 2);
                    sample += Math.sin(2 * Math.PI * melodyNote * t) * 0.06 * melodyEnv;

                    // Gentle envelope with variation
                    const beatPos = (t % 2);
                    const envelope = beatPos < 0.1 ? beatPos * 10 : Math.max(0.4, 1 - beatPos * 0.3);

                    // Add subtle vinyl crackle texture
                    const noise = (Math.random() - 0.5) * 0.008;

                    sample = sample * envelope * 0.35 + noise;

                    leftChannel[i] = sample;
                    rightChannel[i] = sample * 0.92 + Math.sin(2 * Math.PI * baseFreq * 1.01 * t) * 0.02;
                }
            } else if (trackId === 'arcade') {
                // Arcade style - chiptune with bass line and arpeggios
                const melody = [
                    523.25, 587.33, 659.25, 523.25, 493.88, 440.00, 493.88, 523.25,
                    659.25, 698.46, 783.99, 659.25, 587.33, 523.25, 587.33, 659.25,
                    440.00, 493.88, 523.25, 587.33, 523.25, 493.88, 440.00, 392.00,
                    349.23, 392.00, 440.00, 493.88, 523.25, 587.33, 659.25, 783.99
                ];
                const bassLine = [130.81, 130.81, 146.83, 146.83, 164.81, 164.81, 146.83, 130.81];

                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const noteIndex = Math.floor((t * 4) % 32);
                    const bassIndex = Math.floor((t * 2) % 8);
                    const freq = melody[noteIndex];
                    const bassFreq = bassLine[bassIndex];

                    // Square wave for melody
                    let sample = Math.sign(Math.sin(2 * Math.PI * freq * t)) * 0.08;

                    // Triangle wave for bass
                    const bassPhase = (t * bassFreq) % 1;
                    sample += (Math.abs(bassPhase * 4 - 2) - 1) * 0.1;

                    // Add arpeggio layer
                    const arpFreq = freq * (1 + Math.floor((t * 8) % 3) * 0.5);
                    sample += Math.sign(Math.sin(2 * Math.PI * arpFreq * t)) * 0.04;

                    // Rhythmic envelope
                    const beatPos = (t * 4) % 1;
                    const envelope = beatPos < 0.05 ? 1 : Math.max(0.2, 1 - beatPos * 1.2);

                    // Add kick drum on beats
                    const kickPos = (t * 2) % 1;
                    if (kickPos < 0.1) {
                        const kickFreq = 80 * (1 - kickPos * 5);
                        sample += Math.sin(2 * Math.PI * kickFreq * t) * (0.1 - kickPos) * 1.5;
                    }

                    sample *= envelope * 0.35;

                    leftChannel[i] = sample;
                    rightChannel[i] = sample;
                }
            } else if (trackId === 'ambient') {
                // Ambient - rich evolving drones with harmonics (LOUDER)
                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;

                    // Multiple slowly evolving frequencies with more variation
                    const f1 = 110 + Math.sin(t * 0.05) * 15 + Math.sin(t * 0.13) * 8;
                    const f2 = 165 + Math.sin(t * 0.07 + 1) * 12 + Math.sin(t * 0.17) * 6;
                    const f3 = 220 + Math.sin(t * 0.04 + 2) * 18 + Math.sin(t * 0.11) * 10;
                    const f4 = 330 + Math.sin(t * 0.03 + 3) * 20;
                    const f5 = 82.5 + Math.sin(t * 0.02) * 5; // Sub bass

                    // Rich layered sound
                    let sample = Math.sin(2 * Math.PI * f1 * t) * 0.2;
                    sample += Math.sin(2 * Math.PI * f2 * t) * 0.15;
                    sample += Math.sin(2 * Math.PI * f3 * t) * 0.12;
                    sample += Math.sin(2 * Math.PI * f4 * t) * 0.08;
                    sample += Math.sin(2 * Math.PI * f5 * t) * 0.18; // Deep bass

                    // Add harmonics
                    sample += Math.sin(2 * Math.PI * f1 * 2 * t) * 0.05;
                    sample += Math.sin(2 * Math.PI * f2 * 1.5 * t) * 0.04;

                    // Slow panning modulation
                    const panMod = Math.sin(t * 0.15) * 0.3;

                    // Multiple envelope layers for organic feel
                    const env1 = 0.6 + Math.sin(t * 0.2) * 0.25;
                    const env2 = 0.7 + Math.sin(t * 0.13 + 1.5) * 0.2;
                    const envelope = env1 * env2;

                    sample *= envelope * 0.7; // Increased overall volume

                    leftChannel[i] = sample * (1 + panMod);
                    rightChannel[i] = sample * (1 - panMod) + Math.sin(2 * Math.PI * f3 * t + 0.7) * 0.04;
                }
            } else if (trackId === 'synthwave') {
                // Synthwave - 80s retro synth with arpeggios and pulsing bass
                const bassNotes = [55, 55, 73.42, 73.42, 82.41, 82.41, 61.74, 61.74];
                const arpNotes = [220, 277.18, 329.63, 440, 329.63, 277.18, 220, 164.81];

                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const bassIdx = Math.floor((t * 0.5) % 8);
                    const arpIdx = Math.floor((t * 4) % 8);
                    const bassFreq = bassNotes[bassIdx];
                    const arpFreq = arpNotes[arpIdx];

                    // Saw wave bass with filter sweep
                    const bassPhase = (t * bassFreq) % 1;
                    let sample = (bassPhase * 2 - 1) * 0.15;

                    // Pulse wave arpeggio
                    const pulseWidth = 0.3 + Math.sin(t * 0.5) * 0.2;
                    const arpPhase = (t * arpFreq) % 1;
                    sample += (arpPhase < pulseWidth ? 0.1 : -0.1) * 0.6;

                    // Add pad layer
                    sample += Math.sin(2 * Math.PI * bassFreq * 2 * t) * 0.08;
                    sample += Math.sin(2 * Math.PI * bassFreq * 4 * t) * 0.04;

                    // Snare on 2 and 4
                    const beatPos = (t * 2) % 2;
                    if (beatPos > 0.98 || beatPos < 0.05) {
                        sample += (Math.random() - 0.5) * 0.15 * (1 - Math.abs(beatPos - 1) * 20);
                    }

                    // Kick drum
                    const kickPos = (t * 2) % 1;
                    if (kickPos < 0.08) {
                        sample += Math.sin(2 * Math.PI * (100 - kickPos * 800) * t) * (0.08 - kickPos) * 2;
                    }

                    sample *= 0.4;
                    leftChannel[i] = sample;
                    rightChannel[i] = sample + Math.sin(2 * Math.PI * arpFreq * 1.005 * t) * 0.02;
                }
            } else if (trackId === 'lofi') {
                // Lo-Fi hip hop - mellow with vinyl crackle and jazzy chords
                const chords = [
                    [196, 246.94, 293.66], // G
                    [220, 277.18, 329.63], // A min
                    [174.61, 220, 261.63], // F
                    [196, 246.94, 293.66], // G
                ];

                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const chordIdx = Math.floor((t / 4) % 4);
                    const chord = chords[chordIdx];

                    let sample = 0;
                    // Warm rhodes-like pad
                    chord.forEach((freq, idx) => {
                        sample += Math.sin(2 * Math.PI * freq * t) * (0.1 - idx * 0.02);
                        sample += Math.sin(2 * Math.PI * freq * 2 * t) * 0.02 * Math.exp(-((t * 2) % 1) * 3);
                    });

                    // Slow bass
                    const bassFreq = chord[0] / 2;
                    sample += Math.sin(2 * Math.PI * bassFreq * t) * 0.12;

                    // Lazy drums
                    const beatPos = (t * 1.5) % 1; // Slower tempo
                    if (beatPos < 0.05) {
                        sample += Math.sin(2 * Math.PI * 60 * t) * (0.05 - beatPos) * 3;
                    }
                    // Snare with swing
                    const snarePos = ((t + 0.02) * 1.5) % 1;
                    if (snarePos > 0.48 && snarePos < 0.55) {
                        sample += (Math.random() - 0.5) * 0.08;
                    }

                    // Vinyl crackle
                    if (Math.random() < 0.03) {
                        sample += (Math.random() - 0.5) * 0.03;
                    }
                    sample += (Math.random() - 0.5) * 0.005;

                    // Tape wobble
                    const wobble = Math.sin(t * 0.3) * 0.002;

                    sample *= 0.45;
                    leftChannel[i] = sample * (1 + wobble);
                    rightChannel[i] = sample * (1 - wobble);
                }
            } else if (trackId === 'epic') {
                // Epic orchestral - dramatic with building intensity
                const progression = [130.81, 146.83, 164.81, 174.61]; // C D E F

                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const section = Math.floor((t / 4) % 4);
                    const baseFreq = progression[section];
                    const intensity = 0.5 + (section / 4) * 0.5;

                    // String-like pad with multiple octaves
                    let sample = 0;
                    for (let oct = 0; oct < 3; oct++) {
                        const f = baseFreq * Math.pow(2, oct);
                        sample += Math.sin(2 * Math.PI * f * t) * (0.12 - oct * 0.03);
                        // Add fifths for power
                        sample += Math.sin(2 * Math.PI * f * 1.5 * t) * (0.08 - oct * 0.02);
                    }

                    // Timpani hits
                    const beatPos = (t * 1) % 2;
                    if (beatPos < 0.1) {
                        const timpFreq = baseFreq / 2;
                        sample += Math.sin(2 * Math.PI * timpFreq * t) * (0.1 - beatPos) * 2 * intensity;
                    }

                    // Building percussion
                    if (section >= 2) {
                        const percPos = (t * 2) % 1;
                        if (percPos < 0.02) {
                            sample += (Math.random() - 0.5) * 0.1;
                        }
                    }

                    // Brass stabs on section changes
                    const sectionPos = (t % 4);
                    if (sectionPos < 0.3) {
                        sample += Math.sin(2 * Math.PI * baseFreq * 2 * t) * (0.3 - sectionPos) * 0.3;
                    }

                    sample *= intensity * 0.4;
                    leftChannel[i] = sample;
                    rightChannel[i] = sample;
                }
            } else if (trackId === 'jazz') {
                // Jazz - swing rhythm with walking bass and piano comping
                const walkingBass = [130.81, 146.83, 164.81, 174.61, 196, 174.61, 164.81, 146.83];
                const jazzChords = [
                    [261.63, 329.63, 392, 493.88], // Cmaj7
                    [293.66, 349.23, 440, 523.25], // Dm7
                    [329.63, 392, 493.88, 587.33], // Em7
                    [349.23, 440, 523.25, 659.25], // Fmaj7
                ];

                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const swingOffset = ((t * 2) % 1) < 0.67 ? 0 : 0.02; // Swing feel
                    const tSwing = t + swingOffset;

                    const bassIdx = Math.floor((tSwing * 2) % 8);
                    const chordIdx = Math.floor((t / 4) % 4);
                    const bassFreq = walkingBass[bassIdx];
                    const chord = jazzChords[chordIdx];

                    // Upright bass - warm and round
                    let sample = Math.sin(2 * Math.PI * bassFreq * t) * 0.15;
                    sample += Math.sin(2 * Math.PI * bassFreq * 2 * t) * 0.03;

                    // Piano comping - sparse and syncopated
                    const compPos = (tSwing * 4) % 4;
                    if (compPos < 0.1 || (compPos > 2.5 && compPos < 2.6)) {
                        chord.forEach((freq, idx) => {
                            const decay = Math.exp(-((tSwing * 4) % 1) * 4);
                            sample += Math.sin(2 * Math.PI * freq * t) * 0.04 * decay;
                        });
                    }

                    // Ride cymbal - steady swing
                    const ridePos = (tSwing * 2) % 1;
                    if (ridePos < 0.05 || (ridePos > 0.65 && ridePos < 0.7)) {
                        sample += (Math.random() - 0.5) * 0.04 * (1 - ridePos * 2);
                    }

                    // Brushed snare ghost notes
                    if (Math.random() < 0.02) {
                        sample += (Math.random() - 0.5) * 0.02;
                    }

                    sample *= 0.5;
                    leftChannel[i] = sample;
                    rightChannel[i] = sample * 0.95 + Math.sin(2 * Math.PI * bassFreq * 1.002 * t) * 0.01;
                }
            } else if (trackId === 'tropical') {
                // Tropical house - upbeat with steel drums and marimbas
                const steelDrumNotes = [523.25, 659.25, 783.99, 1046.5, 783.99, 659.25, 523.25, 392];
                const bassNotes = [130.81, 130.81, 174.61, 174.61, 196, 196, 164.81, 164.81];

                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const noteIdx = Math.floor((t * 4) % 8);
                    const bassIdx = Math.floor((t * 0.5) % 8);
                    const steelFreq = steelDrumNotes[noteIdx];
                    const bassFreq = bassNotes[bassIdx];

                    // Steel drum - bell-like with quick decay
                    const decay = Math.exp(-((t * 4) % 1) * 8);
                    let sample = Math.sin(2 * Math.PI * steelFreq * t) * 0.12 * decay;
                    sample += Math.sin(2 * Math.PI * steelFreq * 2.4 * t) * 0.06 * decay;
                    sample += Math.sin(2 * Math.PI * steelFreq * 5.2 * t) * 0.02 * decay;

                    // Deep house bass
                    sample += Math.sin(2 * Math.PI * bassFreq * t) * 0.13;

                    // Four-on-the-floor kick
                    const kickPos = (t * 2) % 1;
                    if (kickPos < 0.06) {
                        sample += Math.sin(2 * Math.PI * (80 - kickPos * 600) * t) * (0.06 - kickPos) * 2.5;
                    }

                    // Offbeat hi-hats
                    const hatPos = ((t + 0.25) * 2) % 1;
                    if (hatPos < 0.03) {
                        sample += (Math.random() - 0.5) * 0.06;
                    }

                    // Shaker
                    const shakerPos = (t * 4) % 1;
                    if (shakerPos < 0.05) {
                        sample += (Math.random() - 0.5) * 0.03;
                    }

                    sample *= 0.45;
                    leftChannel[i] = sample;
                    rightChannel[i] = sample;
                }
            } else if (trackId === 'dark') {
                // Dark ambient - ominous drones with dissonance
                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;

                    // Low rumbling drone
                    const drone1 = 55 + Math.sin(t * 0.02) * 5;
                    const drone2 = 82.5 + Math.sin(t * 0.03 + 1) * 8;
                    const drone3 = 58.27 + Math.sin(t * 0.015) * 3; // Slightly dissonant

                    let sample = Math.sin(2 * Math.PI * drone1 * t) * 0.15;
                    sample += Math.sin(2 * Math.PI * drone2 * t) * 0.1;
                    sample += Math.sin(2 * Math.PI * drone3 * t) * 0.08;

                    // Distant thunder/rumble
                    const rumblePos = (t * 0.1) % 1;
                    if (rumblePos < 0.3) {
                        sample += (Math.random() - 0.5) * 0.04 * (0.3 - rumblePos);
                    }

                    // Eerie high tones
                    const highFreq = 880 + Math.sin(t * 0.07) * 100;
                    sample += Math.sin(2 * Math.PI * highFreq * t) * 0.02 * (0.5 + Math.sin(t * 0.2) * 0.5);

                    // Reverse-like swells
                    const swellPos = (t * 0.25) % 1;
                    const swellEnv = swellPos * swellPos;
                    sample += Math.sin(2 * Math.PI * 220 * t) * 0.05 * swellEnv;

                    // Sub bass pulse
                    const pulseEnv = 0.6 + Math.sin(t * 0.5) * 0.4;
                    sample += Math.sin(2 * Math.PI * 30 * t) * 0.12 * pulseEnv;

                    // Slow filter movement
                    const brightness = 0.5 + Math.sin(t * 0.1) * 0.3;
                    sample *= brightness;

                    sample *= 0.55;
                    const pan = Math.sin(t * 0.08) * 0.3;
                    leftChannel[i] = sample * (1 + pan);
                    rightChannel[i] = sample * (1 - pan);
                }
            } else if (trackId === 'disco') {
                // Disco - funky bassline with rhythmic stabs
                const bassNotes = [110, 110, 130.81, 146.83, 110, 110, 146.83, 130.81];
                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const bassIdx = Math.floor((t * 2) % 8);
                    const bassFreq = bassNotes[bassIdx];

                    // Funky bass with octave jump
                    const bassPhase = (t * bassFreq) % 1;
                    let sample = Math.sin(2 * Math.PI * bassFreq * t) * 0.15;
                    sample += Math.sin(2 * Math.PI * bassFreq * 2 * t) * 0.08;

                    // Disco hi-hat pattern (offbeat emphasis)
                    const hatPos = (t * 4) % 1;
                    if (hatPos > 0.5 && hatPos < 0.6) {
                        sample += (Math.random() - 0.5) * 0.12;
                    }

                    // Chord stabs on beats 1 and 3
                    const beatNum = Math.floor((t * 4) % 4);
                    const stabPos = (t * 4) % 1;
                    if ((beatNum === 0 || beatNum === 2) && stabPos < 0.15) {
                        const stabEnv = 1 - stabPos / 0.15;
                        sample += Math.sin(2 * Math.PI * 220 * t) * 0.08 * stabEnv;
                        sample += Math.sin(2 * Math.PI * 277.18 * t) * 0.06 * stabEnv;
                        sample += Math.sin(2 * Math.PI * 329.63 * t) * 0.05 * stabEnv;
                    }

                    // Kick drum on every beat
                    const kickPos = (t * 4) % 1;
                    if (kickPos < 0.1) {
                        const kickFreq = 100 * (1 - kickPos * 8);
                        sample += Math.sin(2 * Math.PI * kickFreq * t) * (0.15 - kickPos * 1.2);
                    }

                    sample *= 0.5;
                    leftChannel[i] = sample;
                    rightChannel[i] = sample;
                }
            } else if (trackId === 'classical') {
                // Classical - gentle strings with arpeggiated melody
                const scaleFreqs = [261.63, 293.66, 329.63, 349.23, 392.00, 440.00, 493.88, 523.25];
                const chordProg = [
                    [261.63, 329.63, 392.00], // C major
                    [220.00, 277.18, 329.63], // A minor
                    [174.61, 220.00, 261.63], // F major
                    [196.00, 246.94, 293.66], // G major
                ];
                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const chordIdx = Math.floor((t / 4) % 4);
                    const chord = chordProg[chordIdx];

                    // String pad with vibrato
                    let sample = 0;
                    const vibrato = 1 + Math.sin(t * 5) * 0.003;
                    chord.forEach((freq, idx) => {
                        sample += Math.sin(2 * Math.PI * freq * vibrato * t) * (0.08 - idx * 0.015);
                        sample += Math.sin(2 * Math.PI * freq * 2 * vibrato * t) * 0.02;
                    });

                    // Arpeggiated melody
                    const arpIdx = Math.floor((t * 2) % 8);
                    const melodyFreq = scaleFreqs[arpIdx];
                    const melodyEnv = Math.max(0, 1 - ((t * 2) % 1) * 1.5);
                    sample += Math.sin(2 * Math.PI * melodyFreq * t) * 0.06 * melodyEnv;

                    // Soft envelope
                    const measurePos = (t / 4) % 1;
                    const envelope = measurePos < 0.05 ? measurePos * 20 : Math.max(0.6, 1 - measurePos * 0.2);

                    sample *= envelope * 0.45;
                    leftChannel[i] = sample;
                    rightChannel[i] = sample * 0.95;
                }
            } else if (trackId === 'chiptune') {
                // Chiptune - 8-bit style with pulse waves
                const melody = [
                    392, 440, 494, 523, 587, 523, 494, 440,
                    392, 349, 330, 294, 330, 349, 392, 440,
                    523, 587, 659, 698, 659, 587, 523, 494,
                    440, 494, 523, 587, 523, 440, 392, 349
                ];
                const bass = [130.81, 164.81, 146.83, 130.81];
                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const melodyIdx = Math.floor((t * 4) % 32);
                    const bassIdx = Math.floor((t / 2) % 4);
                    const freq = melody[melodyIdx];
                    const bassFreq = bass[bassIdx];

                    // 25% pulse wave for melody
                    const phase = (t * freq) % 1;
                    let sample = (phase < 0.25 ? 1 : -1) * 0.08;

                    // Triangle wave bass
                    const bassPhase = (t * bassFreq) % 1;
                    sample += (Math.abs(bassPhase * 4 - 2) - 1) * 0.1;

                    // Noise for percussion
                    const noisePos = (t * 8) % 1;
                    if (noisePos < 0.05 && Math.floor(t * 8) % 2 === 1) {
                        sample += (Math.random() - 0.5) * 0.15 * (1 - noisePos * 20);
                    }

                    // Note envelope
                    const notePos = (t * 4) % 1;
                    const env = notePos < 0.05 ? 1 : Math.max(0.3, 1 - notePos * 0.8);

                    sample *= env * 0.4;
                    leftChannel[i] = sample;
                    rightChannel[i] = sample;
                }
            } else if (trackId === 'dreamy') {
                // Dreamy - ethereal pads with shimmer
                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;

                    // Slow-moving ethereal frequencies
                    const f1 = 220 + Math.sin(t * 0.08) * 20;
                    const f2 = 330 + Math.sin(t * 0.06 + 1) * 25;
                    const f3 = 440 + Math.sin(t * 0.04 + 2) * 30;
                    const f4 = 550 + Math.sin(t * 0.05 + 3) * 20;

                    // Soft pad layers
                    let sample = Math.sin(2 * Math.PI * f1 * t) * 0.12;
                    sample += Math.sin(2 * Math.PI * f2 * t) * 0.1;
                    sample += Math.sin(2 * Math.PI * f3 * t) * 0.08;
                    sample += Math.sin(2 * Math.PI * f4 * t) * 0.06;

                    // High shimmer effect
                    const shimmerFreq = 1760 + Math.sin(t * 3) * 200;
                    const shimmerEnv = 0.3 + Math.sin(t * 0.5) * 0.3;
                    sample += Math.sin(2 * Math.PI * shimmerFreq * t) * 0.015 * shimmerEnv;

                    // Slow filter sweep
                    const brightness = 0.6 + Math.sin(t * 0.03) * 0.4;
                    sample *= brightness;

                    // Gentle swell
                    const swell = 0.7 + Math.sin(t * 0.15) * 0.3;
                    sample *= swell * 0.45;

                    // Stereo widening
                    leftChannel[i] = sample + Math.sin(2 * Math.PI * f2 * 1.002 * t) * 0.02;
                    rightChannel[i] = sample + Math.sin(2 * Math.PI * f3 * 0.998 * t) * 0.02;
                }
            } else if (trackId === 'funky') {
                // Funky - slap bass with wah guitar
                const bassPattern = [98, 0, 98, 130.81, 0, 98, 146.83, 0, 110, 0, 110, 146.83, 0, 130.81, 98, 0];
                for (let i = 0; i < bufferSize; i++) {
                    const t = i / sampleRate;
                    const patternIdx = Math.floor((t * 4) % 16);
                    const bassFreq = bassPattern[patternIdx];

                    let sample = 0;

                    // Slap bass with harmonics
                    if (bassFreq > 0) {
                        const bassEnv = Math.max(0, 1 - ((t * 4) % 1) * 2);
                        sample += Math.sin(2 * Math.PI * bassFreq * t) * 0.15 * bassEnv;
                        sample += Math.sin(2 * Math.PI * bassFreq * 2 * t) * 0.08 * bassEnv;
                        sample += Math.sin(2 * Math.PI * bassFreq * 3 * t) * 0.04 * bassEnv;
                    }

                    // Wah guitar chord (filter sweep)
                    const wahFreq = 300 + Math.sin(t * 4) * 200;
                    const beatNum = Math.floor((t * 2) % 4);
                    if (beatNum === 1 || beatNum === 3) {
                        const wahEnv = Math.max(0, 1 - ((t * 2) % 1) * 1.5);
                        // Simulate filtered sound
                        sample += Math.sin(2 * Math.PI * 196 * t) * 0.06 * wahEnv;
                        sample += Math.sin(2 * Math.PI * 246.94 * t) * 0.05 * wahEnv;
                        sample += Math.sin(2 * Math.PI * wahFreq * t) * 0.02 * wahEnv;
                    }

                    // Funky drums
                    const kickPos = (t * 2) % 1;
                    if (kickPos < 0.08) {
                        sample += Math.sin(2 * Math.PI * 60 * (1 - kickPos * 8) * t) * (0.15 - kickPos * 1.5);
                    }

                    // Snare on 2 and 4
                    if ((beatNum === 1 || beatNum === 3) && ((t * 2) % 1) < 0.1) {
                        sample += (Math.random() - 0.5) * 0.12 * (1 - ((t * 2) % 1) * 10);
                    }

                    // Hi-hat
                    const hatPos = (t * 4) % 1;
                    if (hatPos < 0.03) {
                        sample += (Math.random() - 0.5) * 0.06;
                    }

                    sample *= 0.45;
                    leftChannel[i] = sample;
                    rightChannel[i] = sample;
                }
            }

            // Create looping source
            musicSource = audioContext.createBufferSource();
            musicSource.buffer = buffer;
            musicSource.loop = true;
            musicSource.connect(gainNode);
            musicSource.start();
        }

        // Dimension System Functions
        function initDimensionSystem() {
            updateDimensionIndicator();
            createDimensionParticles();
        }

        function updateDimensionIndicator() {
            const dim = dimensions[currentDimension];
            document.getElementById('dimensionIcon').textContent = dim.icon;
            document.getElementById('dimensionName').textContent = dim.name;
            document.getElementById('dimensionIndicator').style.borderColor = dim.color;
            document.getElementById('dimensionIndicator').style.boxShadow = `0 0 20px ${dim.color}40`;
        }

        function updateDimensionProgress() {
            const currentDim = dimensions[currentDimension];
            const nextDim = dimensions[currentDimension + 1];

            if (!nextDim) {
                // Max dimension reached
                document.getElementById('dimensionProgress').style.display = 'none';
                return;
            }

            const startClicks = currentDim.unlockAt;
            const endClicks = nextDim.unlockAt;
            const progress = ((clickCount - startClicks) / (endClicks - startClicks)) * 100;
            document.getElementById('dimensionProgress').style.width = Math.min(100, Math.max(0, progress)) + '%';
        }

        function checkDimensionUnlock() {
            for (let i = 0; i < dimensions.length; i++) {
                const dim = dimensions[i];
                if (clickCount >= dim.unlockAt && !unlockedDimensions.has(i) && i > 0) {
                    unlockDimension(i);
                    return; // Only unlock one at a time
                }
            }
        }

        function unlockDimension(index) {
            unlockedDimensions.add(index);
            const dim = dimensions[index];

            // Unlock dimension cosmetics
            dim.cosmetics.forEach(cosmeticKey => {
                if (cosmetics[cosmeticKey]) {
                    cosmetics[cosmeticKey].unlocked = true;
                }
            });

            // Show unlock popup
            showDimensionUnlockPopup(dim);
        }

        function showDimensionUnlockPopup(dim) {
            const popup = document.createElement('div');
            popup.className = 'dimension-unlock-popup';
            popup.style.borderColor = dim.color;
            popup.style.color = dim.color;
            popup.style.boxShadow = `0 0 50px ${dim.color}60, inset 0 0 30px ${dim.color}20`;

            let rewardsHTML = dim.cosmetics.map(key => {
                const c = cosmetics[key];
                return c ? `<div class="dimension-reward-item"><span class="cosmetic-icon ${c.iconClass}" style="width:16px;height:16px;"></span>${c.name}</div>` : '';
            }).join('');

            popup.innerHTML = `
                <div class="dimension-unlock-label" style="color: ${dim.color}">New Dimension Discovered!</div>
                <div class="dimension-unlock-icon">${dim.icon}</div>
                <div class="dimension-unlock-title" style="color: ${dim.color}">${dim.name}</div>
                <div class="dimension-unlock-desc">${dim.desc}</div>
                <div class="dimension-rewards">${rewardsHTML}</div>
                <button class="dimension-enter-btn">Enter Dimension</button>
            `;

            document.body.appendChild(popup);

            popup.querySelector('.dimension-enter-btn').addEventListener('click', () => {
                popup.classList.add('closing');
                setTimeout(() => {
                    popup.remove();
                    transitionToDimension(dimensions.indexOf(dim));
                }, 300);
            });
        }

        function transitionToDimension(index) {
            const dim = dimensions[index];
            const transition = document.getElementById('dimensionTransition');

            // Set transition background color
            transition.style.background = `radial-gradient(circle, ${dim.color}cc, ${dim.color}66, transparent)`;
            transition.innerHTML = `<div class="dimension-transition-text" style="color: ${dim.color}">${dim.icon}<br>${dim.name}</div>`;

            transition.classList.add('active');

            // Clear old particles
            dimensionParticles.forEach(p => p.remove());
            dimensionParticles = [];

            // Remove old dimension class
            const oldDim = dimensions[currentDimension];
            document.body.classList.remove(oldDim.bgClass);

            setTimeout(() => {
                // Apply new dimension
                currentDimension = index;
                document.body.classList.add(dim.bgClass);
                updateDimensionIndicator();
                updateCosmeticsPanel();

                // Create new particles
                createDimensionParticles();
            }, 1000);

            setTimeout(() => {
                transition.classList.remove('active');
                transition.innerHTML = '';
            }, 2000);

            // Achievement for first dimension travel
            if (!unlockedAchievements.has('dimension_traveler')) {
                unlockSpecialAchievement('dimension_traveler');
            }
        }

        function createDimensionParticles() {
            // Clear existing
            dimensionParticles.forEach(p => p.remove());
            dimensionParticles = [];

            // Origin doesn't have particles
            if (currentDimension === 0) return;

            const particleCount = 15;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'dimension-particle';
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.top = Math.random() * 100 + 'vh';
                particle.style.width = (5 + Math.random() * 10) + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = (Math.random() * 3) + 's';
                particle.style.animationDuration = (2 + Math.random() * 3) + 's';
                document.body.appendChild(particle);
                dimensionParticles.push(particle);
            }
        }

        // Add dimension traveler achievement
        specialAchievements['dimension_traveler'] = {
            title: 'Dimension Traveler',
            desc: 'Traveled to a new dimension!',
            icon: 'üåå',
            condition: null
        };
    </script>
</body>
</html>

